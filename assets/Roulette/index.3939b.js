System.register("chunks:///_virtual/Roulette",["./Roulette.Hover.ts","./Roulette.Play.ts","./Roulette.PopupJackpot.ts","./Roulette.Spin.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Roulette.Hover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Casino.Lobby.ts","./Roulette.Play.ts","./Utils.ts"],(function(e){var t,o,n,i,r,a,s,l,c,u,f,d,m,p,g,v,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.TextAsset,l=e.Node,c=e.game,u=e.sys,f=e.Label,d=e.UITransform,m=e.Vec3,p=e.Component},function(e){g=e.default},function(e){v=e.default},function(e){h=e.Utils}],execute:function(){var y,N,b,C,B,E,_,R,S;r._RF.push({},"936b5BH9FZHLpj1ESempiTr","Roulette.Hover",void 0);var T=a.ccclass,x=a.property,L=a.menu;e("default",(y=L("Roulette/Hover"),N=x(s),b=x(l),C=x(l),T(B=y((_=t((E=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"json",_,i(t)),n(t,"betPositions",R,i(t)),n(t,"infoNode",S,i(t)),t.texts=[],t}return o(t,e),t.prototype.onLoad=function(){var e=this,t=g.instance.isTableVip;this.texts=JSON.parse(this.json.text),this.betPositions.children.forEach((function(o){var n=parseInt(o.name);if(!isNaN(n)){var i=e.texts.find((function(e){return e.id===n})),r=t?o.getChildByName("hover"):o.getChildByName("hoverNormal");o.on(l.EventType.MOUSE_ENTER,(function(){c.canvas.style.cursor="pointer",r&&(r.active=!0),i.values.forEach((function(o){o+=13;var n=e.betPositions.getChildByName(o.toString());if(n){var i=t?n.getChildByName("hover"):n.getChildByName("hoverNormal");i&&(i.active=!0)}}));var a=v.instance.betAmountLogs.find((function(e){return e.gate===n})),s=a?a.amount:0,l=v.instance.allBetAmountLogs.find((function(e){return e.gate===n})),p=l?l.amount:0,g=u.localStorage.getItem("langCode")||"vi";e.infoNode.getChildByName("description").getComponent(f).string="vi"===g?i.description:i["description_"+g]||i.description,e.infoNode.getChildByName("fund_rate").getComponent(f).string="1:"+i.fund_rate,e.infoNode.getChildByName("max_factor").getComponent(f).string=h.formatNumber(i.max_factor*v.instance.minBet),e.infoNode.getChildByName("me_bet").getComponent(f).string=h.formatMoney(s,!0),e.infoNode.getChildByName("total_bet").getComponent(f).string=h.formatMoney(p,!0);var y=o.getComponent(d).convertToWorldSpaceAR(m.ZERO),N=e.infoNode.parent.parent.getComponent(d).convertToNodeSpaceAR(y);e.infoNode.setPosition(N.x+180,N.y-120),e.infoNode.active=!0})),o.on(l.EventType.MOUSE_LEAVE,(function(){r&&(r.active=!1),c.canvas.style.cursor="default",e.infoNode.active=!1,i.values.forEach((function(o){o+=13;var n=e.betPositions.getChildByName(o.toString());if(n){var i=t?n.getChildByName("hover"):n.getChildByName("hoverNormal");i&&(i.active=!1)}}))}))}}))},t}(p)).prototype,"json",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"betPositions",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"infoNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=E))||B)||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/Roulette.Play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Casino.Player.ts","./App.ts","./RouletteSignalRClient.ts","./Casino.Lobby.ts","./Config.ts","./BroadcastListener.ts","./Utils.ts","./BundleControl.ts","./Roulette.Spin.ts"],(function(e){var t,i,n,o,a,r,l,s,c,u,h,g,d,p,f,m,b,y,v,C,B,w,N,T,S,I,R,P,L,D,E,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.SpriteFrame,c=e.Sprite,u=e.Label,h=e.Prefab,g=e.EditBox,d=e.sys,p=e.Tween,f=e.Color,m=e.tween,b=e.Animation,y=e.UIOpacity,v=e.v3,C=e.instantiate,B=e.UITransform,w=e.Vec3,N=e.Component},function(e){T=e.default},function(e){S=e.default},function(e){I=e.default},function(e){R=e.default},function(e){P=e.default},function(e){L=e.BroadcastReceiver},function(e){D=e.Utils},function(e){E=e.default},function(e){x=e.default}],execute:function(){var z,A,k,G,M,_,F,J,V,O,W,U,j,X,H,Q,Y,Z,q,K,$,ee,te,ie,ne,oe,ae,re,le,se,ce,ue,he,ge,de,pe,fe,me,be,ye,ve,Ce,Be,we,Ne,Te,Se,Ie,Re,Pe,Le,De,Ee,xe,ze,Ae,ke,Ge,Me,_e,Fe,Je,Ve,Oe,We,Ue,je,Xe,He,Qe,Ye,Ze,qe,Ke,$e,et,tt,it,nt,ot,at,rt,lt,st;a._RF.push({},"3821dGRxXJL6bmPV0AtmlB0","Roulette.Play",void 0);var ct=r.ccclass,ut=r.property,ht=r.menu,gt=function(e){return e[e.NONE=0]="NONE",e[e.BETTING=1]="BETTING",e[e.RESULT=2]="RESULT",e}(gt||{});e("default",(z=ht("Roulette/Play"),A=ut(l),k=ut([s]),G=ut(c),M=ut(u),_=ut([T]),F=ut(T),J=ut(l),V=ut(l),O=ut(l),W=ut(u),U=ut(c),j=ut(s),X=ut(s),H=ut(s),Q=ut(l),Y=ut(l),Z=ut(l),q=ut(l),K=ut(l),$=ut(l),ee=ut(h),te=ut(h),ie=ut(l),ne=ut(l),oe=ut(l),ae=ut(l),re=ut(l),le=ut([s]),se=ut(g),ce=ut(l),ue=ut(l),he=ut(l),ge=ut(u),de=ut(u),pe=ut(u),fe=ut(u),me=ut(l),be=ut(u),ye=ut(l),ve=ut(l),ct(Ce=z(((st=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"roomDetail",we,o(t)),n(t,"listTableSpr",Ne,o(t)),n(t,"tableSpr",Te,o(t)),n(t,"lblToast",Se,o(t)),n(t,"players",Ie,o(t)),n(t,"mePlayer",Re,o(t)),n(t,"chipNodes",Pe,o(t)),t.amounts=[],t.amounts_1=[1,5,10,50,100],t.amounts_2=[1,2,10,20,100],t.minBet=0,t.sessionId=0,t.roomId=void 0,t.roomValue=void 0,t.currency=void 0,n(t,"chipContainer",Le,o(t)),n(t,"betPositions",De,o(t)),n(t,"countdownSecond",Ee,o(t)),n(t,"progressSprite",xe,o(t)),n(t,"progressSpriteGreen",ze,o(t)),n(t,"progressSpriteYellow",Ae,o(t)),n(t,"progressSpriteRed",ke,o(t)),n(t,"nodeDisableClearBet",Ge,o(t)),n(t,"nodeDisableRebet",Me,o(t)),n(t,"nodeDisableBetX2",_e,o(t)),n(t,"nodeDisableFinishBet",Fe,o(t)),t.amountSelected=0,t.betLogs=[],t.flagLog=-1,n(t,"boxChat",Je,o(t)),n(t,"boxSoiCau",Ve,o(t)),n(t,"popupRank",Oe,o(t)),n(t,"popupJackpot",We,o(t)),n(t,"popupContainer",Ue,o(t)),n(t,"listCauMini",je,o(t)),n(t,"itemCauMini",Xe,o(t)),n(t,"listCauNumber",He,o(t)),n(t,"itemCauNumber",Qe,o(t)),n(t,"listCauNumberSpr",Ye,o(t)),n(t,"editBoxChat",Ze,o(t)),n(t,"spinNode",qe,o(t)),n(t,"dealerNode",Ke,o(t)),n(t,"boxSettingContainer",$e,o(t)),n(t,"labelTotalBet",et,o(t)),t.totalBet=0,n(t,"lblJackpotFund",tt,o(t)),n(t,"lblJackpotRate",it,o(t)),n(t,"lblJackpotValue",nt,o(t)),n(t,"jackpotNode",ot,o(t)),n(t,"labelDealerNotify",at,o(t)),n(t,"guideBG",rt,o(t)),n(t,"guide",lt,o(t)),t.winGates=[],t.betAmountLogs=[],t.allBetAmountLogs=[],t.chatInGame=null,t}i(t,e);var a=t.prototype;return a.init=function(e,t){this.roomValue=e,this.currency=t},a.start=function(){var e=this;t.instance=this,S.instance.showLoading(!0),I.getInstance().send("EnterRoom",[this.roomValue,this.currency],(function(t){if(S.instance.showLoading(!1),t.c<0)return S.instance.alertDialog.showMsg(I.getErrMsg(t.c)),void e.node.destroy();e.joinRoom(t.r),null===d.localStorage.getItem("CA_RT_first_time")&&(d.localStorage.setItem("CA_RT_first_time","1"),e.showGuide())}));var i=R.instance.isTableVip;this.betPositions.children.forEach((function(e){var t=e.getChildByName("bg"),n=e.getChildByName("bgNormal");t&&(t.active=i),n&&(n.active=!i)})),this.flagLog=-1},a.onLoad=function(){var e=this;this.chipNodes.children.forEach((function(t,i){var n=t.getChildByName("chip"),o=t.getChildByName("text");n.on(l.EventType.TOUCH_END,(function(){if(n._isSelected)return p.stopAllByTarget(n),n.y=0,o.getComponent(u).color=f.WHITE,void(n._isSelected=!1);e.chipNodes.children.forEach((function(e){var t=e.getChildByName("chip"),i=e.getChildByName("text");p.stopAllByTarget(t),t.y=0,i.getComponent(u).color=f.WHITE,t._isSelected=!1})),o.getComponent(u).color=new f(252,255,0),n._isSelected=!0,e.amountSelected=e.amounts[i]*e.minBet,m(n).repeatForever(m().to(.3,{y:15}).to(.3,{y:0})).start()}))})),this.betPositions.children.forEach((function(t){var i=parseInt(t.name);isNaN(i)||t.on(l.EventType.TOUCH_END,(function(){0!=e.amountSelected&&e.actBet(e.amountSelected,i)}))})),I.getInstance().receive("roomData",(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):(e.sessionId=t.r.SessionId,e.roomDetail.getChildByName("RoomSession").getComponent(u).string=S.instance.getTextLang("txt_session")+": #"+e.sessionId,e.handleSession(t.r.Session),t.r.Players.forEach((function(i){var n=e.getAllPlayersById(i.AccountId);n&&e.scheduleOnce((function(){n.setCoin(i.Balance)}),t.r.Session.Phrase==gt.RESULT?12:0)})))})),I.getInstance().receive("joinRoom",(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):t.r.AccountId!=P.Login.AccountID+":"+P.Login.PortalID&&e.randomFreePlayer().set(t.r)})),I.getInstance().receiveArray("recieveMessage",(function(t,i,n){e.getAllPlayersById(t).showChatMsg(n)})),I.getInstance().receive("leaveRoom",(function(t){if(t.c<0)e.showToast(I.getErrMsg(t.c));else for(var i=0;i<t.r.length;i++){var n=t.r[i];n.id==P.Login.AccountID+":"+P.Login.PortalID?(n.reason<0&&S.instance.alertDialog.showMsg(S.instance.getTextLang("ca"+n.reason)),I.getInstance().dontReceive(),L.send(L.USER_UPDATE_COIN),e.node.destroy()):e.getPlayerById(n.id).leave()}})),I.getInstance().receive("registerLeavingRoom",(function(t){var i=e.getAllPlayersById(t.r.id);t.r.status?i.showRegisterQuit():i.hideRegisterQuit()})),I.getInstance().receive("rejectBetting",(function(t){var i=t.map((function(t){return e.getPlayerById(t).lblNickname.string})).join(", ");e.showToast("Reject betting from "+i)})),I.getInstance().receive("clearBetting",(function(t){var i=t.r.id,n=e.getPlayerById(i);e.chipContainer.children.filter((function(e){return e.name.includes(i)})).forEach((function(t){e.moveChipToPlayer(t,e.mePlayer)})),n.setCoin(t.r.balance)})),I.getInstance().receive("confirmBetting",(function(t){e.getAllPlayersById(t.r.id).showReady()})),I.getInstance().receive("playerOtherDevice",(function(t){e.showToast(I.getErrMsg(t))})),I.getInstance().receive("connectionChanged",(function(t){var i=e.getPlayerById(t.r.id);e.showToast(i.lblNickname.string+" "+(t.status?"connected":"disconnected")),t.status&&i.leave()})),I.getInstance().receive("playerBet",(function(t){if(t.c<0)e.showToast(I.getErrMsg(t.c));else{var i=e.getPlayerById(t.r.id);i.setCoin(t.r.balance),e.placeBet(i,t.r.amount,t.r.gate)}}))},a.getChipByAmount=function(e){var t=this;return this.chipNodes.children.find((function(i,n){return t.amounts[n]===e/t.minBet})).getChildByName("chip")},a.joinRoom=function(e){var t=this;this.roomId=e.Id,this.sessionId=e.SessionId,this.minBet=e.Value,this.roomDetail.getChildByName("RoomTable").getComponent(u).string=(0==e.Currency?S.instance.getTextLang("tb113"):S.instance.getTextLang("tb112"))+": "+e.Id,this.roomDetail.getChildByName("RoomValue").getComponent(u).string=S.instance.getTextLang("iap38")+": "+D.formatMoney(e.Value)+" "+(0==e.Currency?S.instance.getTextLang("txt_coin"):"Tipzo"),this.roomDetail.getChildByName("RoomSession").getComponent(u).string=S.instance.getTextLang("txt_session")+": #"+e.SessionId,this.tableSpr.spriteFrame=this.listTableSpr[e.Currency],[500,5e3,5e4].includes(this.minBet)?this.amounts=this.amounts_2:this.amounts=this.amounts_1,this.chipNodes.children.forEach((function(e,i){e.getChildByName("text").getComponent(u).string=D.formatMoney(t.amounts[i]*t.minBet,!0),0==i&&e.getChildByName("chip").emit(l.EventType.TOUCH_END)}));var i=e.Players;if(i&&i.length>0)for(var n=0;n<i.length;n++)i[n].AccountId!=P.Login.AccountID+":"+P.Login.PortalID?this.randomFreePlayer().set(i[n]):this.mePlayer.set(i[n]);this.updateStatistic(),this.checkJackpot(),e.Session&&this.handleSession(e.Session)},a.handleSession=function(e){var t=this;this.unscheduleAllCallbacks(),this.labelDealerNotify.string="ROULETTE";var i=this.dealerNode.getChildByName("NORMAL"),n=this.dealerNode.getChildByName("BET");if(n.active=!1,i.active=!1,e.Phrase==gt.NONE)return i.active=!0,void i.getComponent(b).play();if(e.Timeout&&this.updateTimeout(e.Timeout),e.Phrase==gt.BETTING){this.winGates=[],this.flagLog++,this.betLogs=this.betLogs.filter((function(e){return e.flag==t.flagLog-1})),this.betAmountLogs=[],this.allBetAmountLogs=[];var o=0==this.currency?S.instance.getTextLang("txt_coin"):"Tipzo",a=[S.instance.getTextLang("ca157"),S.instance.getTextLang("ca150")+" "+D.formatNumber(this.minBet)+" "+o+" "+S.instance.getTextLang("ca151"),S.instance.getTextLang("ca165")],r=0;this.schedule((function(){var e=t.labelDealerNotify.node.parent,i=e.getComponent(y)||e.addComponent(y);m(i).to(.5,{opacity:0}).call((function(){t.labelDealerNotify.string=a[r],++r>=a.length&&(r=0)})).to(.2,{opacity:255}).start()}),2.5),n.active=!0,n.getComponent(b).play(),this.jackpotNode.active=!1,this.spinNode.active=!1,this.chipContainer.removeAllChildren(),[this.mePlayer].concat(this.players).forEach((function(e){e.boxWin.active=!1,e.isWin=!1,e.stopJackpot(),e.hideReady(),e.hideRegisterQuit(),e.hideWinAnimation()})),this.nodeDisableClearBet.active=!0,this.nodeDisableRebet.active=0==this.betLogs.length,this.nodeDisableBetX2.active=0==this.betLogs.length,this.nodeDisableFinishBet.active=!0;var l=R.instance.isTableVip;this.totalBet=0,this.labelTotalBet.string=S.instance.getTextLang("ca164")+" "+this.totalBet,this.betPositions.children.forEach((function(e){var t=l?e.getChildByName("hover"):e.getChildByName("hoverNormal");t&&(t.active=!1,p.stopAllByTarget(t.getComponent(y)))})),this.spinNode.getComponent(x).resultNode.active=!1}if(e.Phrase==gt.RESULT){[this.mePlayer].concat(this.players).forEach((function(e){e.hideReady()})),this.labelDealerNotify.string=S.instance.getTextLang("me18"),i.active=!0,i.getComponent(b).play(),this.nodeDisableClearBet.active=!0,this.nodeDisableRebet.active=!0,this.nodeDisableBetX2.active=!0,this.nodeDisableFinishBet.active=!0,this.spinNode.active=!0,this.spinNode.getComponent(x).startSpin(e.Result.Value);var s=R.instance.isTableVip;this.scheduleOnce((function(){t.winGates=e.Result.WinGates,t.showResultPrize(e.Prizes),e.JackpotPrizes&&t.showResultJackpotPrize(e.JackpotPrizes),e.Result.WinGates.forEach((function(e){var i=t.betPositions.getChildByName(e.toString()),n=s?i.getChildByName("hover"):i.getChildByName("hoverNormal");n&&(n.active=!0,m(n.getComponent(y)).repeatForever(m().to(.5,{opacity:50}).to(.5,{opacity:255})).start())})),t.updateStatistic(),t.checkJackpot()}),10)}},a.updateTimeout=function(e){var t=this,i=e,n=0;this.schedule((function(){n+=.05;var e=Math.min(n/i,1);t.progressSprite.fillRange=e,t.progressSprite.spriteFrame=e<.5?t.progressSpriteGreen:e<.8?t.progressSpriteYellow:t.progressSpriteRed,t.progressSprite.node.setScale(v(-1,1,1))}),.05),this.countdownSecond.string=e<10?"0"+e:e+"",this.schedule((function(){e<0?t.unscheduleAllCallbacks():(t.countdownSecond.string=e<10?"0"+e:e+"",e--)}),1)},a.showResultPrize=function(e){var t=this,i=new Map;e.forEach((function(e){var n=t.getAllPlayersById(e.AccountId);i.has(n.id)||i.set(n.id,n)})),i.forEach((function(e){e.isWin=!0,e.boxWin.active=!0,e.boxWin.getChildByName("win").active=!0,e.boxWin.getChildByName("lose").active=!1,e.showWinAnimation(),t.chipContainer.children.filter((function(t){return t.name.includes(e.id)})).forEach((function(i){var n=parseInt(i.name.replace(e.id+"__",""));t.winGates.includes(n)?t.moveChipToPlayer(i,e):t.moveChipToDealer(i)}))}));var n=e.map((function(e){return e.AccountId}));[this.mePlayer].concat(this.players).filter((function(e){return""!==e.id&&!n.includes(e.id)})).forEach((function(e){var i=!1;t.chipContainer.children.filter((function(t){return t.name.includes(e.id)})).forEach((function(e){i=!0,t.moveChipToDealer(e)})),t.scheduleOnce((function(){i&&(e.boxWin.active=!0,e.boxWin.getChildByName("win").active=!1,e.boxWin.getChildByName("lose").active=!0)}),.5)}))},a.randomFreePlayer=function(){for(var e=0;e<this.players.length;e++)if(""==this.players[e].id)return this.players[e];return null},a.getPlayerById=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].id==e)return this.players[t];return null},a.getAllPlayersById=function(e){return[this.mePlayer].concat(this.players).find((function(t){return t.id===e}))},a.toggleMenu=function(){this.boxSettingContainer.active=!this.boxSettingContainer.active},a.clearBetting=function(){var e=this;this.nodeDisableClearBet.active||I.getInstance().send("ClearBetting",[],(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):(e.chipContainer.children.filter((function(t){return t.name.includes(e.mePlayer.id)})).forEach((function(t){e.moveChipToPlayer(t,e.mePlayer)})),e.nodeDisableClearBet.active=!0,e.nodeDisableRebet.active=!0,e.nodeDisableBetX2.active=!0,e.nodeDisableFinishBet.active=!0,e.betLogs=[],e.mePlayer.setCoin(t.r.balance))}))},a.finishBetting=function(){var e=this;this.nodeDisableFinishBet.active||I.getInstance().send("FinishBetting",[],(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):e.mePlayer.showReady()}))},a.x2Betting=function(){var e=this;this.nodeDisableBetX2.active||(this.actBetFromBetLogs(),setTimeout((function(){e.actBetFromBetLogs()}),500))},a.reLastBet=function(){this.nodeDisableRebet.active||this.actBetFromBetLogs()},a.actBetFromBetLogs=function(){var e=this;this.betLogs.forEach((function(t){t.flag==e.flagLog-1&&e.actBet(t.amount,t.gate)}))},a.actBet=function(e,t){var i=this;I.getInstance().send("Bet",[e,t],(function(e){e.c<0?i.showToast(I.getErrMsg(e.c)):(i.nodeDisableClearBet.active=!1,i.nodeDisableRebet.active=!0,i.nodeDisableBetX2.active=!0,i.nodeDisableFinishBet.active=!1,i.placeBet(i.mePlayer,e.r.amount,e.r.gate),i.mePlayer.setCoin(e.r.balance),i.betLogs.push({amount:e.r.amount,gate:e.r.gate,flag:i.flagLog}))}))},a.updateStatistic=function(){var e=this;this.listCauMini.removeAllChildren(),I.getInstance().send("GetGameHistory",[this.roomId],(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):e.drawCau(t.r)}))},a.sendMessage=function(){this.hiddenBoxChat();var e=this.editBoxChat.string;""!=e&&I.getInstance().send("SendMessage",[e],(function(e){}))},a.sendEmotion=function(e,t){this.hiddenBoxChat(),I.getInstance().send("SendMessage",[t],(function(e){}))},a.closePlay=function(){var e=this;I.getInstance().send("ExitRoom",[],(function(t){if(0==t.c)return I.getInstance().dontReceive(),L.send(L.USER_UPDATE_COIN),void e.node.destroy();t.r.status?(e.mePlayer.showRegisterQuit(),e.showToast(S.instance.getTextLang("me8"))):(e.mePlayer.hideRegisterQuit(),e.showToast(S.instance.getTextLang("me9")))}))},a.placeBet=function(e,t,i){var n=this,o=C(this.getChipByAmount(t));o.setScale(.5,.5,.5),this.chipContainer.addChild(o);var a=e.avatarNode.getComponent(B).convertToWorldSpaceAR(w.ZERO),r=this.betPositions.getChildByName(i.toString()).getComponent(B).convertToWorldSpaceAR(w.ZERO),l=this.node.getComponent(B).convertToNodeSpaceAR(new w(a.x,a.y,0)),s=this.node.getComponent(B).convertToNodeSpaceAR(new w(r.x,r.y,0)),c=this.chipContainer.children.filter((function(e){return w.distance(e.getPosition(),s)<=10}));if(c.length>0){var u=c.length%5*10,h=-10*Math.floor(c.length/5);s.x+=u,s.y+=h}o.position=l,o.name=e.id+"__"+i,m(o).to(.5,{position:s},{easing:"sineOut"}).call((function(){if(n.totalBet+=t,n.labelTotalBet.string=S.instance.getTextLang("ca164")+" "+D.formatNumber(n.totalBet),e.id===n.mePlayer.id){var o=n.betAmountLogs.find((function(e){return e.gate===i}));o?o.amount+=t:n.betAmountLogs.push({gate:i,amount:t})}var a=n.allBetAmountLogs.find((function(e){return e.gate===i}));a?a.amount+=t:n.allBetAmountLogs.push({gate:i,amount:t})})).start()},a.showToast=function(e){var t=this;this.lblToast.string=e,this.lblToast.node.active=!0,setTimeout((function(){t.lblToast.node&&(t.lblToast.node.active=!1)}),2e3)},a.showBoxSoiCau=function(){this.boxSoiCau.active=!0},a.hiddenBoxSoiCau=function(){this.boxSoiCau.active=!1},a.showBoxChat=function(){var e=this;S.instance.inactivityTimer=0,null==this.chatInGame?E.loadPrefabPopup("prefabs/ChatInGame",(function(t){e.chatInGame=C(t).getComponent("ChatInGame"),e.node.addChild(e.chatInGame.node),e.chatInGame.show(P.InGameIds.Roullete)})):this.chatInGame.show(P.InGameIds.Roullete)},a.hiddenBoxChat=function(){this.boxChat.active=!1},a.actShowPopupRank=function(){var e=C(this.popupRank);this.popupContainer.addChild(e),e.getComponent("Casino.PopupRank").showDetail(this.currency,P.InGameIds.Roullete)},a.actShowPopupJackpot=function(){var e=C(this.popupJackpot);this.popupContainer.addChild(e),e.getComponent("Roulette.PopupJackpot").show()},a.drawCau=function(e){var t=this;this.listCauMini.removeAllChildren(),this.listCauNumber.removeAllChildren();var i=e.slice(-10);i.forEach((function(e,n){var o,a=C(t.itemCauMini),r=C(t.itemCauNumber);o=0==e?0:[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(e)?1:2;var l=t.listCauNumberSpr[o];a.getComponent(c).spriteFrame=l,r.getComponent(c).spriteFrame=l,r.getComponentInChildren(u).string=e<10?"0"+e:e.toString(),t.listCauMini.addChild(a),t.listCauNumber.addChild(r),n===i.length-1&&m(r).repeatForever(m().to(.5,{position:v(0,10,0)}).to(.5,{position:v(0,0,0)})).start()}))},a.checkJackpot=function(){var e=this;I.getInstance().send("GetJackpot",[this.currency,this.roomValue],(function(t){if(t.c<0)e.showToast(I.getErrMsg(t.c));else{var i=t.r;e.lblJackpotFund.string=i.jackpotFund.toLocaleString("vi-VN"),e.lblJackpotRate.string=i.rate/10+"%",e.lblJackpotValue.string=i.jackpotValue.toLocaleString("vi-VN")}}))},a.showResultJackpotPrize=function(e){var t=this;this.jackpotNode.active=!0,e.Details.forEach((function(e){var i;null==(i=[t.mePlayer].concat(t.players).find((function(t){return t.id.includes(e.AccountID)})))||i.activeJackpot()}))},a.moveChipToPlayer=function(e,t,i){void 0===i&&(i=!1);var n=m(e);i&&(n=n.to(.5,{position:this.dealerNode.position})),n.to(.5,{position:t.node.position}).call((function(){return e.destroy()})).start()},a.moveChipToDealer=function(e){m(e).to(.5,{position:this.dealerNode.position}).call((function(){return e.destroy()})).start()},a.showGuide=function(){var e=this;this.guideBG.children[0].children.forEach((function(t){null!=t.getChildByName("hover")&&null!=t.getChildByName("hoverNormal")&&(t.getChildByName("hover").active=1==e.currency,t.getChildByName("hoverNormal").active=0==e.currency)})),this.guideBG.active=!0,this.guide.active=!0},a.hideGuide=function(){this.guideBG.active=!1,this.guide.active=!1},t}(N)).instance=null,we=t((Be=st).prototype,"roomDetail",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(Be.prototype,"listTableSpr",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=t(Be.prototype,"tableSpr",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(Be.prototype,"lblToast",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(Be.prototype,"players",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=t(Be.prototype,"mePlayer",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(Be.prototype,"chipNodes",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(Be.prototype,"chipContainer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(Be.prototype,"betPositions",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(Be.prototype,"countdownSecond",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(Be.prototype,"progressSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(Be.prototype,"progressSpriteGreen",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(Be.prototype,"progressSpriteYellow",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(Be.prototype,"progressSpriteRed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(Be.prototype,"nodeDisableClearBet",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(Be.prototype,"nodeDisableRebet",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(Be.prototype,"nodeDisableBetX2",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Be.prototype,"nodeDisableFinishBet",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Be.prototype,"boxChat",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Be.prototype,"boxSoiCau",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Be.prototype,"popupRank",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Be.prototype,"popupJackpot",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(Be.prototype,"popupContainer",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(Be.prototype,"listCauMini",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(Be.prototype,"itemCauMini",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(Be.prototype,"listCauNumber",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(Be.prototype,"itemCauNumber",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(Be.prototype,"listCauNumberSpr",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ze=t(Be.prototype,"editBoxChat",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(Be.prototype,"spinNode",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(Be.prototype,"dealerNode",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=t(Be.prototype,"boxSettingContainer",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(Be.prototype,"labelTotalBet",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(Be.prototype,"lblJackpotFund",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(Be.prototype,"lblJackpotRate",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Be.prototype,"lblJackpotValue",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=t(Be.prototype,"jackpotNode",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(Be.prototype,"labelDealerNotify",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(Be.prototype,"guideBG",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=t(Be.prototype,"guide",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=Be))||Ce)||Ce));a._RF.pop()}}}));

System.register("chunks:///_virtual/Roulette.PopupJackpot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts","./RouletteSignalRClient.ts","./Roulette.Play.ts","./App.ts","./Utils.ts"],(function(t){var e,n,i,a,o,r,l,c,u,s,p,m,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Node,c=t.instantiate,u=t.Label},function(t){s=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default},function(t){f=t.Utils}],execute:function(){var d,h,y,C,b,v,N;o._RF.push({},"a2302CMiIxBjI5Q8xvZbiKl","Roulette.PopupJackpot",void 0);var B=r.ccclass,I=r.property,R=r.menu;t("default",(d=R("Roulette/PopupJackpot"),h=I(l),y=I(l),B(C=d((v=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"listItem",v,a(e)),i(e,"itemTemplate",N,a(e)),e}return n(e,t),e.prototype.show=function(){var e=this;this.listItem.removeAllChildren(),p.getInstance().send("GetJackpotWinner",[m.instance.currency],(function(t){t.c<0?g.instance.alertDialog.showMsg(g.instance.getTextLang("ca"+t.c)):0!=t.r.length&&t.r.forEach((function(t,n){var i=c(e.itemTemplate);i.getChildByName("bg1").active=n%2==0,i.getChildByName("bg2").active=n%2!=0;var a=i.getChildByName("content");a.getChildByName("TIME").getComponent(u).string=f.formatDatetime(t.createdTime,"dd/MM/yyyy HH:mm:ss"),a.getChildByName("ACCOUNT").getComponent(u).string=t.nickname,a.getChildByName("BET").getComponent(u).string=f.formatNumber(t.parValue),a.getChildByName("PRIZE").getComponent(u).string=f.formatNumber(t.prizeValue),e.listItem.addChild(i)}))})),t.prototype.show.call(this)},e}(s)).prototype,"listItem",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(b.prototype,"itemTemplate",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=b))||C)||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/Roulette.Spin.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,l,a,o,s,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,o=t.Node,s=t.tween,u=t.v3,c=t.Label,p=t.Component}],execute:function(){var g,b,f,h,v,d,y,m,R;l._RF.push({},"5f3358/JcxFQrqeXRtMymXa","Roulette.Spin",void 0);var S=a.ccclass,N=a.property;t("default",(g=S("RouletteSpin"),b=N(o),f=N(o),h=N(o),g((y=e((d=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,n(e,"ballPivot",y,r(e)),n(e,"ball",m,r(e)),n(e,"resultNode",R,r(e)),e.isSpinning=!1,e.lastResult=0,e.spinDuration=4,e.orbitDuration=4,e}i(e,t);var l=e.prototype;return l.startSpin=function(t){var e=this;if(!this.isSpinning){this.isSpinning=!0,this.ball.active=!1,this.resultNode.active=!1;var i=1800+this.getRandomTargetAngle();s(this.node).by(this.spinDuration,{eulerAngles:u(0,0,-i)},{easing:"cubicOut"}).call((function(){e.isSpinning=!1,e.startBallOrbit(t)})).start()}},l.getRandomTargetAngle=function(){return 360/37*Math.floor(37*Math.random())},l.getTargetAngle=function(t,e){var i=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26],n=i.length,r=i.indexOf(e),l=i.indexOf(t);if(-1===r||-1===l)return 0;var a=l-r;return a<0&&(a+=n),360/n*a},l.startBallOrbit=function(t){var e=this;if(this.ballPivot&&this.ball){this.ball.active=!0;var i=1080+this.getTargetAngle(t,this.lastResult);s(this.ballPivot).by(this.orbitDuration,{eulerAngles:u(0,0,-i)},{easing:"cubicOut"}).call((function(){e.lastResult=t,e.resultNode.active=!0;var i=e.resultNode.getComponentInChildren(c);i&&(i.string=t.toString());var n=e.resultNode.getChildByName("jackpot");n&&(n.active=0===t)})).start()}},e}(p)).prototype,"ballPivot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(d.prototype,"ball",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(d.prototype,"resultNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Roulette', 'chunks:///_virtual/Roulette'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});