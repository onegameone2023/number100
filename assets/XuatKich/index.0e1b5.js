System.register("chunks:///_virtual/Airplane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Play.ts","./XuatKich.SyncTimeControl.ts"],(function(e){var t,i,n,o,r,s,a,l,c,u,h,p,d,f,m,g,y,v,S,T,b,E,P,A,D,w,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,a=e._decorator,l=e.Node,c=e.AudioClip,u=e.AudioSource,h=e.instantiate,p=e.Animation,d=e.Label,f=e.tween,m=e.v3,g=e.easing,y=e.UITransform,v=e.Vec3,S=e.v2,T=e.math,b=e.Sprite,E=e.Tween,P=e.Color,A=e.Component},function(e){D=e.Utils},function(e){w=e.default},function(e){C=e.default}],execute:function(){var M,z,_,x,B,I,k,R,O,N,F,L,Y,U,j,H,X,G,K,V,W,Z,q,J;s._RF.push({},"65c0bYcnApEsI7OjX9ukGAl","Airplane",void 0);var Q=a.ccclass,$=a.property,ee=a.menu,te=e("PathElement",function(){function e(e,t,i,n){this.startPath=void 0,this.endPath=void 0,this.radius=void 0,this.duration=void 0,this.controlPoint=void 0,this.startPath=e.clone(),this.endPath=t.clone(),this.radius=i,this.duration=n;var o=e.clone().lerp(t,.5),r=t.clone().subtract(e).rotate(Math.PI/2).normalize().multiplyScalar(i);this.controlPoint=o.add(r)}return e.prototype.getCurrentPosition=function(e){var t=Math.min(Math.max(e/this.duration,0),1),i=1-t,n=this.startPath.clone().multiplyScalar(i*i),o=this.controlPoint.clone().multiplyScalar(2*i*t),r=this.endPath.clone().multiplyScalar(t*t);return n.add(o).add(r)},e}());e("default",(M=ee("Sortie/Airplane"),z=$(l),_=$(l),x=$([c]),B=$(u),I=$(l),k=$(l),R=$(l),O=$(l),N=$(l),F=$(l),Q(L=M(((J=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"anim",U,o(t)),n(t,"target",j,o(t)),n(t,"engineSounds",H,o(t)),n(t,"engineAudioSource",X,o(t)),n(t,"prize",G,o(t)),n(t,"coinEffect",K,o(t)),n(t,"effectDieSmall",V,o(t)),n(t,"effectDieBoss",W,o(t)),n(t,"effectDieSpecial",Z,o(t)),n(t,"effectMagnetic",q,o(t)),t.id=void 0,t.isDie=!1,t.radarAffected=!1,t.type=-1,t.pathElements=[],t.currentMoveTime=0,t.startServerTime=0,t.syncedElapsedTime=0,t.localElapsedTime=0,t.syncTimer=0,t.BOSS_TYPE=1001,t}i(t,e);var s=t.prototype;return s.die=function(e,t){if(!this.isDie)if(this.isDie=!0,this.stopEngineSound(),e){var i;i=h(this.effectDieBoss),this.type!=this.BOSS_TYPE&&i.setScale(.25,.25,.25),i.parent=this.node.parent,i.setPosition(this.node.position),i.active=!0;var n=i.getComponent(p);n.play(),n.once(p.EventType.FINISHED,(function(){i.destroy()}));var o=h(this.prize);o.setPosition(this.node.position),this.node.parent.addChild(o),o.active=!0,o.getComponent(d).string=D.formatNumber(t),f(o).to(.5,{position:m(o.position.x,o.position.y+100,0)},{easing:g.backOut}).call((function(){o.destroy()})).start();var r=h(this.coinEffect);r.setPosition(this.node.position),this.node.parent.addChild(r),r.active=!0,r.children.forEach((function(t,i){setTimeout((function(){var n=e.avatarNode.getComponent(y).convertToWorldSpaceAR(v.ZERO),o=t.parent.getComponent(y).convertToNodeSpaceAR(n);f(t).to(1,{position:m(o.x,o.y,0)}).call((function(){t.destroy(),i===r.children.length-1&&r.destroy()})).start()}),50*i)})),this.node.destroy()}else this.node.destroy()},s.onLoad=function(){null==t._instance&&(t._instance=this)},s.onDestroy=function(){t._instance===this&&(t._instance=null),this.stopEngineSound()},s.setData=function(e){this.id=e.i,this.startServerTime=new Date(e.ct).getTime(),this.isDie=!1,this.node.active=!0,this.type=e.t,this.type==t.instance.BOSS_TYPE&&w.instance.showBossComing(),this.anim.removeAllChildren(),h(w.instance.getAirplaneAnimByType(this.type)).parent=this.anim,this.anim.active=!1,this.pathElements=e.p.p.map((function(t,i){if(i<e.p.p.length-1)return new te(S(t.x,t.y),S(e.p.p[i+1].x,e.p.p[i+1].y),e.p.r[i],e.p.d[i])})).filter((function(e){return void 0!==e})),this.currentMoveTime=0,this.startEngineSound(),this.startServerTime=new Date(e.ct).getTime();var i=C.instance.getCurrentServerTime();this.syncedElapsedTime=Math.max((i-this.startServerTime)/1e3,0),this.localElapsedTime=this.syncedElapsedTime,this.syncTimer=0},s.updateRealTime=function(e){if(!(!this.node.active||this.isDie||this.pathElements.length<1||this.radarAffected)&&!(C.instance.getCurrentServerTime()<this.startServerTime)){if(this.anim.active=!0,this.syncTimer+=e,this.localElapsedTime+=e,this.syncTimer>=5){this.syncTimer=0;var t=C.instance.getCurrentServerTime();this.syncedElapsedTime=Math.max((t-this.startServerTime)/1e3,0),this.localElapsedTime=this.syncedElapsedTime}var i=this.pathElements.reduce((function(e,t){return e+t.duration}),0);this.currentMoveTime=this.localElapsedTime%i;for(var n=0,o=null,r=0;r<this.pathElements.length;r++){if(this.currentMoveTime<n+this.pathElements[r].duration){o=this.pathElements[r];break}n+=this.pathElements[r].duration}if(o){var s=this.currentMoveTime-n,a=o.getCurrentPosition(s);this.node.setPosition(a.x,a.y,0);var l=o.endPath.clone().subtract(o.startPath),c=Math.atan2(l.y,l.x),u=1,h=1;l.x<0&&(u=-1,c+=Math.PI);var p=this.node.position.x,d=this.node.position.y,f=w.instance.mePlayer.serverPos;switch(f){case 1:this.node.setPosition(p,d);break;case 2:this.node.setPosition(-p,d),u=-u,c=-c;break;case 3:this.node.setPosition(-p,-d),h=-h,c+=Math.PI;break;case 4:this.node.setPosition(p,-d),h=-h,u=-u,c=-(c+Math.PI)}101!=this.type&&102!=this.type||3!=f&&4!=f||(c=-c),this.node.setRotationFromEuler(0,0,T.toDegree(c)),this.node.setScale(u,h,1)}}},s.hurt=function(){if(0!==this.anim.children.length&&0!==this.anim.children[0].children.length){var e=this.anim.children[0].children[0].getComponent(b);e&&(E.stopAllByTarget(e),f(e).to(.05,{color:new P(255,54,54)}).delay(.1).to(.05,{color:new P(255,255,255)}).start())}},s.startEngineSound=function(){if(this.engineAudioSource&&this.engineSounds.length>0){this.engineAudioSource.playing&&this.engineAudioSource.stop();var e=this.type%this.engineSounds.length;this.engineAudioSource.clip=this.engineSounds[e],this.engineAudioSource.loop=!0,this.engineAudioSource.play()}},s.stopEngineSound=function(){this.engineAudioSource&&this.engineAudioSource.playing&&this.engineAudioSource.stop()},r(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(A))._instance=null,U=t((Y=J).prototype,"anim",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(Y.prototype,"target",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(Y.prototype,"engineSounds",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=t(Y.prototype,"engineAudioSource",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(Y.prototype,"prize",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(Y.prototype,"coinEffect",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(Y.prototype,"effectDieSmall",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(Y.prototype,"effectDieBoss",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Y.prototype,"effectDieSpecial",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(Y.prototype,"effectMagnetic",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=Y))||L)||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/BgEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,r,s,o,a,c,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,l=t.UITransform,u=t.Component}],execute:function(){var h,f,p,g,d,b;o._RF.push({},"a16act9hItAlZ7mo9BbSW7Q","BgEffect",void 0);var m=a.ccclass,v=a.property;t("default",(h=v(c),m(((b=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,n(i,"bg",g,r(i)),n(i,"speed",d,r(i)),i.direction=-1,i.limitLeft=void 0,i.limitRight=void 0,i.startX=void 0,i}e(i,t);var o=i.prototype;return o.onLoad=function(){null==i._instance&&(i._instance=this),this.startX=this.bg.x;var t=this.bg.getComponent(l).width*this.bg.scale.x;this.limitLeft=this.startX-t/5,this.limitRight=this.startX},o.update=function(t){var i=this.speed*t*this.direction;this.bg.x+=i,this.bg.x<=this.limitLeft&&(this.direction=1),this.bg.x>=this.limitRight&&(this.direction=-1)},o.resetBackground=function(){this.bg.x=this.startX},s(i,null,[{key:"instance",get:function(){return i._instance}}]),i}(u))._instance=null,g=i((p=b).prototype,"bg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(p.prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),f=p))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BlinkNodeBulletXK.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,o,r,a,l,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.UIOpacity,c=t.tween,u=t.Component}],execute:function(){var p,s,y,f,h,d,b,m,O;r._RF.push({},"f4b13uiHgVLkLIKxft3DpmN","BlinkNodeBulletXK",void 0);var g=a.ccclass,k=a.property;t("BlinkNode",(p=g("BlinkNodeBulletXK"),s=k({tooltip:"Time Delay"}),y=k({tooltip:"Time Done"}),f=k({tooltip:"Opacity lowest"}),p((b=i((d=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"delayStart",b,o(i)),n(i,"blinkDuration",m,o(i)),n(i,"minOpacity",O,o(i)),i._uiOpacity=null,i}e(i,t);var r=i.prototype;return r.start=function(){var t=this;this._uiOpacity=this.node.getComponent(l),this._uiOpacity||(this._uiOpacity=this.node.addComponent(l)),this.scheduleOnce((function(){t.startBlinking()}),this.delayStart)},r.startBlinking=function(){var t=this.blinkDuration/2;c(this._uiOpacity).repeatForever(c().to(t,{opacity:this.minOpacity}).to(t,{opacity:255})).start()},r.onDestroy=function(){c(this._uiOpacity).stop()},i}(u)).prototype,"delayStart",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=i(d.prototype,"blinkDuration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),O=i(d.prototype,"minOpacity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),h=d))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Play.ts","./Airplane.ts","./SortiePhotonClient.ts","./PhotonClient.ts","./Utils.ts"],(function(t){var i,e,o,n,s,r,l,a,h,p,u,c,d,g,v,f,x,y,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.Node,a=t.Size,h=t.Collider2D,p=t.Contact2DType,u=t.Vec3,c=t.math,d=t.Animation,g=t.Component},function(t){v=t.default},function(t){f=t.default},function(t){x=t.SortiePhotonClient},function(t){y=t.PhotonClient},function(t){C=t.Utils}],execute:function(){var E,b,m,P,S,N,I,D;s._RF.push({},"724cde2mx9CKJctAZQdxDMb","Bullet",void 0);var w=r.ccclass,z=r.property,B=r.menu;t("default",(E=w("Bullet"),b=B("Sortie/Bullet"),m=z(l),P=z(l),E(S=b((I=i((N=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(i,"bullet",I,n(i)),o(i,"exploreNode",D,n(i)),i.gunId=-1,i.positionID=-1,i.targetAirplaneId=-1,i.worldSize=new a(1920,1080),i.exploreDuration=.8,i.vX=0,i.vY=0,i.collisionCount=2,i.isExplored=!1,i.isExploring=!1,i.curExplore=0,i.play=void 0,i}e(i,t);var s=i.prototype;return s.onLoad=function(){this.play=v.instance},s.onEnable=function(){var t=this.getComponent(h);t&&t.on(p.BEGIN_CONTACT,this.onBeginContact,this)},s.onDisable=function(){var t=this.getComponent(h);t&&t.off(p.BEGIN_CONTACT,this.onBeginContact,this)},s.onBeginContact=function(t,i,e){var o;if(!this.isExploring&&!this.isExplored){var n=null==(o=i.node.parent)||null==(o=o.parent)||null==(o=o.parent)?void 0:o.getComponent(f);if(n&&n.node.active&&(!this.play.isTargetAirplane||this.play.targetAirplane===n)&&(101!=n.type&&102!=n.type||this.exploreNode.setPosition(0,this.exploreNode.position.y),this.explore(),n.hurt(),this.positionID===this.play.mePlayer.serverPos)){var s={ft:n.id,si:this.play.shootingId,gi:this.play.mePlayer.gunId},r=[];r.push(x.EParameterCodes.OperationSubCode,x.EOperationSubCodes.PlayerShotFighter),r.push(x.EParameterCodes.ShotFighterMessage,JSON.stringify(s)),x.getInstance().sendOperation(y.EOperationCodes.Game,r,!0)}}},s.run=function(){var t=C.degreesToVec2(this.node.angle);this.vX=3e3*t.x,this.vY=3e3*t.y,this.collisionCount=2,this.isExplored=!1,this.isExploring=!1,this.node.active=!0,this.bullet.active=!0,this.exploreNode.active=!0;this.exploreNode.setPosition({1:20,2:20,3:30,4:25,5:35,6:35,7:40,8:40,9:40,10:45}[this.gunId]||0,this.exploreNode.position.y)},s.updateRealTime=function(t){if(!this.isExplored){if(this.isExploring)return this.curExplore-=t,void(this.curExplore<=0&&(this.isExplored=!0,this.node.active=!1));var i=this.node.position,e=new u(i.x+this.vX*t,i.y+this.vY*t,0),o=!1;return Math.abs(e.x)>this.worldSize.width/2?(this.vX*=-1,e.x=Math.sign(e.x)*this.worldSize.width/2,o=!0):Math.abs(e.y)>this.worldSize.height/2&&(this.vY*=-1,e.y=Math.sign(e.y)*this.worldSize.height/2,o=!0),this.node.setPosition(e),o&&(this.node.angle=c.toDegree(Math.atan2(this.vY,this.vX)),this.collisionCount--),this.collisionCount<0?(this.isExplored=!0,void(this.node.active=!1)):void 0}},s.explore=function(){var t=this;if(!this.isExploring){this.isExploring=!0,this.curExplore=this.exploreDuration,this.bullet.active=!1;var i=this.exploreNode.getComponent(d);i.play("Ex"+this.gunId),i.once(d.EventType.FINISHED,(function(){t.node.destroy()}))}},i}(g)).prototype,"bullet",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(N.prototype,"exploreNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=N))||S)||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonSound.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,i,e,u,r,c,a,l,s;return{setters:[function(o){t=o.applyDecoratedDescriptor,n=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){u=o.cclegacy,r=o._decorator,c=o.AudioClip,a=o.AudioSource,l=o.Button,s=o.Component}],execute:function(){var d,p,h,S,f;u._RF.push({},"9d2dfLIFNRDG6T28rYgky5H","ButtonSound",void 0);var y=r.ccclass,C=r.property;o("default",(d=y("ButtonSound"),p=C(c),d((f=t((S=function(o){function t(){for(var t,n=arguments.length,u=new Array(n),r=0;r<n;r++)u[r]=arguments[r];return t=o.call.apply(o,[this].concat(u))||this,i(t,"clickSound",f,e(t)),t.audioSource=null,t}n(t,o);var u=t.prototype;return u.onLoad=function(){this.audioSource=this.getComponent(a),this.audioSource||(this.audioSource=this.node.addComponent(a));var o=this.getComponent(l);o&&o.node.on(l.EventType.CLICK,this.playClickSound,this)},u.playClickSound=function(){this.clickSound&&this.audioSource&&(this.audioSource.clip=this.clickSound,this.audioSource.play())},u.onDestroy=function(){var o=this.getComponent(l);o&&o.node.off(l.EventType.CLICK,this.playClickSound,this)},t}(s)).prototype,"clickSound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S))||h));u._RF.pop()}}}));

System.register("chunks:///_virtual/Lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Play.ts","./SortiePhotonClient.ts","./PhotonClient.ts","./App.ts","./Utils.ts","./Config.ts","./PanelMenu2.ts"],(function(e){var t,n,i,o,a,r,u,l,c,s,p,f,g,d,b,h,S,m,C,y,O,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,u=e.Node,l=e.Label,c=e.AudioClip,s=e.Prefab,p=e.log,f=e.sys,g=e.Tween,d=e.instantiate,b=e.Component},function(e){h=e.default},function(e){S=e.SortiePhotonClient},function(e){m=e.PhotonClient},function(e){C=e.default},function(e){y=e.Utils},function(e){O=e.default},function(e){P=e.default}],execute:function(){var _,v,w,I,E,J,M,N,G,z,L,K,X,B,k,x,A,R,H,U,D,T,j,F,Q,Y,q,V,W,Z,$,ee,te,ne,ie,oe,ae,re;a._RF.push({},"a4186Y5BwNGUrQJJk327a9c","Lobby",void 0);var ue=r.ccclass,le=r.property,ce=r.menu;e("default",(_=ce("Sortie/Lobby"),v=le(u),w=le(l),I=le(l),E=le(l),J=le(c),M=le(c),N=le(u),G=le(s),z=le(s),L=le(s),K=le(s),X=le(u),B=le(u),k=le(u),x=le(u),A=le(u),R=le(u),ue(H=_(((re=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"playNode",D,o(t)),i(t,"lblGoldBalance",T,o(t)),i(t,"lblGemBalance",j,o(t)),i(t,"currentJackpot",F,o(t)),i(t,"bgMusic1",Q,o(t)),i(t,"bgMusic2",Y,o(t)),i(t,"popupContainer",q,o(t)),i(t,"exchangeCoinPrefab",V,o(t)),i(t,"popupGuidePrefab",W,o(t)),i(t,"popupHistoryPrefab",Z,o(t)),i(t,"popupJackpotPrefab",$,o(t)),i(t,"popupSetting",ee,o(t)),i(t,"iconClosePopupSetting",te,o(t)),i(t,"iconOffSoundMusic",ne,o(t)),i(t,"iconOnSoundMusic",ie,o(t)),i(t,"iconOffSoundEffect",oe,o(t)),i(t,"iconOnSoundEffect",ae,o(t)),t.play=null,t.photonClient=null,t.currentMusicIndex=0,t.listGunConfig=[],t.clientParameterConfig=null,t.currentUserAccumulate=0,t}n(t,e);var a=t.prototype;return a.start=function(){var e=this;this.photonClient=S.getInstance(),this.photonClient.connect(),this.photonClient.addResponseListener(m.EOperationCodes.Account,(function(t){if(t.errCode<0)C.instance.showErrLoading(m.getErrMsg(t.errCode));else{p("Logged in successfully"),C.instance.showLoading(!1),e.photonClient.isLoggedIn=!0,e.listGunConfig=JSON.parse(t.vals[S.EParameterCodes.GunConfigsResponse]),e.clientParameterConfig=JSON.parse(t.vals[S.EParameterCodes.ClientParameterConfig]);var n=JSON.parse(t.vals[S.EParameterCodes.LoginResponse]);e.currentUserAccumulate=n.ua;var i=n.go,o=n.ge;e.lblGoldBalance.string=y.formatNumber(i),e.lblGemBalance.string=y.formatNumber(o);var a=[];a.push(S.EParameterCodes.OperationSubCode,S.EOperationSubCodes.GetCurrentJackpot),a.push(S.EParameterCodes.CurrencyId,O.Login.CurrencyID),e.photonClient.sendOperation(m.EOperationCodes.Game,a,!0),e.playMusic()}})),this.photonClient.addResponseListener(m.EOperationCodes.Game,(function(e){e.errCode<0||Object.keys(e.vals).forEach((function(t){parseInt(t),e.vals[t];S.EParameterCodes.CurrentJackpot}))})),this.updateSoundIcons()},a.updateBalance=function(e,t){this.lblGemBalance.string=y.formatNumber(t),this.lblGoldBalance.string=y.formatNumber(e)},a.playMusic=function(){var e=parseInt(f.localStorage.getItem("XK_visit_count")||"0",10);e++,f.localStorage.setItem("XK_visit_count",e.toString()),this.currentMusicIndex=e%2;0===this.currentMusicIndex?this.bgMusic1:this.bgMusic2,JSON.parse(f.localStorage.getItem("XK_is_playing"));this.updateSoundIcons()},a.onLoad=function(){t.instance=this,this.play=this.playNode.getComponent(h),this.play.node.active=!1,this.lblGoldBalance.string="0",this.lblGemBalance.string="0",null===f.localStorage.getItem("XK_is_playing")&&f.localStorage.setItem("XK_is_playing",JSON.stringify(!0)),null===f.localStorage.getItem("XK_is_effect_on")&&f.localStorage.setItem("XK_is_effect_on",JSON.stringify(!0))},a.show=function(e){this.node.active=e,e&&this.playMusic()},a.actBack=function(){g.stopAllByTarget(this.node),C.instance.gotoLobby(),S.getInstance().peer.disconnect()},a.actPlay=function(){if(this.photonClient&&this.photonClient.isLoggedIn){var e=[];e.push(S.EParameterCodes.OperationSubCode,S.EOperationSubCodes.JoinRoom),this.photonClient.sendOperation(m.EOperationCodes.Game,e,!0),this.playNode.active=!0,this.show(!1),P.instance.hide(),P.instance.updateSoundEffect(),h.instance.updateSoundMusic()}},a.actExchangeCoin=function(){var e=d(this.exchangeCoinPrefab);this.popupContainer.addChild(e),e.getComponent("PopupExchangeCoin").show()},a.actShowPopupGuide=function(){var e=d(this.popupGuidePrefab);this.popupContainer.addChild(e),e.getComponent("PopupGuideXK").show()},a.actShowPopupHistory=function(){var e=d(this.popupHistoryPrefab);this.popupContainer.addChild(e),e.getComponent("PopupHistory").show()},a.actShowPopupTopJackpot=function(){var e=d(this.popupJackpotPrefab);this.popupContainer.addChild(e),e.getComponent("PopupJackpot").show()},a.actShowPopupSetting=function(){this.popupSetting.active=!0},a.actClosePopupSetting=function(){this.popupSetting.active=!1},a.turnOnSoundMusic=function(){f.localStorage.setItem("XK_is_playing",JSON.stringify(!0)),this.playMusic(),this.updateSoundIcons()},a.turnOffSoundMusic=function(){f.localStorage.setItem("XK_is_playing",JSON.stringify(!1)),this.updateSoundIcons()},a.turnOnSoundEffect=function(){JSON.parse(f.localStorage.getItem("XK_is_effect_on")||"false")||f.localStorage.setItem("XK_is_effect_on",JSON.stringify(!0)),this.iconOnSoundEffect.active=!0,this.iconOffSoundEffect.active=!1},a.turnOffSoundEffect=function(){JSON.parse(f.localStorage.getItem("XK_is_effect_on")||"true")&&f.localStorage.setItem("XK_is_effect_on",JSON.stringify(!1)),this.iconOnSoundEffect.active=!1,this.iconOffSoundEffect.active=!0},a.updateSoundIcons=function(){var e=JSON.parse(f.localStorage.getItem("XK_is_playing")||"false");this.iconOnSoundMusic.active=e,this.iconOffSoundMusic.active=!e;var t=JSON.parse(f.localStorage.getItem("XK_is_effect_on")||"false");this.iconOnSoundEffect.active=t,this.iconOffSoundEffect.active=!t},t}(b)).instance=null,D=t((U=re).prototype,"playNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(U.prototype,"lblGoldBalance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"lblGemBalance",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(U.prototype,"currentJackpot",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"bgMusic1",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"bgMusic2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"popupContainer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"exchangeCoinPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(U.prototype,"popupGuidePrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"popupHistoryPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(U.prototype,"popupJackpotPrefab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(U.prototype,"popupSetting",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(U.prototype,"iconClosePopupSetting",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(U.prototype,"iconOffSoundMusic",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(U.prototype,"iconOnSoundMusic",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(U.prototype,"iconOffSoundEffect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(U.prototype,"iconOnSoundEffect",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=U))||H)||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/OscillateX.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,o,a,s,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.CCInteger,c=e.Component}],execute:function(){var l,u,p,h,d,f,m,X,y,b;o._RF.push({},"8c796GF6OZLQK2XZObDnhPn","OscillateX",void 0);var g=a.ccclass,v=a.property,x=a.menu;e("default",(l=g("OscillateX"),u=x("Sortie/OscillateX"),p=v(s),h=v(s),d=v(s),l(f=u((X=i((m=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"minX",X,r(i)),n(i,"maxX",y,r(i)),n(i,"speed",b,r(i)),i.direction=1,i}return t(i,e),i.prototype.update=function(e){var i=this.node.position,t=i.x+this.speed*e*this.direction;t>=this.maxX?(t=this.maxX,this.direction=-1):t<=this.minX&&(t=this.minX,this.direction=1),this.node.setPosition(t,i.y,i.z)},i}(c)).prototype,"minX",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-110}}),y=i(m.prototype,"maxX",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 110}}),b=i(m.prototype,"speed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),f=m))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/PanelMenu2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Play.ts"],(function(t){var e,n,i,o,r,s,a,u,c,l,f,p,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,u=t.Sprite,c=t.tween,l=t.Vec3,f=t.sys,p=t.Component},function(t){S=t.default}],execute:function(){var d,g,h,w,_,O,v,y,m,b,M,I,B,K;r._RF.push({},"ce5acSFErNKKYFsQ3p9oiUr","PanelMenu",void 0);var P=s.ccclass,z=s.property;t("default",(d=P("PanelMenu"),g=z(a),h=z(u),w=z(u),_=z(u),O=z(u),d(((K=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"arrow",m,o(e)),i(e,"sprSoundMusicOn",b,o(e)),i(e,"sprSoundMusicOff",M,o(e)),i(e,"sprSoundBgOn",I,o(e)),i(e,"sprSoundBgOff",B,o(e)),e.isShow=!1,e.soundState=1,e.musicState=1,e}n(e,t);var r=e.prototype;return r.onLoad=function(){e.instance=this},r.show=function(t){this.isShow=t,this.isShow?(c(this.node).to(.3,{position:new l(-150,0,0)}).start(),c(this.arrow).to(.3,{angle:180}).start()):(c(this.node).to(.3,{position:new l(300,0,0)}).start(),c(this.arrow).to(.3,{angle:0}).start())},r.hide=function(){this.isShow=!1,this.node.setPosition(new l(300,0,0)),this.arrow.angle=0},r.toggleShow=function(){this.show(!this.isShow)},r.getSound=function(){var t=f.localStorage.getItem("XK_sound_fish_shot");return null!=t&&(this.soundState=parseInt(t)),this.soundState},r.getMusic=function(){var t=f.localStorage.getItem("XK_music_fish_shot");return null!=t&&(this.musicState=parseInt(t)),this.musicState},r.toggleSoundMusic=function(){S.instance.togglePlayMusic();var t=JSON.parse(f.localStorage.getItem("XK_is_playing")||"false");this.sprSoundBgOn.node.active=t,this.sprSoundBgOff.node.active=!t},r.toggleSoundEffect=function(){var t=JSON.parse(f.localStorage.getItem("XK_is_effect_on")||"true");t=!t,f.localStorage.setItem("XK_is_effect_on",JSON.stringify(t)),this.sprSoundMusicOn.node.active=t,this.sprSoundMusicOff.node.active=!t},r.updateSoundEffect=function(){var t=JSON.parse(f.localStorage.getItem("XK_is_effect_on")||"true"),e=JSON.parse(f.localStorage.getItem("XK_is_playing")||"false");this.sprSoundBgOn.node.active=e,this.sprSoundBgOff.node.active=!e,this.sprSoundMusicOn.node.active=t,this.sprSoundMusicOff.node.active=!t},e}(p)).instance=null,m=e((y=K).prototype,"arrow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"sprSoundMusicOn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(y.prototype,"sprSoundMusicOff",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(y.prototype,"sprSoundBgOn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(y.prototype,"sprSoundBgOff",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/Play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./Bullet.ts","./Airplane.ts","./SortiePhotonClient.ts","./Lobby.ts","./XuatKich.SyncTimeControl.ts","./PhotonClient.ts","./App.ts","./Config.ts","./Utils.ts"],(function(e){var t,n,a,i,o,r,l,s,c,u,p,g,d,h,m,f,b,y,v,C,P,A,T,I,S,R,w,N,E,O,B,k,M,G,D,U,z,_,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Label,u=e.SpriteFrame,p=e.Toggle,g=e.AudioClip,d=e.Prefab,h=e.Sprite,m=e.RichText,f=e.Tween,b=e.UIOpacity,y=e.tween,v=e.instantiate,C=e.UITransform,P=e.Vec3,A=e.Button,T=e.Animation,I=e.v3,S=e.sys,R=e.v2,w=e.PolygonCollider2D,N=e.sp,E=e.Component},function(e){O=e.default},function(e){B=e.default},function(e){k=e.default},function(e){M=e.SortiePhotonClient},function(e){G=e.default},function(e){D=e.default},function(e){U=e.PhotonClient},function(e){z=e.default},function(e){_=e.default},function(e){L=e.Utils}],execute:function(){var x,J,F,K,X,H,W,j,Z,V,q,Y,Q,$,ee,te,ne,ae,ie,oe,re,le,se,ce,ue,pe,ge,de,he,me,fe,be,ye,ve,Ce,Pe,Ae,Te,Ie,Se,Re,we,Ne,Ee,Oe,Be,ke,Me,Ge,De,Ue,ze,_e,Le,xe,Je,Fe,Ke,Xe,He,We,je,Ze,Ve,qe,Ye,Qe,$e,et,tt,nt,at,it,ot,rt,lt,st,ct,ut,pt,gt,dt,ht,mt,ft,bt,yt,vt,Ct,Pt,At,Tt,It,St,Rt,wt,Nt,Et,Ot,Bt,kt,Mt,Gt,Dt,Ut,zt,_t,Lt,xt,Jt,Ft,Kt,Xt,Ht,Wt,jt;r._RF.push({},"48de4SpiARKwLhLWI5U6cR/","Play",void 0);var Zt=l.ccclass,Vt=l.property,qt=l.menu;e("default",(x=qt("Sortie/Play"),J=Vt(s),F=Vt(c),K=Vt(s),X=Vt(s),H=Vt([u]),W=Vt(s),j=Vt(s),Z=Vt([O]),V=Vt([s]),q=Vt(s),Y=Vt(s),Q=Vt(p),$=Vt({type:g}),ee=Vt({type:g}),te=Vt({type:g}),ne=Vt({type:g}),ae=Vt({type:g}),ie=Vt({type:g}),oe=Vt(g),re=Vt(g),le=Vt(s),se=Vt([s]),ce=Vt([u]),ue=Vt([u]),pe=Vt(c),ge=Vt(c),de=Vt(c),he=Vt(s),me=Vt(d),fe=Vt(d),be=Vt(s),ye=Vt(c),ve=Vt(c),Ce=Vt(c),Pe=Vt(h),Ae=Vt(s),Te=Vt(h),Ie=Vt(s),Se=Vt(s),Re=Vt(u),we=Vt(s),Ne=Vt(u),Ee=Vt(s),Oe=Vt(u),Be=Vt(s),ke=Vt(s),Me=Vt(s),Ge=Vt(s),De=Vt(s),Ue=Vt(s),ze=Vt(s),_e=Vt(s),Le=Vt(m),xe=Vt(s),Je=Vt(s),Fe=Vt([s]),Zt(Ke=x(((jt=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"lobby",He,i(t)),a(t,"lblRoomId",We,i(t)),a(t,"loading",je,i(t)),a(t,"touchPad",Ze,i(t)),a(t,"sprFramesBullet",Ve,i(t)),a(t,"bulletTemplate",qe,i(t)),a(t,"bombTemplate",Ye,i(t)),a(t,"players",Qe,i(t)),a(t,"listAirplaneAnim",$e,i(t)),a(t,"listAirplaneNode",et,i(t)),a(t,"airplaneTemplate",tt,i(t)),a(t,"toggleAuto",nt,i(t)),a(t,"soundShootGun1",at,i(t)),a(t,"soundShootGun2",it,i(t)),a(t,"soundShootGun3",ot,i(t)),a(t,"soundShootGun4",rt,i(t)),a(t,"soundShootGunUp",lt,i(t)),a(t,"soundShootGunSpecial",st,i(t)),a(t,"playSound1",ct,i(t)),a(t,"playSound2",ut,i(t)),a(t,"gun",pt,i(t)),a(t,"backgrounds",gt,i(t)),a(t,"sprEmotions",dt,i(t)),a(t,"sprEmotionInGames",ht,i(t)),a(t,"lblJackpot",mt,i(t)),a(t,"lblJackpotPerGun",ft,i(t)),a(t,"lblPercentJackpot",bt,i(t)),a(t,"bossComing",yt,i(t)),a(t,"popupGuidePrefab",vt,i(t)),a(t,"popupChatPrefab",Ct,i(t)),a(t,"popupContainer",Pt,i(t)),a(t,"lblCountRadar",At,i(t)),a(t,"lblCountTarget",Tt,i(t)),a(t,"lblCountMagnetic",It,i(t)),a(t,"targetTimeCounter",St,i(t)),a(t,"radarStatusSprite",Rt,i(t)),a(t,"processAccumulate",wt,i(t)),a(t,"processArrowNode",Nt,i(t)),a(t,"targetNode",Et,i(t)),a(t,"iconTarget",Ot,i(t)),a(t,"radarNode",Bt,i(t)),a(t,"iconRadar",kt,i(t)),a(t,"magneticNode",Mt,i(t)),a(t,"iconMagnetic",Gt,i(t)),a(t,"lineTemplate",Dt,i(t)),a(t,"radarClickNode",Ut,i(t)),a(t,"effectRadar",zt,i(t)),a(t,"magneticClickNode",_t,i(t)),a(t,"effectMagnetic",Lt,i(t)),a(t,"bombClickNode",xt,i(t)),a(t,"effectBigWinXK",Jt,i(t)),a(t,"effectJackpotXK",Ft,i(t)),a(t,"toast",Kt,i(t)),t.mePlayer=null,t.bullets=[],t.listAirplane=[],t.isShoot=!1,t.isTargetAirplane=!1,t.targetAirplane=null,t.intervalFindTargetAirplane=2,t.curIntervalFindTargetAirplane=0,t.shootCooldown=0,t.shootInterval=.5,t.shootingId="",t.timeNoAction=0,t.currentJackpot=0,t.currentJackpotPercent=0,t.countItemTarget=0,t.countItemRadar=0,t.countItemMagnetic=0,t.timeToUseTarget=0,t.currentTimeToUseTarget=0,t.dataChat=[],t.allowUseItemTarget=!0,t.allowUseItemRadar=!0,t.allowUseItemMagnetic=!0,t.allowUseItemBomb=!1,t.lineSegments=[],t.bombClickPath=void 0,a(t,"autoBtnNode",Xt,i(t)),a(t,"chatBtnNode",Ht,i(t)),a(t,"emotionInGames",Wt,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){t.instance=this},r.onEnable=function(){this.listAirplaneNode.removeAllChildren(),this.listAirplane=[],this.bullets=[];for(var e=0;e<this.players.length;e++)this.players[e].leave();this.mePlayer=this.players[0],this.radarClickNode.active=!1,this.magneticClickNode.active=!1,this.bombClickNode.active=!1,this.mePlayer.magneticEffect.active=!1,this.dataChat=[],this.allowUseItemTarget=!0,this.allowUseItemRadar=!0,this.allowUseItemMagnetic=!0,this.allowUseItemBomb=!1,this.updateProcessAccumulate(),this.timeNoAction=0,this.toast.node.active=!1,this.lblCountTarget.string="0",this.lblCountRadar.string="0",this.lblCountMagnetic.string="0",this.countItemTarget=0,this.countItemRadar=0,this.countItemMagnetic=0},r.start=function(){var e=this;this.touchPad.on(s.EventType.TOUCH_START,(function(t){var n=t.getLocation();e.mePlayer.rotateGun(n),e.isShoot=!0}),this.touchPad),this.touchPad.on(s.EventType.TOUCH_MOVE,(function(t){var n=t.getLocation();e.mePlayer.rotateGun(n)}),this.touchPad),this.touchPad.on(s.EventType.TOUCH_END,(function(t){e.isShoot=!1}),this.touchPad),this.touchPad.on(s.EventType.TOUCH_CANCEL,(function(t){e.isShoot=!1}),this.touchPad),this.toggleAuto.node.on("toggle",(function(){e.toggleAuto.isChecked?(e.touchPad.active=!1,e.curIntervalFindTargetAirplane=e.intervalFindTargetAirplane,e.isShoot=!0,e.findAirplaneInWorld()):e.stopAutoShoot(),e.toggleBtnChatAndAuto()})),M.getInstance().handleErrorResponse((function(){D.instance.resetPingOffline(),e.node.active=!1,e.lobby.getComponent(G).show(!0)})),M.getInstance().handleTimeoutResponse((function(){D.instance.resetPingOffline(),e.node.active=!1,e.lobby.getComponent(G).show(!0)})),M.getInstance().addResponseListener(U.EOperationCodes.Game,(function(t){if(t.errCode<0)return e.stopAutoShoot(),void(-7==t.errCode?z.instance.alertDialog.showMsg(U.getErrMsg(t.errCode),(function(){e.back()})):(z.instance.alertDialog.showMsg(U.getErrMsg(t.errCode)),e.back()));Object.keys(t.vals).forEach((function(n){var a,i=parseInt(n),o=t.vals[n];if(i!=M.EParameterCodes.OperationSubCode)try{o=JSON.parse(o)}catch(e){}if(i==M.EParameterCodes.PingResponse&&D.instance.setReceivePingTime(o),i==M.EParameterCodes.LeaveRoomResponse)if(o.id==_.Login.AccountID+":"+_.Login.PortalID){for(var r=0;r<e.players.length;r++)e.players[r].leave();D.instance.resetPingOffline(),e.node.active=!1,e.lobby.getComponent(G).show(!0),e.lobby.getComponent(G).updateBalance(o.go,o.ge),z.instance.alertDialog.dismiss(),e.unscheduleAllCallbacks()}else{var l=e.getPlayerById(o.id);l&&(e.showToast("<color=#ffff00>"+l.nickname+"</c><color=#ffffff>"+z.instance.getTextLang("vc19").replace("{0}","")+"</color>"),l.leave())}if(i==M.EParameterCodes.JoinRoomResponse){D.instance.startPingServer(),e.lblRoomId.string="#"+o.r;var s=o.a.find((function(e){return e.id==_.Login.AccountID+":"+_.Login.PortalID}));e.mePlayer.set(s),e.mePlayer.localPos=1;var c=e.mePlayer.node.getChildByName("circle_1"),u=e.mePlayer.node.getChildByName("circle_2");c&&u&&(f.stopAllByTarget(c),f.stopAllByTarget(u),c.getComponent(b).opacity=255,u.getComponent(b).opacity=255,y(c.getComponent(b)).repeatForever(y().to(.5,{opacity:50}).to(.5,{opacity:255})).start(),y(u.getComponent(b)).repeatForever(y().to(.5,{opacity:255}).to(.5,{opacity:50})).start());for(var p,g=s.p,d=function(t){t!=g&&1!=t&&(p=o.a.find((function(e){return e.p==t})))&&(e.players[t-1].set(p),e.players[t-1].localPos=t)},h=1;h<=4;h++)d(h);1!=g&&(p=o.a.find((function(e){return 1==e.p})))&&(e.players[g-1].set(p),e.players[g-1].localPos=g);for(var m=0;m<o.f.length;m++){var S=v(e.airplaneTemplate).getComponent(k);S.node.parent=e.listAirplaneNode,S.setData(o.f[m]),e.listAirplane.push(S)}e.updateJackpotObject(o.j,null)}i==M.EParameterCodes.OtherJoinRoomResponse&&(1===o.p?(a=e.players[e.mePlayer.serverPos-1]).localPos=e.mePlayer.serverPos:(a=e.players[o.p-1]).localPos=o.p,a.set(o),e.showToast("<color=#4ac7f7>"+o.n+"</c><color=#ffffff>"+z.instance.getTextLang("vc18").replace("{0}","")+"</color>"));if(i==M.EParameterCodes.ChangeGunResponse){var R=e.getPlayerById(o.i);R&&R.setGun(o.gi)}if(i===M.EParameterCodes.CreateFighterResponse)for(var w=0;w<o.length;w++){var N=v(e.airplaneTemplate).getComponent(k);N.node.parent=e.listAirplaneNode,N.setData(o[w]),e.listAirplane.push(N)}if(i===M.EParameterCodes.RemoveSingleFighterResponse)for(var E=0;E<e.listAirplane.length;E++){var O=e.listAirplane[E];O.type==o&&null!=O.node&&O.node.active&&O.die(null,null)}if(i===M.EParameterCodes.ShootingResponse){o.i==_.Login.AccountID+":"+_.Login.PortalID&&(e.timeNoAction=0);var B=e.getPlayerById(o.i);if(B){B.updateGold(o.g);var x=o.s,J=parseInt(x.id.charAt(0)),F=e.getPlayerByPos(J);if(F){var K=e.getBullet(J,x.gi,F.id==e.mePlayer.id),X=x.vx,H=x.vy,W=Math.sqrt(X*X+H*H);W>1.5&&(X/=W,H/=W);var j=Math.atan2(H,X),Z=j;switch(K.node.angle=Z*L.Rad2Deg,F.localPos){case 1:Z=j;break;case 2:Z=Math.PI-j,K.node.angle=Z*L.Rad2Deg;break;case 3:Z=j,K.node.angle=(Z+Math.PI)*L.Rad2Deg;break;case 4:Z=Math.PI-j,K.node.angle=(Z+Math.PI)*L.Rad2Deg}F.rotateGunByAngle(Z*L.Rad2Deg);var V=K.node.parent.getComponent(C).convertToNodeSpaceAR(F.fireEffect.getComponent(C).convertToWorldSpaceAR(P.ZERO));K.node.setPosition(V),K.run(),F.startAnimFireGun()}}e.updateJackpotObject(o.j,null)}if(i===M.EParameterCodes.HeadShotResponse&&e.headShotResponseHandle(o),i===M.EParameterCodes.ChatResponse){if(o.c.includes("__EIG__")){var q=o.c.replace("__EIG__","").split("__"),Y=q[0],Q=q[1];return void e.displayEmotion(o.f,Y,parseInt(Q))}e.dataChat.push(o);var $=e.getPlayerById(o.f);$&&$.receiveMessage(o.c)}if(i===M.EParameterCodes.TimeToUse&&(e.countItemTarget-=1,e.lblCountTarget.string=e.countItemTarget.toString(),e.isShoot=!1,e.toggleAuto.isChecked=!1,e.toggleAuto.enabled=!1,e.touchPad.active=!1,e.listAirplane.forEach((function(t){var n=t.anim.children[0].children[0];n.addComponent(A).enabled=!0,t.target.active=!1,n.off("click"),n.on("click",(function(){null!=e.targetAirplane&&(e.targetAirplane.target.active=!1),t.target.active=!0,e.targetAirplane=t,e.toggleAuto.isChecked=!0,e.isShoot=!0,e.isTargetAirplane=!0}))})),e.targetTimeCounter.node.active=!0,e.timeToUseTarget=o,e.currentTimeToUseTarget=o,e.scheduleOnce((function(){e.timeToUseTarget=0,e.currentTimeToUseTarget=0,e.targetTimeCounter.node.active=!1,e.touchPad.active=!0,e.toggleAuto.enabled=!0,e.isShoot=!1,e.toggleAuto.isChecked=!1,e.isTargetAirplane=!1,e.targetAirplane=null,e.listAirplane.forEach((function(e){e.anim.children[0].children[0].removeComponent(A),e.target.active=!1})),e.allowUseItemTarget=!0}),o)),i==M.EParameterCodes.ReleaseRadarResponse){e.allowUseItemRadar=!1,e.effectRadar.active=!0,e.radarStatusSprite.active=!0;for(var ee=0;ee<o.length;ee++){var te=e.getAirplaneById(o[ee]);te&&(te.radarAffected=!0)}}if(i==M.EParameterCodes.CancelRadarResponse&&(e.allowUseItemRadar=!0,e.effectRadar.active=!1,e.radarStatusSprite.active=!1,e.listAirplane.forEach((function(e){e.radarAffected=!1}))),i==M.EParameterCodes.ShotMagneticMessage){var ne=e.getPlayerById(o.i);if(ne){ne.setGun(12);var ae=o.vx,ie=o.vy,oe=Math.sqrt(ae*ae+ie*ie);oe>1.5&&(ae/=oe,ie/=oe);var re=Math.atan2(ie,ae);[2,4].includes(ne.localPos)&&(re=Math.PI-re),ne.rotateGunByAngle(re*L.Rad2Deg),ne.magneticEffect.active=!0,setTimeout((function(){if(ne.magneticEffect.active=!1,ne.id==e.mePlayer.id){e.allowUseItemMagnetic=!0;var t=[];t.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.ReleaseMagnetic),M.getInstance().sendOperation(U.EOperationCodes.Game,t,!0)}}),1e3)}}if(i==M.EParameterCodes.ReleaseMagneticResponse){var le=e.getPlayerById(o.i);o.i==e.mePlayer.id&&(e.countItemMagnetic=o.ri,e.lblCountMagnetic.string=e.countItemMagnetic.toString()),le&&(le.setGun(o.g.gi),o.r.f.forEach((function(t){var n=e.getAirplaneById(t);n&&(n.effectMagnetic.active=!0,n.effectMagnetic.getComponent(T).play())})),setTimeout((function(){e.headShotResponseHandle(o.r),e.allowUseItemMagnetic=!0}),2e3))}if(i==M.EParameterCodes.DropBombMessage){var se=e.getPlayerById(o.i);if(se){var ce=se.gunId;se.setGun(11),e.scheduleOnce((function(){se.lblBet.string="0";var t=o.vx,n=o.vy,a=Math.sqrt(t*t+n*n);a>1.5&&(t/=a,n/=a);var i=Math.atan2(n,t),r=v(e.bombTemplate);switch(e.bombTemplate.parent.addChild(r),r.active=!0,r.angle=i*L.Rad2Deg,se.localPos){case 2:r.angle=(Math.PI-i)*L.Rad2Deg;break;case 3:r.angle=(i+Math.PI)*L.Rad2Deg;break;case 4:r.angle=-i*L.Rad2Deg}[2,4].includes(se.localPos)&&(i=Math.PI-i),se.rotateGunByAngle(i*L.Rad2Deg);var l=r.parent.getComponent(C).convertToNodeSpaceAR(se.fireEffect.getComponent(C).convertToWorldSpaceAR(P.ZERO));r.setPosition(l);var s=(0-l.y)/Math.tan(i),c=l.x+s,u=I(c,0);y(r).to(1,{position:u},{easing:"quadIn"}).call((function(){if(r.destroy(),setTimeout((function(){se.setGun(ce)}),500),e.mePlayer.id==o.i){e.updateProcessAccumulate();var t={x:e.bombClickPath.x,y:e.bombClickPath.y},n=[];n.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.ReleaseBomb),n.push(M.EParameterCodes.ReleaseBombMessage,JSON.stringify(t)),M.getInstance().sendOperation(U.EOperationCodes.Game,n,!0)}})).start()}),e.mePlayer.id==o.i?0:1)}}if(i==M.EParameterCodes.ReleaseBombResponse){var ue=e.getPlayerById(o.i);ue&&(ue.setGun(o.g.gi),e.headShotResponseHandle(o.r))}}))})),this.updateSoundMusic()},r.headShotResponseHandle=function(e){var t=this,n=this.getPlayerById(e.i);n&&n.updateGold(e.go);for(var a,i=this.getAirplaneById(e.f[0]),o=null==i?void 0:i.node.position,r=function(){var i=t.getAirplaneById(e.f[l]);if(!i||null==i.node||0==i.node.active)return 1;if(i&&n&&i.die(n,e.gor),(null==i?void 0:i.type)==k.instance.BOSS_TYPE)if(e.i==_.Login.AccountID+":"+_.Login.PortalID){t.effectJackpotXK.active=!0,t.effectJackpotXK.getComponentInChildren(c).string="0";var o=t.effectJackpotXK.getChildByName("sprite_jp");y(o).repeatForever(y().to(.5,{scale:1.2}).to(.5,{scale:1})).start(),t.scheduleOnce((function(){t.effectJackpotXK.active=!1,f.stopAllByTarget(o)}),3)}else n.showMiniJackpot(e.gor);if(i.type>=17&&(null==i?void 0:i.type)!==k.instance.BOSS_TYPE){var r=v(t.effectBigWinXK);r.parent=t.mePlayer.node.parent,a=n.serverPos==t.players[0].serverPos||n.serverPos==t.players[1].serverPos?-135:200,r.setPosition(n.node.x,a),r.active=!0,r.getChildByName("text").getComponent(c).string=L.formatNumber(e.gor),r.getChildByName("anim").getComponent(T).play(),t.scheduleOnce((function(){r.getChildByName("anim").getComponent(T).stop(),r.destroy()}),3)}},l=0;l<e.f.length;l++)r();if(this.updateJackpotObject(e.j,null),e.i==_.Login.AccountID+":"+_.Login.PortalID){if(e.bi&&Object.keys(e.bi).length>0)for(var s in e.bi)if(e.bi.hasOwnProperty(s)){var u=e.bi[s];this.updateDataBonusItem(u[0],u[1],u[2],o)}this.updateProcessAccumulate(e.a)}},r.updateSoundMusic=function(){var e=parseInt(S.localStorage.getItem("XK_play_count")||"0",10);e++,S.localStorage.setItem("XK_play_count",e.toString());e%2==0?this.playSound1:this.playSound2;this.backgrounds.forEach((function(t,n){t.active=e%5==n}));JSON.parse(S.localStorage.getItem("XK_is_playing")),JSON.parse(S.localStorage.getItem("XK_is_effect_on"))},r.togglePlayMusic=function(){var e=JSON.parse(S.localStorage.getItem("XK_is_playing")||"false");if(e=!e,S.localStorage.setItem("XK_is_playing",JSON.stringify(e)),e)Math.random()<.5?this.playSound1:this.playSound2},r.onDestroy=function(){},r.updateProcessAccumulate=function(e){void 0===e&&(e=null),null!==e&&(G.instance.currentUserAccumulate=e),this.processAccumulate.fillRange=G.instance.currentUserAccumulate/G.instance.clientParameterConfig.al,f.stopAllByTarget(this.processArrowNode),this.processArrowNode.active=this.processAccumulate.fillRange>=1,this.processArrowNode.active&&(this.allowUseItemBomb=!0,y(this.processArrowNode).repeatForever(y().to(.5,{y:70}).to(.5,{y:50})).start())},r.update=function(e){this.updateShoot(e),this.currentTimeToUseTarget>0&&(this.currentTimeToUseTarget-=e,this.targetTimeCounter.fillRange=1-this.currentTimeToUseTarget/this.timeToUseTarget),this.timeNoAction+=e,this.timeNoAction>80&&(this.timeNoAction=0,z.instance.alertDialog.showMsg(z.instance.getTextLang("TLN_ONLINE_CONFIRM"))),this.shootCooldown>0&&(this.shootCooldown-=e);for(var t=this.bullets.length-1;t>=0;t--){var n=this.bullets[t];null!=n.node&&n.node.active?n.updateRealTime(e):this.bullets.splice(t,1)}for(var a=this.listAirplane.length-1;a>=0;a--){var i=this.listAirplane[a];null!=i.node&&i.node.active?i.updateRealTime(e):this.listAirplane.splice(a,1)}if(this.isTargetAirplane&&this.targetAirplane&&this.targetAirplane.node.activeInHierarchy){for(var r=this.mePlayer.fireEffect.getComponent(C).convertToWorldSpaceAR(P.ZERO),l=this.targetAirplane.node.getComponent(C).convertToWorldSpaceAR(P.ZERO),s=this.node.getComponent(C).convertToNodeSpaceAR(r),c=this.node.getComponent(C).convertToNodeSpaceAR(l),u=c.subtract(s),p=u.length(),g=180*Math.atan2(u.y,u.x)/Math.PI,d=Math.floor(p/14);this.lineSegments.length<d;){var h=v(this.lineTemplate);this.node.addChild(h),this.lineSegments.push(h)}for(var m=0;m<this.lineSegments.length;m++){var f=this.lineSegments[m];if(m<d)if(m%2==0){f.active=!0;var b=14*m/p,y=s.lerp(c,b);f.setPosition(y),f.angle=g}else f.active=!1;else f.active=!1}}else for(var A,T=o(this.lineSegments);!(A=T()).done;){A.value.active=!1}},r.updateShoot=function(e){if(null!=this.targetAirplane&&this.targetAirplane.isDie&&(this.targetAirplane=null,this.isTargetAirplane&&(this.toggleAuto.isChecked=!1,this.isShoot=!1,this.isTargetAirplane=!1)),this.toggleAuto.isChecked)if(null!=this.targetAirplane){var t=this.mePlayer.gunRotate.getComponent(C).convertToWorldSpaceAR(P.ZERO),n=this.targetAirplane.node.getComponent(C).convertToWorldSpaceAR(I(this.targetAirplane.node.getComponent(C).width/2,0)),a=L.v2Distance(R(n.x,n.y),R(t.x,t.y)),i=n.subtract(t);this.isTargetAirplane?Math.abs(this.targetAirplane.node.x)>960||Math.abs(this.targetAirplane.node.y)>540?this.isShoot=!1:(this.isShoot=!0,this.mePlayer.gunRotate.angle=Math.atan2(i.y,i.x)*L.Rad2Deg):Math.abs(this.targetAirplane.node.x)>768||Math.abs(this.targetAirplane.node.y)>432||a<200?(this.targetAirplane=null,this.curIntervalFindTargetAirplane=0):this.mePlayer.gunRotate.angle=Math.atan2(i.y,i.x)*L.Rad2Deg}else this.isTargetAirplane||(this.curIntervalFindTargetAirplane=Math.max(0,this.curIntervalFindTargetAirplane-e),0==this.curIntervalFindTargetAirplane&&this.findAirplaneInWorld());if(this.isShoot&&this.shootCooldown<=0){this.shootCooldown=this.shootInterval;var o=L.degreesToVec2(this.mePlayer.gunRotate.angle);this.shootingId=this.mePlayer.serverPos+""+(new Date).getTime()%1e7;var r={id:this.shootingId,gi:this.mePlayer.gunId,p:this.mePlayer.serverPos,vx:o.x,vy:o.y,t:(new Date).toISOString(),iu:0},l=[];l.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.PlayerShooting),l.push(M.EParameterCodes.ShootingMessage,JSON.stringify(r)),M.getInstance().sendOperation(U.EOperationCodes.Game,l,!0)}},r.findAirplaneInWorld=function(){this.curIntervalFindTargetAirplane=this.intervalFindTargetAirplane;for(var e=[],t=this.mePlayer.gunRotate.getComponent(C).convertToWorldSpaceAR(P.ZERO),n=0;n<this.listAirplane.length;n++){var a=this.listAirplane[n].node;if(a.active&&Math.abs(a.position.x)<=768&&Math.abs(a.position.y)<=432){var i=a.getComponent(C).convertToWorldSpaceAR(P.ZERO),o=L.v2Distance(R(t.x,t.y),R(i.x,i.y));o>=135&&e.push({airplane:this.listAirplane[n],distance:o})}}e.length>0&&(this.targetAirplane=e[L.randomRangeInt(0,e.length)].airplane)},r.stopAutoShoot=function(){this.isShoot=!1,this.toggleAuto.isChecked=!1,this.touchPad.active=!0,this.curIntervalFindTargetAirplane=0,this.targetAirplane=null},r.getBullet=function(e,t,n){var a,i=v(this.bulletTemplate);i.parent=this.bulletTemplate.parent;var o=i.getChildByName(t+"").getComponent(w);return i.getComponent(w).points=o.points.map((function(e){return R(e.x,e.y)})),(a=i.getComponent(B)).positionID=e,a.gunId=t,this.bullets.push(a),a.node.active=!1,a.bullet.getComponent(h).spriteFrame=this.sprFramesBullet[t-1],a},r.getAirplaneById=function(e){for(var t=0;t<this.listAirplane.length;t++)if(this.listAirplane[t].id==e)return this.listAirplane[t];return null},r.getPlayerById=function(e){if(e<="")return null;for(var t=0;t<this.players.length;t++)if(""!=this.players[t].id&&this.players[t].id==e)return this.players[t];return null},r.getPlayerByPos=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].serverPos==e)return this.players[t];return null},r.getPlayerByLocalPos=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].localPos==e)return this.players[t];return null},r.showBossComing=function(){var e=this;this.bossComing.active=!0,this.bossComing.getComponent(N.Skeleton).setAnimation(0,"animation",!0),this.scheduleOnce((function(){e.bossComing.getComponent(N.Skeleton).clearTrack(0),e.bossComing.active=!1}),3)},r.getAirplaneAnimByType=function(e){for(var t="air"+e,n=0;n<this.listAirplaneAnim.length;n++)if(null!=this.listAirplaneAnim[n].name&&""!=this.listAirplaneAnim[n].name&&this.listAirplaneAnim[n].name==t)return this.listAirplaneAnim[n];return this.listAirplaneAnim[0]},r.actBetUp=function(){var e=this.mePlayer.gunId,t=e>=10?1:e+1;this.actUpdateGun(t)},r.actBetDown=function(){var e=this.mePlayer.gunId,t=e<=1?10:e-1;this.actUpdateGun(t)},r.actUpdateGun=function(e){var t={i:e},n=[];n.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.ChangeGun),n.push(M.EParameterCodes.ChangeGunMessage,JSON.stringify(t)),M.getInstance().sendOperation(U.EOperationCodes.Game,n,!0)},r.actBack=function(){var e=this;z.instance.confirmDialog.showMsg(z.instance.getTextLang("fish_pu6"),(function(t){t&&(e.back(),G.instance.playMusic())}))},r.back=function(){var e=this;this.stopAutoShoot(),this.scheduleOnce((function(){D.instance.resetPingOffline(),e.node.active=!1,e.lobby.getComponent(G).show(!0)}),5);var t=[];t.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.LeaveRoom),M.getInstance().sendOperation(U.EOperationCodes.Game,t,!0)},r.actShowPopupGuide=function(){var e=v(this.popupGuidePrefab);this.popupContainer.addChild(e),e.getComponent("PopupGuideXK").show()},r.setDataBonusItem=function(e,t,n){this.countItemTarget=e,this.countItemRadar=t,this.countItemMagnetic=n,this.lblCountTarget.string=e.toString(),this.lblCountRadar.string=t.toString(),this.lblCountMagnetic.string=n.toString()},r.updateDataBonusItem=function(e,t,n,a){var i=this;if(!(e<0||t<0||n<0)){var o=function(e,t){var n=t.getComponent(C).convertToWorldSpaceAR(P.ZERO),o=i.listAirplaneNode.getComponent(C).convertToNodeSpaceAR(n),r=new s;r.addComponent(h).spriteFrame=e,r.setPosition(a),i.listAirplaneNode.addChild(r),y(r).to(2,{position:o}).call((function(){return r.destroy()})).start()};e>0&&o(this.iconTarget,this.targetNode),t>0&&o(this.iconRadar,this.radarNode),n>0&&o(this.iconMagnetic,this.magneticNode),this.setDataBonusItem(this.countItemTarget+e,this.countItemRadar+t,this.countItemMagnetic+n)}},r.actUseTarget=function(){if(!(this.countItemTarget<=0)&&this.allowUseItemTarget){this.allowUseItemTarget=!1,this.stopAutoShoot();var e=[];e.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.UseTarget),M.getInstance().sendOperation(U.EOperationCodes.Game,e,!0)}},r.actUseRadar=function(){var e=this;this.countItemRadar<=0||!this.allowUseItemRadar||(this.allowUseItemRadar=!1,this.showToast(z.instance.getTextLang("xk_no7"),!1),this.radarClickNode.active=!0,this.radarClickNode.on(s.EventType.TOUCH_END,(function(t){var n=t.getLocation(),a=e.radarClickNode.getComponent(C).convertToNodeSpaceAR(new P(n.x,n.y,0));e.effectRadar.setPosition(a);var i=e.radarClickNode.getChildByName("radar_target");i.setPosition(a),i.active=!0;var o={i:_.Login.AccountID+":"+_.Login.PortalID,x:n.x,y:n.y},r=[];r.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.UseRadar),r.push(M.EParameterCodes.DropRadarMessage,JSON.stringify(o)),M.getInstance().sendOperation(U.EOperationCodes.Game,r,!0),e.toast.node.active=!1,e.countItemRadar-=1,e.lblCountRadar.string=e.countItemRadar.toString(),e.radarClickNode.active=!1,e.scheduleOnce((function(){i.active=!1}),2)}),this.radarClickNode))},r.actUseMagnetic=function(){var e=this;this.countItemMagnetic<=0||!this.allowUseItemMagnetic||(this.allowUseItemMagnetic=!1,this.mePlayer.setGun(12),this.magneticClickNode.active=!0,this.magneticClickNode.on(s.EventType.TOUCH_END,(function(t){var n=t.getLocation();e.mePlayer.rotateGun(n);var a=L.degreesToVec2(e.mePlayer.gunRotate.angle),i={i:_.Login.AccountID+":"+_.Login.PortalID,gx:e.mePlayer.gunRotate.x,gy:e.mePlayer.gunRotate.y,vx:a.x,vy:a.y,a:e.mePlayer.gunRotate.angle},o=[];o.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.ShotMagnetic),o.push(M.EParameterCodes.ShotMagneticMessage,JSON.stringify(i)),M.getInstance().sendOperation(U.EOperationCodes.Game,o,!0),e.magneticClickNode.active=!1}),this.magneticClickNode))},r.actDropBomb=function(){var e=this;this.allowUseItemBomb&&(this.allowUseItemBomb=!1,this.mePlayer.setGun(11),this.mePlayer.lblBet.string="0",f.stopAllByTarget(this.processArrowNode),this.processArrowNode.active=!1,this.bombClickNode.active=!0,this.bombClickNode.on(s.EventType.TOUCH_START,(function(t){var n=t.getLocation();e.mePlayer.rotateGun(n)}),this.bombClickNode),this.bombClickNode.on(s.EventType.TOUCH_MOVE,(function(t){var n=t.getLocation();e.mePlayer.rotateGun(n)}),this.bombClickNode),this.bombClickNode.on(s.EventType.TOUCH_END,(function(t){var n=t.getLocation();e.bombClickPath=n,e.mePlayer.rotateGun(n);var a=L.degreesToVec2(e.mePlayer.gunRotate.angle),i={i:_.Login.AccountID+":"+_.Login.PortalID,gi:101,vx:a.x,vy:a.y},o=[];o.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.DropBomb),o.push(M.EParameterCodes.DropBombMessage,JSON.stringify(i)),M.getInstance().sendOperation(U.EOperationCodes.Game,o,!0),e.bombClickNode.active=!1}),this.bombClickNode))},r.showToast=function(e,t){var n=this;void 0===t&&(t=!0),this.toast.node.active=!0,this.toast.string=e,t&&this.scheduleOnce((function(){n.toast.node.active=!1}),2)},r.moveNodeToPlayer=function(e,t){var n=t.avatarNode.getComponent(C).convertToWorldSpaceAR(P.ZERO),a=e.parent.getComponent(C).convertToNodeSpaceAR(n);y(e).to(1,{position:new P(a.x,a.y,0)}).call((function(){e.destroy()})).start()},r.toggleAutoPlay=function(e){var t=e.target;t.getChildByName("on").active=!t.getChildByName("on").active,t.getChildByName("off").active=!t.getChildByName("off").active},r.updateJackpotObject=function(e,t){"number"!=typeof e||isNaN(e)||(this.currentJackpot=e),"number"!=typeof t||isNaN(t)||(this.currentJackpotPercent=t),this.lblPercentJackpot.string=100*this.currentJackpotPercent+"%";Math.floor(this.currentJackpot*this.currentJackpotPercent)},r.actChat=function(){var e=v(this.popupChatPrefab);this.popupContainer.addChild(e),e.getComponent("XuatKich.PopupChat").showDetail(this.dataChat)},r.toggleBtnChatAndAuto=function(){var e=function(e){var t=e.getComponent(b);t&&y(e).to(.5,{position:I(0,0)}).to(0,{},{onUpdate:function(){t.opacity=0}}).call((function(){e.active=!1})).start()},t=function(e,t){var n=e.getComponent(b);n&&(e.setPosition(I(0,0)),n.opacity=0,e.active=!0,y(e).to(.5,{position:t},{onUpdate:function(){n.opacity=Math.min(n.opacity+10,255)}}).call((function(){n.opacity=255})).start())};this.autoBtnNode.active&&this.chatBtnNode.active?(e(this.autoBtnNode),e(this.chatBtnNode)):(t(this.autoBtnNode,I(-140,190,0)),t(this.chatBtnNode,I(140,190,0)))},r.toggleEmotionInGame=function(e,t){this.emotionInGames[t-1].active=!this.emotionInGames[t-1].active},r.sendEmotionInGame=function(e,t){var n=t.split("__"),a=n[0],i=n[1],o={c:"__EIG__"+this.getPlayerByLocalPos(parseInt(a)+1).id+"__"+i},r=[];r.push(M.EParameterCodes.OperationSubCode,M.EOperationSubCodes.Chat),r.push(M.EParameterCodes.ChatMessage,JSON.stringify(o)),M.getInstance().sendOperation(M.EOperationCodes.Game,r,!0)},r.displayEmotion=function(e,t,n){var a=this.getPlayerById(e),i=this.getPlayerById(t);if(a&&i){var o=new s;o.addComponent(h).spriteFrame=this.sprEmotionInGames[n-1],o.position=I(0,0,0),o.setScale(2,2,2),o.active=!0,a.avatarNode.addChild(o),this.moveNodeToPlayer(o,i)}},t}(E)).instance=null,He=t((Xe=jt).prototype,"lobby",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Xe.prototype,"lblRoomId",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(Xe.prototype,"loading",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(Xe.prototype,"touchPad",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Xe.prototype,"sprFramesBullet",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qe=t(Xe.prototype,"bulletTemplate",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(Xe.prototype,"bombTemplate",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(Xe.prototype,"players",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$e=t(Xe.prototype,"listAirplaneAnim",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),et=t(Xe.prototype,"listAirplaneNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(Xe.prototype,"airplaneTemplate",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Xe.prototype,"toggleAuto",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(Xe.prototype,"soundShootGun1",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(Xe.prototype,"soundShootGun2",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=t(Xe.prototype,"soundShootGun3",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(Xe.prototype,"soundShootGun4",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=t(Xe.prototype,"soundShootGunUp",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=t(Xe.prototype,"soundShootGunSpecial",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=t(Xe.prototype,"playSound1",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=t(Xe.prototype,"playSound2",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=t(Xe.prototype,"gun",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=t(Xe.prototype,"backgrounds",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dt=t(Xe.prototype,"sprEmotions",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ht=t(Xe.prototype,"sprEmotionInGames",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mt=t(Xe.prototype,"lblJackpot",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=t(Xe.prototype,"lblJackpotPerGun",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=t(Xe.prototype,"lblPercentJackpot",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=t(Xe.prototype,"bossComing",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=t(Xe.prototype,"popupGuidePrefab",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=t(Xe.prototype,"popupChatPrefab",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=t(Xe.prototype,"popupContainer",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=t(Xe.prototype,"lblCountRadar",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=t(Xe.prototype,"lblCountTarget",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=t(Xe.prototype,"lblCountMagnetic",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=t(Xe.prototype,"targetTimeCounter",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=t(Xe.prototype,"radarStatusSprite",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=t(Xe.prototype,"processAccumulate",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=t(Xe.prototype,"processArrowNode",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=t(Xe.prototype,"targetNode",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=t(Xe.prototype,"iconTarget",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=t(Xe.prototype,"radarNode",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=t(Xe.prototype,"iconRadar",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=t(Xe.prototype,"magneticNode",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=t(Xe.prototype,"iconMagnetic",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=t(Xe.prototype,"lineTemplate",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=t(Xe.prototype,"radarClickNode",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=t(Xe.prototype,"effectRadar",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=t(Xe.prototype,"magneticClickNode",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=t(Xe.prototype,"effectMagnetic",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=t(Xe.prototype,"bombClickNode",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=t(Xe.prototype,"effectBigWinXK",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=t(Xe.prototype,"effectJackpotXK",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kt=t(Xe.prototype,"toast",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=t(Xe.prototype,"autoBtnNode",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht=t(Xe.prototype,"chatBtnNode",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=t(Xe.prototype,"emotionInGames",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ke=Xe))||Ke)||Ke));r._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Play.ts","./App.ts","./Lobby.ts","./Utils.ts"],(function(t){var e,i,n,a,o,r,s,l,u,c,p,g,f,d,h,m,b,y,v,I,N,k,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Label,l=t.Node,u=t.Sprite,c=t.SpriteFrame,p=t.Layout,g=t.tween,f=t.v3,d=t.UIOpacity,h=t.Vec2,m=t.Tween,b=t.Vec3,y=t.Component},function(t){v=t.default},function(t){I=t.default},function(t){N=t.default},function(t){k=t.default},function(t){P=t.Utils}],execute:function(){var w,B,L,z,C,_,R,E,A,G,J,S,D,F,O,M,T,x,V,j,U,q,H,W,X,Y,K,Q,Z,$,tt,et,it;o._RF.push({},"38c41I6hn9C3YVc9C5XkPoS","Player",void 0);var nt=r.ccclass,at=r.property,ot=r.menu;t("default",(w=ot("Sortie/Player"),B=at(s),L=at(s),z=at(s),C=at(l),_=at(u),R=at(l),E=at([c]),A=at(u),G=at([l]),J=at(l),S=at(s),D=at(l),F=at(s),O=at(l),M=at(l),nt(T=w((V=e((x=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"lblNickname",V,a(e)),n(e,"lblCoin",j,a(e)),n(e,"lblBet",U,a(e)),n(e,"avatarNode",q,a(e)),n(e,"avatarSprite",H,a(e)),n(e,"gunRotate",W,a(e)),n(e,"sprGunBars",X,a(e)),n(e,"gunBar",Y,a(e)),n(e,"guns",K,a(e)),n(e,"messageNode",Q,a(e)),n(e,"messageLabel",Z,a(e)),n(e,"miniJackpotNode",$,a(e)),n(e,"miniJackpotLabel",tt,a(e)),n(e,"fireEffect",et,a(e)),n(e,"magneticEffect",it,a(e)),e.id="",e.username="",e.nickname="",e.coin=0,e.avatar="",e.serverPos=-1,e.localPos=-1,e.gunId=1,e}i(e,t);var o=e.prototype;return o.set=function(t){this.id=t.id,this.nickname=t.n,this.coin=t.go,this.avatar=t.a,this.gunRotate.angle=90,this.node.active=!0,this.serverPos=t.p,this.messageNode.active=!1,this.id==v.Login.AccountID+":"+v.Login.PortalID&&I.instance.setDataBonusItem(t.Items[0],t.Items[1],t.Items[2]),this.lblNickname.string=this.nickname,this.avatarSprite.spriteFrame=N.instance.getAvatarSpriteFrame(this.avatar),this.setGun(t.gi)},o.updateGold=function(t){this.coin=t},o.leave=function(){this.id="",this.nickname="",this.coin=0,this.avatar="",this.node.active=!1,this.serverPos=-1,this.localPos=-1,this.gunId=1,this.messageNode.active=!1},o.setGun=function(t){var e=this;if(this.gunId!==t){var i=this.guns[this.gunId-1],n=this.guns[t-1],a=this.gunRotate.children[0].getComponent(p);if(a.enabled=!1,a.updateLayout(),this.guns.forEach((function(t,i){t.active=i===e.gunId-1})),g(i).parallel(g().to(.2,{position:f(0,-100,0)},{easing:"quadIn"}),g(i.getComponent(d)).to(.2,{opacity:0},{easing:"fade"})).call((function(){i.active=!1,i.getComponent(d).opacity=255,e.gunBar.spriteFrame=e.sprGunBars[t-1],n.getComponent(d).opacity=0,n.setPosition(f(0,-50,0)),n.active=!0,g(n).parallel(g().to(.25,{position:f(0,0,0)},{easing:"quadOut"}),g(n.getComponent(d)).to(.25,{opacity:255},{easing:"fade"})).call((function(){var i;a.paddingBottom=null!=(i={1:-50,2:-100,3:-120,4:-100,5:-100,6:-120,7:-80,8:-150,9:-150,10:-150,11:-150,12:-150}[t])?i:0,a.enabled=!0,a.updateLayout(),e.gunId=t,e.guns.forEach((function(t,i){t.active=i===e.gunId-1}))})).start()})).start(),!(t>10)){var o=k.instance.listGunConfig.find((function(e){return e.i===t}));o&&(this.lblBet.string=P.formatNumber(o.v),this.id==v.Login.AccountID+":"+v.Login.PortalID&&I.instance.updateJackpotObject(null,o.j))}}},o.rotateGun=function(t){var e=this.gunRotate.getWorldPosition(),i=new h(t.x-e.x,t.y-e.y),n=Math.atan2(i.y,i.x)*P.Rad2Deg;this.rotateGunByAngle(n)},o.rotateGunByAngle=function(t){t<-90?t=180:t<0&&t>-90&&(t=0),this.gunRotate.angle=t,this.gunRotate.setPosition(f(0,[1,2].includes(this.localPos)?-15:15,0))},o.receiveMessage=function(t){var e=this;t.includes("__EIG__")||(t.includes("__E__")?this.displayEmotion(parseInt(t.replace("__E__",""))):g(this.messageNode).call((function(){e.messageNode.active=!0,e.messageLabel.string=t})).delay(3).call((function(){e.messageNode.active=!1})).start())},o.displayEmotion=function(t){var e=I.instance.sprEmotions[t-1];if(e){var i=new l;i.addComponent(u).spriteFrame=e,i.setPosition(f(0,-15,0)),i.setScale(f(1.5,1.5,1.5)),i.active=!0;var n=i.getComponent(d);n||(n=i.addComponent(d)),n.opacity=255,this.avatarNode.addChild(i),m.stopAllByTarget(i),m.stopAllByTarget(n),g(i).to(.3,{scale:f(2,2,2)},{easing:"backOut"}).to(1.2,{position:f(0,[1,2].includes(this.localPos)?60:-60,0)},{easing:"sineOut"}).start(),g(n).delay(1.5).to(.4,{opacity:0},{easing:"fade"}).call((function(){return i.destroy()})).start()}},o.startAnimFireGun=function(){m.stopAllByTarget(this.gunRotate);var t=this.gunRotate.getPosition().clone(),e=this.gunRotate.angle*(Math.PI/180),i=10*-Math.cos(e),n=10*-Math.sin(e),a=f(t.x+i,t.y+n);g(this.gunRotate).to(.05,{position:a},{easing:"sineOut"}).to(.08,{position:t},{easing:"sineIn"}).start(),g(this.gunRotate).to(.05,{scale:f(1.1,1.1,1.1)},{easing:"sineOut"}).to(.08,{scale:b.ONE},{easing:"sineIn"}).start()},o.showMiniJackpot=function(t){var e=this;this.miniJackpotNode&&(this.miniJackpotNode.active=!0,this.miniJackpotLabel.string=t.toLocaleString("VN"),g(this.miniJackpotNode).repeatForever(g().to(.5,{scale:1.2}).to(.5,{scale:1})).start(),this.scheduleOnce((function(){m.stopAllByTarget(e.miniJackpotNode),e.miniJackpotNode.active=!1}),3))},e}(y)).prototype,"lblNickname",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(x.prototype,"lblCoin",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(x.prototype,"lblBet",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(x.prototype,"avatarNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(x.prototype,"avatarSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(x.prototype,"gunRotate",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(x.prototype,"sprGunBars",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=e(x.prototype,"gunBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(x.prototype,"guns",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=e(x.prototype,"messageNode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(x.prototype,"messageLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(x.prototype,"miniJackpotNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(x.prototype,"miniJackpotLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(x.prototype,"fireEffect",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(x.prototype,"magneticEffect",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T)||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupExchangeCoin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts","./SortiePhotonClient.ts","./Config.ts","./App.ts","./PhotonClient.ts","./Utils.ts","./Lobby.ts"],(function(t){var e,n,i,a,s,r,o,c,u,l,p,h,d,g,C,f,m,b,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,o=t.Sprite,c=t.Node,u=t.EditBox,l=t.instantiate,p=t.Label,h=t.UIOpacity},function(t){d=t.default},function(t){g=t.SortiePhotonClient},function(t){C=t.default},function(t){f=t.default},function(t){m=t.PhotonClient},function(t){b=t.Utils},function(t){O=t.default}],execute:function(){var v,E,y,S,I,P,M,A,N,T,w,x,D;s._RF.push({},"c8be4wHHydLBbrYw4j4IPGj","PopupExchangeCoin",void 0);var L=r.ccclass,_=r.property,B=r.menu;t("default",(v=B("Sortie/PopupExchangeCoin"),E=_(o),y=_(c),S=_(c),I=_(u),P=_(u),L(M=v((N=e((A=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"sprCaptcha",N,a(e)),i(e,"listItems",T,a(e)),i(e,"itemTemplate",w,a(e)),i(e,"edbCaptcha",x,a(e)),i(e,"edbAmount",D,a(e)),e.isCashOut=!1,e.verifyCode="",e.cashOutMin=0,e.cashInMin=0,e}n(e,t);var s=e.prototype;return s.start=function(){var t=this,e=[g.EParameterCodes.OperationSubCode,g.EOperationSubCodes.CashoutMin,g.EParameterCodes.PortalId,C.Login.PortalID];g.getInstance().sendOperation(g.EOperationCodes.Shop,e,!0),g.getInstance().addResponseListener(g.EOperationCodes.Shop,(function(e){e.errCode<0?f.instance.alertDialog.showMsg(m.getErrMsg(e.errCode)):Object.keys(e.vals).forEach((function(n){var i=parseInt(n),a=e.vals[n];if(i!=g.EParameterCodes.OperationSubCode)try{a=JSON.parse(a)}catch(t){}i==g.EParameterCodes.CaptchaResponse&&(t.verifyCode=a[0],b.loadSpriteFrameFromBase64(a[1],(function(e){t.sprCaptcha.spriteFrame=e}))),i==g.EParameterCodes.CashInResponse&&(f.instance.alertDialog.showMsg(f.instance.getTextLang("txt_success")),O.instance.updateBalance(a.go,a.ge),t.dismiss()),i==g.EParameterCodes.CashOutResponse&&(f.instance.alertDialog.showMsg(f.instance.getTextLang("txt_success")),O.instance.updateBalance(a.go,a.ge),t.dismiss()),i==g.EParameterCodes.CashoutMinResponse&&(t.cashOutMin=JSON.parse(a.value))}))}))},s.show=function(){this.updateSA()},s.clearEdb=function(){this.edbAmount.string="",this.edbCaptcha.string=""},s.updateSA=function(){var t=this;this.isCashOut=!1;var e=O.instance.clientParameterConfig.sa;this.cashInMin=e[0],this.listItems.removeAllChildren();for(var n=function(n){var i=l(t.itemTemplate);i.active=!0,i.getChildByName("text").getComponent(p).string=b.formatNumber(e[n]),i.parent=t.listItems,i.on(c.EventType.TOUCH_END,(function(){t.edbAmount.string=e[n].toString()}))},i=0;i<e.length;i++)n(i);this.edbAmount.string="",this.edbCaptcha.string=""},s.updateSAO=function(){var t=this;this.isCashOut=!0,this.listItems.removeAllChildren();for(var e=O.instance.clientParameterConfig.sao,n=function(n){var i=l(t.itemTemplate);i.active=!0,i.getChildByName("text").getComponent(p).string=b.formatNumber(e[n]),i.parent=t.listItems,e[n]<t.cashOutMin?i.getComponent(h).opacity=100:i.on(c.EventType.TOUCH_END,(function(){t.edbAmount.string=e[n].toString()}))},i=0;i<e.length;i++)n(i);this.edbAmount.string="",this.edbCaptcha.string=""},s.actSubmit=function(){var t=parseInt(this.edbAmount.string);if(this.isCashOut&&t<this.cashOutMin)f.instance.alertDialog.showMsg(f.instance.getTextLang("fish_err999001").replace("{0}",b.formatNumber(this.cashOutMin)));else if(t<this.cashInMin)f.instance.alertDialog.showMsg(f.instance.getTextLang("TLN_MIN_GOLD_TO_CHANGE").replace("{0}",b.formatNumber(this.cashInMin)));else{var e={a:t,c:this.edbCaptcha.string,v:this.verifyCode},n=[];n.push(g.EParameterCodes.OperationSubCode,this.isCashOut?g.EOperationSubCodes.CashOutGold:g.EOperationSubCodes.CashInGold),n.push(g.EParameterCodes.ExchangeMessage,JSON.stringify(e)),g.getInstance().sendOperation(g.EOperationCodes.Shop,n,!0)}},e}(d)).prototype,"sprCaptcha",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(A.prototype,"listItems",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(A.prototype,"itemTemplate",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(A.prototype,"edbCaptcha",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(A.prototype,"edbAmount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=A))||M)||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/PopupGuideXK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts"],(function(t){var e,r,n,i,o,a,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node},function(t){u=t.default}],execute:function(){var s,g,l,p,h;o._RF.push({},"a1119VQ3FJAm4KGSDTwkxpw","PopupGuideXK",void 0);var P=a.ccclass,f=a.property,d=a.menu;t("default",(s=d("Sortie/PopupGuide"),g=f([c]),P(l=s((h=e((p=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"contents",h,i(e)),e.currentPage=1,e}r(e,t);var o=e.prototype;return o.start=function(){this.togglePage(this.currentPage)},o.togglePage=function(t){this.currentPage=t;for(var e=0;e<this.contents.length;e++)this.contents[e].active=e==t-1},o.nextPage=function(){6!=this.currentPage&&(this.currentPage++,this.togglePage(this.currentPage))},o.prevPage=function(){1!=this.currentPage&&(this.currentPage--,this.togglePage(this.currentPage))},e}(u)).prototype,"contents",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=p))||l)||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupHistory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts","./App.ts","./SortiePhotonClient.ts","./PhotonClient.ts","./Config.ts"],(function(t){var e,a,i,n,o,r,s,h,u,l,c,C,g,y,d,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,h=t.Label,u=t.instantiate,l=t.sys,c=t.Button,C=t.Color},function(t){g=t.default},function(t){y=t.default},function(t){d=t.SortiePhotonClient},function(t){p=t.PhotonClient},function(t){m=t.default}],execute:function(){var P,b,f,I,H,v,O,D,B,S,w,E,z,G,A,L,k,M,N,T,x,F,R,_,Y,V,j,J,U,Q,W,Z,q,K,X,$;o._RF.push({},"887eeFQ/OxN/parv0YdYZPV","PopupHistory",void 0);var tt=r.ccclass,et=r.property,at=r.menu,it=function(t){return t[t.Shooting=0]="Shooting",t[t.FighterDead=1]="FighterDead",t[t.SupplyChestDead=2]="SupplyChestDead",t[t.AmmunitionChestDead=3]="AmmunitionChestDead",t[t.BossDead=4]="BossDead",t[t.Magnetic=5]="Magnetic",t[t.Bomb=6]="Bomb",t}(it||{}),nt=((P={})[it.Shooting]={vi:"Bn sng",en:"Shooting",id:"Menembak",km:"",th:"",zh:""},P[it.FighterDead]={vi:"My bay b tiu dit",en:"Fighter destroyed",id:"Pesawat tempur dihancurkan",km:"",th:"",zh:""},P[it.SupplyChestDead]={vi:"Hm tip t b ph hy",en:"Supply chest destroyed",id:"Peti suplai dihancurkan",km:"",th:"",zh:""},P[it.AmmunitionChestDead]={vi:"Hm n b ph hy",en:"Ammunition chest destroyed",id:"Peti amunisi dihancurkan",km:"",th:"",zh:""},P[it.BossDead]={vi:"Boss b tiu dit",en:"Boss defeated",id:"Boss dikalahkan",km:"",th:"",zh:"Boss "},P[it.Magnetic]={vi:"Ht t tnh",en:"Magnet",id:"Magnet",km:"",th:"",zh:""},P[it.Bomb]={vi:"N bom",en:"Bomb explosion",id:"Ledakan bom",km:"",th:"",zh:""},P),ot=function(t){return t[t.GamePlayHistory=0]="GamePlayHistory",t[t.CashInHistory=1]="CashInHistory",t[t.CashOutHistory=2]="CashOutHistory",t}(ot||{}),rt=function(t){return t[t.GamePlayHistory=0]="GamePlayHistory",t[t.CashInHistory=1]="CashInHistory",t[t.CashOutHistory=2]="CashOutHistory",t}(rt||{});t("default",(b=at("Sortie/PopupHistory"),f=et([s]),I=et([s]),H=et([s]),v=et([h]),O=et(s),D=et(s),B=et(s),S=et(s),w=et(s),E=et(s),z=et(s),G=et(s),A=et(s),L=et(s),k=et(s),M=et(s),tt(N=b((x=e((T=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"tabActiveIcons",x,n(e)),i(e,"tabInactiveIcons",F,n(e)),i(e,"tabContents",R,n(e)),i(e,"tabLabels",_,n(e)),i(e,"listItemGamePlayHistory",Y,n(e)),i(e,"itemGamePlayHistory",V,n(e)),i(e,"pageButtonPrefab",j,n(e)),i(e,"paginationContainer",J,n(e)),i(e,"listItemCashInHistory",U,n(e)),i(e,"itemCashInHistory",Q,n(e)),i(e,"pageButtonPrefabCashIn",W,n(e)),i(e,"paginationContainerCashIn",Z,n(e)),i(e,"listItemCashOutHistory",q,n(e)),i(e,"itemCashOutHistory",K,n(e)),i(e,"pageButtonPrefabCashOut",X,n(e)),i(e,"paginationContainerCashOut",$,n(e)),e.currentIndex=0,e.currentPage=1,e.totalPages=1,e.historyData=[],e.pageSize=8,e.currentPageCashIn=1,e.totalPagesCashIn=1,e.historyDataCashIn=[],e.currentPageCashOut=1,e.totalPagesCashOut=1,e.historyDataCashOut=[],e}a(e,t);var o=e.prototype;return o.start=function(){this.listenerDataGamePlayHistory()},o.show=function(){t.prototype.show.call(this),this.sendDataGamePlayHistory()},o.showHistory=function(t,e,a,i,n,o,r,s,c){var C=this,g=(e-1)*this.pageSize,d=g+this.pageSize,p=t.slice(g,d);a.removeAllChildren(),p.forEach((function(t){var e,n,o,r,s,g,d,p,m=u(i);m.parent=a,m.active=!0;var P=null==(e=m.getChildByName("time"))?void 0:e.getComponent(h);P&&(P.string=C.formatDateTime(t.CreatedTime||t.ct));var b=l.localStorage.getItem("langCode")||"vi";switch(c){case ot.GamePlayHistory:var f=null==(n=m.getChildByName("room"))?void 0:n.getComponent(h),I=null==(o=m.getChildByName("b"))?void 0:o.getComponent(h),H=null==(r=m.getChildByName("des"))?void 0:r.getComponent(h),v=t.cr-t.b,O=v.toLocaleString("vi-VN");v>0&&(O="+"+O),f&&(f.string=t.ri.toString()),I&&(I.string=O),H&&(H.string=null!=(s=nt[t.t][b])?s:"");break;case ot.CashInHistory:case ot.CashOutHistory:var D=null==(g=m.getChildByName("amount"))?void 0:g.getComponent(h),B=null==(d=m.getChildByName("balance"))?void 0:d.getComponent(h),S=null==(p=m.getChildByName("des"))?void 0:p.getComponent(h);D&&(D.string=parseInt(t.Amount).toLocaleString("vi-VN")),B&&(B.string=t.Balance.toLocaleString("vi-VN")),S&&(S.string=c==ot.CashInHistory?y.instance.getTextLang("BUY_GEM"):y.instance.getTextLang("BUY_GAM"))}})),s.call(this)},o.showGamePlayHistory=function(t,e){void 0===e&&(e=1),this.historyData=t,this.totalPages=Math.min(10,Math.ceil(t.length/this.pageSize)),this.currentPage=e,this.showHistory(t,e,this.listItemGamePlayHistory,this.itemGamePlayHistory,this.paginationContainer,this.currentPage,this.totalPages,this.updatePaginationButtonsGamePlay.bind(this),ot.GamePlayHistory)},o.showCashInHistory=function(t,e){void 0===e&&(e=1),this.historyDataCashIn=t,this.totalPagesCashIn=Math.min(10,Math.ceil(t.length/this.pageSize)),this.currentPageCashIn=e,this.showHistory(t,e,this.listItemCashInHistory,this.itemCashInHistory,this.paginationContainerCashIn,this.currentPageCashIn,this.totalPagesCashIn,this.updatePaginationButtonsCashIn.bind(this),ot.CashInHistory)},o.showCashOutHistory=function(t,e){void 0===e&&(e=1),this.historyDataCashOut=t,this.totalPagesCashOut=Math.min(10,Math.ceil(t.length/this.pageSize)),this.currentPageCashOut=e,this.showHistory(t,e,this.listItemCashOutHistory,this.itemCashOutHistory,this.paginationContainerCashOut,this.currentPageCashOut,this.totalPagesCashOut,this.updatePaginationButtonsCashOut.bind(this),ot.CashOutHistory)},o.formatDateTime=function(t){var e=new Date(t),a=e.getFullYear(),i=("0"+(e.getMonth()+1)).slice(-2);return("0"+e.getDate()).slice(-2)+"/"+i+"/"+a+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},o.updatePaginationButtons=function(t,e,a,i,n){t.removeAllChildren();var o=Math.max(1,e-2),r=Math.min(a,e+2);o>1&&(this.createPageButton(t,1,e,i,n),o>2&&this.createDots(t));for(var s=o;s<=r;s++)this.createPageButton(t,s,e,i,n);r<a&&(r<a-1&&this.createDots(t),this.createPageButton(t,a,e,i,n))},o.updatePaginationButtonsGamePlay=function(){this.updatePaginationButtons(this.paginationContainer,this.currentPage,this.totalPages,this.goToPage.bind(this),rt.GamePlayHistory)},o.updatePaginationButtonsCashIn=function(){this.updatePaginationButtons(this.paginationContainerCashIn,this.currentPageCashIn,this.totalPagesCashIn,this.goToPageCashIn.bind(this),rt.CashInHistory)},o.updatePaginationButtonsCashOut=function(){this.updatePaginationButtons(this.paginationContainerCashOut,this.currentPageCashOut,this.totalPagesCashOut,this.goToPageCashOut.bind(this),rt.CashOutHistory)},o.createPageButton=function(t,e,a,i,n){var o,r;switch(n){case rt.GamePlayHistory:r=this.pageButtonPrefab;break;case rt.CashInHistory:r=this.pageButtonPrefabCashIn;break;case rt.CashOutHistory:r=this.pageButtonPrefabCashOut;break;default:return}var s=u(r);if(s){s.parent=t;var l=null==(o=s.getChildByName("text"))?void 0:o.getComponent(h);l&&(l.string=e.toString());var C=s.getChildByName("ButtonPageActive"),g=s.getChildByName("ButtonPageNotActive"),y=e===a;C&&(C.active=y),g&&(g.active=!y),s.getComponent(c)||s.addComponent(c),s.on("click",(function(){return i(e)}),this)}},o.createDots=function(t){var e=new s("Dots");e.addComponent(h).string="...",e.parent=t},o.goToPage=function(t){t<1||t>this.totalPages||t===this.currentPage||(this.currentPage=t,this.showGamePlayHistory(this.historyData,this.currentPage))},o.goToPageCashIn=function(t){t<1||t>this.totalPagesCashIn||t===this.currentPageCashIn||(this.currentPageCashIn=t,this.showCashInHistory(this.historyDataCashIn,this.currentPageCashIn))},o.goToPageCashOut=function(t){t<1||t>this.totalPagesCashOut||t===this.currentPageCashOut||(this.currentPageCashOut=t,this.showCashOutHistory(this.historyDataCashOut,this.currentPageCashOut))},o.listenerDataGamePlayHistory=function(){var t=this;d.getInstance().addResponseListener(p.EOperationCodes.Statistic,(function(e){e.errCode<0?y.instance.showErrLoading(p.getErrMsg(e.errCode)):Object.keys(e.vals).forEach((function(a){var i=parseInt(a),n=e.vals[a];if(i!==d.EParameterCodes.OperationSubCode)try{n=JSON.parse(n)}catch(t){return}i===d.EParameterCodes.PlayHistoryResponse&&(t.currentPage=1,t.showGamePlayHistory(n,t.currentPage)),i===d.EParameterCodes.ExChangeHistoryResponse&&t.showCashInHistory(n,t.currentPageCashIn)}))}))},o.listenerDataCashOutHistory=function(){var t=this;d.getInstance().addResponseListener(p.EOperationCodes.Statistic,(function(e){e.errCode<0?y.instance.showErrLoading(p.getErrMsg(e.errCode)):Object.keys(e.vals).forEach((function(a){var i=parseInt(a),n=e.vals[a];if(i!==d.EParameterCodes.OperationSubCode)try{n=JSON.parse(n)}catch(t){return}i===d.EParameterCodes.ExChangeHistoryResponse&&t.showCashOutHistory(n,t.currentPageCashOut)}))}))},o.sendDataCashOutHistory=function(){this.listItemCashOutHistory.removeAllChildren(),this.paginationContainerCashOut.removeAllChildren();var t=[d.EParameterCodes.OperationSubCode,d.EOperationSubCodes.CashOutHistory,d.EParameterCodes.AccountId,m.Login.AccountID,d.EParameterCodes.PortalId,m.Login.PortalID,d.EParameterCodes.CurrencyId,m.Login.CurrencyID];d.getInstance().sendOperation(p.EOperationCodes.Statistic,t,!0)},o.sendDataCashInHistory=function(){this.listItemCashInHistory.removeAllChildren(),this.paginationContainerCashIn.removeAllChildren();var t=[d.EParameterCodes.OperationSubCode,d.EOperationSubCodes.CashInHistory,d.EParameterCodes.AccountId,m.Login.AccountID,d.EParameterCodes.PortalId,m.Login.PortalID,d.EParameterCodes.CurrencyId,m.Login.CurrencyID];d.getInstance().sendOperation(p.EOperationCodes.Statistic,t,!0)},o.sendDataGamePlayHistory=function(){this.listItemGamePlayHistory.removeAllChildren(),this.paginationContainer.removeAllChildren();var t=[d.EParameterCodes.OperationSubCode,d.EOperationSubCodes.PlayGameHistory,d.EParameterCodes.AccountId,m.Login.AccountID,d.EParameterCodes.PortalId,m.Login.PortalID,d.EParameterCodes.CurrencyId,m.Login.CurrencyID];d.getInstance().sendOperation(p.EOperationCodes.Statistic,t,!0)},o.onTabSelected=function(t,e){var a=parseInt(e);this.currentIndex!==a&&(a===ot.CashInHistory?(this.sendDataCashInHistory(),this.listenerDataGamePlayHistory()):a===ot.CashOutHistory&&(this.sendDataCashOutHistory(),this.listenerDataCashOutHistory()),this.updateTabState(a))},o.updateTabState=function(t){this.tabActiveIcons.forEach((function(e,a){return e.active=a===t})),this.tabInactiveIcons.forEach((function(e,a){return e.active=a!==t})),this.tabContents.forEach((function(e,a){return e.active=a===t})),this.tabLabels.forEach((function(e,a){return e.color=a===t?C.WHITE:new C(144,141,190)})),this.currentIndex=t},e}(g)).prototype,"tabActiveIcons",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(T.prototype,"tabInactiveIcons",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(T.prototype,"tabContents",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=e(T.prototype,"tabLabels",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=e(T.prototype,"listItemGamePlayHistory",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(T.prototype,"itemGamePlayHistory",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(T.prototype,"pageButtonPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(T.prototype,"paginationContainer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(T.prototype,"listItemCashInHistory",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(T.prototype,"itemCashInHistory",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(T.prototype,"pageButtonPrefabCashIn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(T.prototype,"paginationContainerCashIn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(T.prototype,"listItemCashOutHistory",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(T.prototype,"itemCashOutHistory",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(T.prototype,"pageButtonPrefabCashOut",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(T.prototype,"paginationContainerCashOut",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=T))||N)||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupJackpot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts","./SortiePhotonClient.ts","./PhotonClient.ts","./App.ts","./Config.ts"],(function(t){var e,a,o,n,i,r,p,s,c,l,u,h,g,P,d,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,p=t.Node,s=t.Label,c=t.instantiate,l=t.Button,u=t.Color},function(t){h=t.default},function(t){g=t.SortiePhotonClient},function(t){P=t.PhotonClient},function(t){d=t.default},function(t){T=t.default}],execute:function(){var f,y,b,m,C,k,v,J,w,I,B,D,E,S,z,N,O,L,A,M,x,H,R,F,V,_;i._RF.push({},"8e4d6Qz1hhEoJZqLuzoQlbo","PopupJackpot",void 0);var j=r.ccclass,U=r.property,G=function(t){return t[t.TopPlayer=0]="TopPlayer",t[t.TopJackpot=1]="TopJackpot",t}(G||{}),Q=function(t){return t[t.TopPlayer=0]="TopPlayer",t[t.TopJackpot=1]="TopJackpot",t}(Q||{});t("default",(f=U([p]),y=U([p]),b=U([p]),m=U([s]),C=U(p),k=U(p),v=U(p),J=U(p),w=U(p),I=U(p),B=U(p),D=U(p),j((z=e((S=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"tabActiveIcons",z,n(e)),o(e,"tabInactiveIcons",N,n(e)),o(e,"tabContents",O,n(e)),o(e,"tabLabels",L,n(e)),o(e,"listItemTopPlayer",A,n(e)),o(e,"itemTopPlayer",M,n(e)),o(e,"pageButtonPrefabTopPlayer",x,n(e)),o(e,"paginationContainerTopPlayer",H,n(e)),o(e,"listItemTopJackpot",R,n(e)),o(e,"itemTopJackpot",F,n(e)),o(e,"pageButtonPrefabTopJackpot",V,n(e)),o(e,"paginationContainerTopJackpot",_,n(e)),e.currentIndex=0,e.currentPage=1,e.totalPages=1,e.topPlayerData=[],e.currentPageTopJackpot=1,e.totalPagesTopJackpot=1,e.topJackpotData=[],e.pageSize=8,e}a(e,t);var i=e.prototype;return i.start=function(){this.listenerDataTopPlayer(),this.listenerDataTopJackpot()},i.listenerDataTopPlayer=function(){var t=this;g.getInstance().addResponseListener(P.EOperationCodes.Statistic,(function(e){e.errCode<0?d.instance.showErrLoading(P.getErrMsg(e.errCode)):Object.keys(e.vals).forEach((function(a){var o=parseInt(a),n=e.vals[a];if(o!==g.EParameterCodes.OperationSubCode)try{n=JSON.parse(n)}catch(t){return}o===g.EParameterCodes.TopJackpotResponse&&(t.currentPage=1,t.showTopPlayer(n,t.currentPage))}))}))},i.listenerDataTopJackpot=function(){var t=this;g.getInstance().addResponseListener(P.EOperationCodes.Statistic,(function(e){e.errCode<0?d.instance.showErrLoading(P.getErrMsg(e.errCode)):Object.keys(e.vals).forEach((function(a){var o=parseInt(a),n=e.vals[a];if(o!==g.EParameterCodes.OperationSubCode)try{n=JSON.parse(n)}catch(t){return}o===g.EParameterCodes.TopJackpotResponse&&(t.currentPageTopJackpot=1,t.showTopJackpot(n,t.currentPageTopJackpot))}))}))},i.showHistory=function(t,e,a,o,n,i,r,p,l){var u=this,h=(e-1)*this.pageSize,g=h+this.pageSize,P=t.slice(h,g);a.removeAllChildren(),P.forEach((function(t,e){var n,i,r,p,g,P,d,T=c(o);switch(T.parent=a,T.active=!0,l){case G.TopPlayer:var f=null==(n=T.getChildByName("rank"))?void 0:n.getComponent(s),y=null==(i=T.getChildByName("userName"))?void 0:i.getComponent(s),b=null==(r=T.getChildByName("win"))?void 0:r.getComponent(s);if(f&&(f.string=""+(h+e+1)),y&&(y.string=t.Username||"Unknown"),b){var m=parseFloat(t.PrizeValue);isNaN(m)?b.string="0":b.string=m.toLocaleString("vi-VN")}break;case G.TopJackpot:var C=null==(p=T.getChildByName("time"))?void 0:p.getComponent(s),k=null==(g=T.getChildByName("userName"))?void 0:g.getComponent(s),v=null==(P=T.getChildByName("win"))?void 0:P.getComponent(s),J=null==(d=T.getChildByName("des"))?void 0:d.getComponent(s);if(C&&(C.string=u.formatDateTime(t.CreatedTime)),k&&(k.string=t.Nickname||"Unknown"),v){var w=parseFloat(t.PrizeValue);isNaN(w)?v.string="0":v.string=w.toLocaleString("vi-VN")}J&&(J.string="Jackpot")}})),p.call(this)},i.formatDateTime=function(t){var e=new Date(t),a=e.getFullYear(),o=("0"+(e.getMonth()+1)).slice(-2);return("0"+e.getDate()).slice(-2)+"/"+o+"/"+a+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},i.showTopPlayer=function(t,e){void 0===e&&(e=1),this.topPlayerData=t,this.totalPages=Math.min(10,Math.ceil(t.length/this.pageSize)),this.currentPage=e,this.showHistory(t,e,this.listItemTopPlayer,this.itemTopPlayer,this.paginationContainerTopPlayer,this.currentPage,this.totalPages,this.updatePaginationButtonsTopPlayer.bind(this),G.TopPlayer)},i.showTopJackpot=function(t,e){void 0===e&&(e=1),this.topJackpotData=t,this.totalPagesTopJackpot=Math.min(10,Math.ceil(t.length/this.pageSize)),this.currentPageTopJackpot=e,this.showHistory(t,e,this.listItemTopJackpot,this.itemTopJackpot,this.paginationContainerTopJackpot,this.currentPageTopJackpot,this.totalPagesTopJackpot,this.updatePaginationButtonsTopJackpot.bind(this),G.TopJackpot)},i.updatePaginationButtonsTopPlayer=function(){this.updatePaginationButtons(this.paginationContainerTopPlayer,this.currentPage,this.totalPages,this.goToPage.bind(this),Q.TopPlayer)},i.updatePaginationButtonsTopJackpot=function(){this.updatePaginationButtons(this.paginationContainerTopJackpot,this.currentPageTopJackpot,this.totalPagesTopJackpot,this.goToPageTopJackpot.bind(this),Q.TopJackpot)},i.updatePaginationButtons=function(t,e,a,o,n){t.removeAllChildren();var i=Math.max(1,e-2),r=Math.min(a,e+2);i>1&&(this.createPageButton(t,1,e,o,n),i>2&&this.createDots(t));for(var p=i;p<=r;p++)this.createPageButton(t,p,e,o,n);r<a&&(r<a-1&&this.createDots(t),this.createPageButton(t,a,e,o,n))},i.goToPage=function(t){t<1||t>this.totalPages||t===this.currentPage||(this.currentPage=t,this.showTopPlayer(this.topPlayerData,this.currentPage))},i.goToPageTopJackpot=function(t){t<1||t>this.totalPagesTopJackpot||t===this.currentPageTopJackpot||(this.currentPageTopJackpot=t,this.showTopJackpot(this.topJackpotData,this.currentPageTopJackpot))},i.createPageButton=function(t,e,a,o,n){var i,r;switch(n){case Q.TopPlayer:r=this.pageButtonPrefabTopPlayer;break;case Q.TopJackpot:r=this.pageButtonPrefabTopJackpot;break;default:return}var p=c(r);if(p){p.parent=t;var u=null==(i=p.getChildByName("text"))?void 0:i.getComponent(s);u&&(u.string=e.toString());var h=p.getChildByName("ButtonPageActive"),g=p.getChildByName("ButtonPageNotActive"),P=e===a;h&&(h.active=P),g&&(g.active=!P),p.getComponent(l)||p.addComponent(l),p.on("click",(function(){return o(e)}),this)}},i.createDots=function(t){var e=new p("Dots");e.addComponent(s).string="...",e.parent=t},i.sendDataTopPlayer=function(){this.listItemTopPlayer.removeAllChildren(),this.paginationContainerTopPlayer.removeAllChildren();var t=[g.EParameterCodes.OperationSubCode,g.EOperationSubCodes.GetTopPlayer,g.EParameterCodes.CurrencyId,T.Login.CurrencyID];g.getInstance().sendOperation(P.EOperationCodes.Statistic,t,!0)},i.sendDataTopJackpot=function(){this.listItemTopJackpot.removeAllChildren(),this.paginationContainerTopJackpot.removeAllChildren();var t=[g.EParameterCodes.OperationSubCode,g.EOperationSubCodes.GetTopJackpot,g.EParameterCodes.CurrencyId,T.Login.CurrencyID];g.getInstance().sendOperation(P.EOperationCodes.Statistic,t,!0)},i.onTabSelected=function(t,e){var a=parseInt(e);this.currentIndex!==a&&(a===G.TopPlayer?this.sendDataTopPlayer():a===G.TopJackpot&&this.sendDataTopJackpot(),this.updateTabState(a))},i.updateTabState=function(t){this.tabActiveIcons.forEach((function(e,a){return e.active=a===t})),this.tabInactiveIcons.forEach((function(e,a){return e.active=a!==t})),this.tabContents.forEach((function(e,a){return e.active=a===t})),this.tabLabels.forEach((function(e,a){return e.color=a===t?u.WHITE:new u(144,141,190)})),this.currentIndex=t},i.dismiss=function(){t.prototype.dismiss.call(this)},i.show=function(){t.prototype.show.call(this),this.sendDataTopPlayer()},e}(h)).prototype,"tabActiveIcons",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(S.prototype,"tabInactiveIcons",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(S.prototype,"tabContents",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(S.prototype,"tabLabels",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=e(S.prototype,"listItemTopPlayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(S.prototype,"itemTopPlayer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(S.prototype,"pageButtonPrefabTopPlayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(S.prototype,"paginationContainerTopPlayer",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"listItemTopJackpot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"itemTopJackpot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(S.prototype,"pageButtonPrefabTopJackpot",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(S.prototype,"paginationContainerTopJackpot",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=S))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/XuatKich",["./Airplane.ts","./BgEffect.ts","./BlinkNodeBulletXK.ts","./Bullet.ts","./ButtonSound.ts","./Lobby.ts","./OscillateX.ts","./PanelMenu2.ts","./Play.ts","./Player.ts","./PopupExchangeCoin.ts","./PopupGuideXK.ts","./PopupHistory.ts","./PopupJackpot.ts","./XuatKich.PopupChat.ts","./XuatKich.SyncTimeControl.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/XuatKich.PopupChat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts","./SortiePhotonClient.ts","./App.ts","./PhotonClient.ts","./Play.ts","./Config.ts"],(function(t){var e,n,i,a,s,o,r,l,c,u,f,p,g,h,d,m,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Node,l=t.EditBox,c=t.instantiate,u=t.Label,f=t.RichText},function(t){p=t.default},function(t){g=t.SortiePhotonClient},function(t){h=t.default},function(t){d=t.PhotonClient},function(t){m=t.default},function(t){C=t.default}],execute:function(){var b,_,T,E,v,y,M,A,F,N,P,S,L,D,w;s._RF.push({},"11ac8QA5ZJEfbgjb039Ffcf","XuatKich.PopupChat",void 0);var O=o.ccclass,B=o.property,I=o.menu;t("default",(b=I("Sortie/PopupChat"),_=B(r),T=B(r),E=B(r),v=B(r),y=B(l),M=B(r),O(A=b((N=e((F=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"listMessage",N,a(e)),i(e,"templateMessage",P,a(e)),i(e,"listFast",S,a(e)),i(e,"templateFast",L,a(e)),i(e,"edbMessage",D,a(e)),i(e,"listEmotion",w,a(e)),e.fastMessages=["TLN_BTN_FASTCHAT_1","TLN_BTN_FASTCHAT_2","TLN_BTN_FASTCHAT_3","TLN_BTN_FASTCHAT_4","TLN_BTN_FASTCHAT_5","TLN_BTN_FASTCHAT_6"],e}n(e,t);var s=e.prototype;return s.start=function(){var t=this;g.getInstance().addResponseListener(g.EOperationCodes.Game,(function(e){e.errCode<0?h.instance.alertDialog.showMsg(d.getErrMsg(e.errCode)):Object.keys(e.vals).forEach((function(n){var i=parseInt(n),a=e.vals[n];i!=g.EParameterCodes.OperationSubCode&&(a=JSON.parse(a)),i==g.EParameterCodes.ChatResponse&&t.handleData(a)}))})),this.listFast.removeAllChildren(),this.fastMessages.forEach((function(e){var n=c(t.templateFast);n.active=!0,n.getComponentInChildren(u).string=h.instance.getTextLang(e),n.on(r.EventType.TOUCH_END,(function(){t.edbMessage.string=h.instance.getTextLang(e)})),t.listFast.addChild(n)}))},s.handleData=function(t){if(!t.c.includes("__E__")&&!t.c.includes("__EIG__")){var e=m.instance.getPlayerById(t.f);if(e){var n=c(this.templateMessage);n.active=!0,t.f===C.Login.AccountID+":"+C.Login.PortalID?n.getComponent(f).string="<color=#fff600>"+e.nickname+": </c><color=#ffffff>"+t.c+"</color>":n.getComponent(f).string="<color=#3c91e6>"+e.nickname+": </c><color=#ffffff>"+t.c+"</color>",n.parent=this.listMessage}}},s.actSubmit=function(){""!==this.edbMessage.string.trim()&&(this.sendMessage(this.edbMessage.string),this.edbMessage.string="")},s.sendMessage=function(t){var e={c:t},n=[];n.push(g.EParameterCodes.OperationSubCode,g.EOperationSubCodes.Chat),n.push(g.EParameterCodes.ChatMessage,JSON.stringify(e)),g.getInstance().sendOperation(g.EOperationCodes.Game,n,!0)},s.showDetail=function(e){var n=this;e.forEach((function(t){n.handleData(t)})),t.prototype.show.call(this)},s.toggleListEmotion=function(){this.listEmotion.active=!this.listEmotion.active},s.sendEmotion=function(t,e){this.sendMessage(e),this.listEmotion.active=!1,this.dismiss()},e}(p)).prototype,"listMessage",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(F.prototype,"templateMessage",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(F.prototype,"listFast",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(F.prototype,"templateFast",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(F.prototype,"edbMessage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(F.prototype,"listEmotion",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=F))||A)||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/XuatKich.SyncTimeControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SortiePhotonClient.ts","./PhotonClient.ts"],(function(e){var n,t,i,r;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy},function(e){i=e.SortiePhotonClient},function(e){r=e.PhotonClient}],execute:function(){t._RF.push({},"131e7A9a9VC4ZHfIiVccN01","XuatKich.SyncTimeControl",void 0),e("default",function(){function e(){this._differenceTimeClientServer=0,this._deltaPingTime=0,this._pingIntervalId=null,this._sendPingTime=0}var t=e.prototype;return t.setReceivePingTime=function(e){var n=Date.now(),t=new Date(e).getTime();this._deltaPingTime=(n-this._sendPingTime)/2,this._differenceTimeClientServer=t-n-this._deltaPingTime,this.sendPong(this._deltaPingTime)},t.getCurrentServerTime=function(){return Date.now()+this._differenceTimeClientServer},t.resetPingOffline=function(){this._differenceTimeClientServer=0,null!==this._pingIntervalId&&(clearInterval(this._pingIntervalId),this._pingIntervalId=null)},t.startPingServer=function(){var e=this;this.sendPing(),this._pingIntervalId=setInterval((function(){return e.sendPing()}),1e3)},t.sendPing=function(){var e=[];e.push(i.EParameterCodes.OperationSubCode,i.EOperationSubCodes.Ping),i.getInstance().sendOperation(r.EOperationCodes.Game,e,!0),this._sendPingTime=Date.now()},t.sendPong=function(e){var n=[];n.push(i.EParameterCodes.OperationSubCode,i.EOperationSubCodes.Pong),n.push(i.EParameterCodes.PongMessage,e),i.getInstance().sendOperation(r.EOperationCodes.Game,n,!0)},n(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/XuatKich', 'chunks:///_virtual/XuatKich'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});