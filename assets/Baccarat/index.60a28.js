System.register("chunks:///_virtual/Baccarat",["./Baccarat.Play.ts"],(function(){return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/Baccarat.Play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Casino.Player.ts","./App.ts","./BaccaratSignalRClient.ts","./Casino.Lobby.ts","./Config.ts","./BroadcastListener.ts","./Utils.ts","./BundleControl.ts"],(function(e){var t,i,n,a,r,o,l,s,c,u,h,d,p,g,f,b,m,C,y,v,B,I,R,P,T,w,S,N,A,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Node,s=e.SpriteFrame,c=e.Sprite,u=e.Label,h=e.Prefab,d=e.sys,p=e.Tween,g=e.Color,f=e.tween,b=e.Animation,m=e.UIOpacity,C=e.v3,y=e.Vec3,v=e.instantiate,B=e.UITransform,I=e.Component},function(e){R=e.default},function(e){P=e.default},function(e){T=e.default},function(e){w=e.default},function(e){S=e.default},function(e){N=e.BroadcastReceiver},function(e){A=e.Utils},function(e){E=e.default}],execute:function(){var L,D,x,k,_,z,O,W,M,F,G,V,H,K,Y,U,X,j,Q,Z,q,J,$,ee,te,ie,ne,ae,re,oe,le,se,ce,ue,he,de,pe,ge,fe,be,me,Ce,ye,ve,Be,Ie,Re,Pe,Te,we,Se,Ne,Ae,Ee,Le,De,xe,ke,_e,ze,Oe,We,Me,Fe,Ge,Ve,He,Ke,Ye,Ue,Xe,je,Qe,Ze,qe,Je,$e,et,tt,it,nt,at,rt,ot,lt,st,ct,ut,ht,dt,pt,gt,ft,bt,mt,Ct,yt,vt,Bt,It,Rt,Pt,Tt,wt,St,Nt;r._RF.push({},"2a984wKJORJj7bv0HehnVZK","Baccarat.Play",void 0);var At=o.ccclass,Et=o.property,Lt=o.menu,Dt=function(e){return e[e.NONE=0]="NONE",e[e.BET=1]="BET",e[e.CHIA_BAI=2]="CHIA_BAI",e[e.RESULT=3]="RESULT",e}(Dt||{}),xt=function(e){return e[e.NONE=0]="NONE",e[e.BANKER_WIN=1]="BANKER_WIN",e[e.PLAYER_WIN=2]="PLAYER_WIN",e[e.TIE=3]="TIE",e}(xt||{}),kt=function(e){return e[e.NONE=0]="NONE",e[e.BANKER_PAIR=1]="BANKER_PAIR",e[e.PLAYER_PAIR=2]="PLAYER_PAIR",e[e.BOTH=3]="BOTH",e}(kt||{}),_t=function(e){return e[e.BAKER=1]="BAKER",e[e.PLAYER=2]="PLAYER",e[e.TIE=3]="TIE",e[e.BANKER_PAIR=4]="BANKER_PAIR",e[e.PLAYER_PAIR=5]="PLAYER_PAIR",e}(_t||{});e("default",(L=Lt("Baccarat/Play"),D=Et(l),x=Et([s]),k=Et(c),_=Et(l),z=Et(l),O=Et(u),W=Et([R]),M=Et(R),F=Et(u),G=Et(l),V=Et(l),H=Et(l),K=Et(l),Y=Et(l),U=Et(l),X=Et(l),j=Et([l]),Q=Et([l]),Z=Et(l),q=Et(l),J=Et(s),$=Et([s]),ee=Et(l),te=Et([l]),ie=Et([u]),ne=Et(u),ae=Et(c),re=Et(s),oe=Et(s),le=Et(s),se=Et(l),ce=Et(h),ue=Et(l),he=Et(u),de=Et(l),pe=Et(l),ge=Et([u]),fe=Et(l),be=Et(l),me=Et(l),Ce=Et(l),ye=Et([s]),ve=Et([s]),Be=Et(l),Ie=Et(l),Re=Et(l),Pe=Et(u),Te=Et(l),we=Et(l),Se=Et(l),Ne=Et(l),At(Ae=L(((Nt=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"roomDetail",Le,a(t)),n(t,"listTableSpr",De,a(t)),n(t,"tableSpr",xe,a(t)),n(t,"chipNodes",ke,a(t)),n(t,"boxSettingContainer",_e,a(t)),n(t,"lblToast",ze,a(t)),n(t,"players",Oe,a(t)),n(t,"mePlayer",We,a(t)),n(t,"lblDeck",Me,a(t)),t.flagLog=-1,t.betLogs=[],n(t,"nodeDisableClearBet",Fe,a(t)),n(t,"nodeDisableRebet",Ge,a(t)),n(t,"nodeDisableBetX2",Ve,a(t)),n(t,"nodeDisableFinishBet",He,a(t)),n(t,"baccaratMachine",Ke,a(t)),n(t,"playerCardSum",Ye,a(t)),n(t,"bankerCardSum",Ue,a(t)),n(t,"playerCards",Xe,a(t)),n(t,"bankerCards",je,a(t)),n(t,"playerCorner",Qe,a(t)),n(t,"bankerCorner",Ze,a(t)),n(t,"cardBack",qe,a(t)),n(t,"cardFronts",Je,a(t)),n(t,"chipContainer",$e,a(t)),n(t,"betPositions",et,a(t)),n(t,"lblBetPositions",tt,a(t)),t.betValues=[],n(t,"countdownSecond",it,a(t)),n(t,"progressSprite",nt,a(t)),n(t,"progressSpriteGreen",at,a(t)),n(t,"progressSpriteYellow",rt,a(t)),n(t,"progressSpriteRed",ot,a(t)),t.amounts=[],t.amounts_1=[1,5,10,50,100],t.amounts_2=[1,2,10,20,100],t.minBet=0,t.amountSelected=0,t.sessionId=0,t.roomId=void 0,t.roomValue=void 0,t.currency=void 0,n(t,"boxSoiCau",lt,a(t)),n(t,"popupRank",st,a(t)),n(t,"popupContainer",ct,a(t)),n(t,"lblSessionCau",ut,a(t)),n(t,"listCauMini",ht,a(t)),n(t,"itemCauMini",dt,a(t)),n(t,"listLabelCau",pt,a(t)),n(t,"listCauLeft",gt,a(t)),n(t,"itemCauLeft",ft,a(t)),n(t,"listCauRight",bt,a(t)),n(t,"itemCauRight",mt,a(t)),n(t,"cauSpr",Ct,a(t)),n(t,"cauLeftSpr",yt,a(t)),t.LABEL_CAU=["Banker","Player","Tie","Banker Pair","Player Pair"],n(t,"dealerNode",vt,a(t)),n(t,"playerWinText",Bt,a(t)),n(t,"bankerWinText",It,a(t)),n(t,"labelDealerNotify",Rt,a(t)),n(t,"betTableVip",Pt,a(t)),n(t,"betTableNormal",Tt,a(t)),n(t,"guideBG",wt,a(t)),n(t,"guide",St,a(t)),t.chatInGame=null,t}i(t,e);var r=t.prototype;return r.init=function(e,t){this.roomValue=e,this.currency=t},r.start=function(){var e=this;t.instance=this,P.instance.showLoading(!0),T.getInstance().send("EnterRoom",[this.roomValue,this.currency],(function(t){if(P.instance.showLoading(!1),t.c<0)return P.instance.alertDialog.showMsg(T.getErrMsg(t.c)),void e.node.destroy();e.joinRoom(t.r),null===d.localStorage.getItem("CA_BA_first_time")&&(d.localStorage.setItem("CA_BA_first_time","1"),e.showGuide())})),this.betTableNormal.active=!w.instance.isTableVip,this.betTableVip.active=w.instance.isTableVip,this.flagLog=-1},r.onLoad=function(){var e=this;this.chipNodes.children.forEach((function(t,i){var n=t.getChildByName("chip"),a=t.getChildByName("text");n.on(l.EventType.TOUCH_END,(function(){if(n._isSelected)return p.stopAllByTarget(n),n.y=0,a.getComponent(u).color=g.WHITE,void(n._isSelected=!1);e.chipNodes.children.forEach((function(e){var t=e.getChildByName("chip"),i=e.getChildByName("text");p.stopAllByTarget(t),t.y=0,i.getComponent(u).color=g.WHITE,t._isSelected=!1})),a.getComponent(u).color=new g(252,255,0),n._isSelected=!0,e.amountSelected=e.amounts[i]*e.minBet,f(n).repeatForever(f().to(.3,{y:15}).to(.3,{y:0})).start()}))})),this.betPositions.forEach((function(t,i){t.on(l.EventType.TOUCH_END,(function(){0!=e.amountSelected&&e.actBet(e.amountSelected,i+1)}))})),T.getInstance().receive("roomData",(function(t){t.c<0?e.showToast(T.getErrMsg(t.c)):(e.sessionId=t.r.SessionId,e.roomDetail.getChildByName("RoomSession").getComponent(u).string=P.instance.getTextLang("txt_session")+": #"+e.sessionId,e.lblSessionCau.string="#"+e.sessionId,e.lblDeck.string=t.r.Deck,e.handleSession(t.r.Session),t.r.Players.forEach((function(t){var i=e.getAllPlayersById(t.AccountId);i&&i.setCoin(t.Balance)})))})),T.getInstance().receive("joinRoom",(function(t){t.c<0?e.showToast(T.getErrMsg(t.c)):t.r.AccountId!=S.Login.AccountID+":"+S.Login.PortalID&&e.randomFreePlayer().set(t.r)})),T.getInstance().receiveArray("recieveMessage",(function(t,i,n){e.getAllPlayersById(t).showChatMsg(n)})),T.getInstance().receive("leaveRoom",(function(t){if(t.c<0)e.showToast(T.getErrMsg(t.c));else for(var i=0;i<t.r.length;i++){var n=t.r[i];n.id==S.Login.AccountID+":"+S.Login.PortalID?(n.reason<0&&P.instance.alertDialog.showMsg(P.instance.getTextLang("ca"+n.reason)),T.getInstance().dontReceive(),N.send(N.USER_UPDATE_COIN),e.node.destroy()):e.getPlayerById(n.id).leave()}})),T.getInstance().receive("registerLeavingRoom",(function(t){var i=e.getAllPlayersById(t.r.id);t.r.status?i.showRegisterQuit():i.hideRegisterQuit()})),T.getInstance().receive("rejectBetting",(function(t){var i=t.map((function(t){return e.getPlayerById(t).lblNickname.string})).join(", ");e.showToast("Reject betting from "+i)})),T.getInstance().receive("clearBetting",(function(t){var i=t.r.id,n=e.getPlayerById(i);e.chipContainer.children.filter((function(e){return e.name.includes(i)})).forEach((function(t){e.moveChipToPlayer(t,e.mePlayer)})),e.cancelBet(i),n.setCoin(t.r.balance)})),T.getInstance().receive("confirmBetting",(function(t){[e.mePlayer].concat(e.players).find((function(e){return e.id===t.r.id})).showReady()})),T.getInstance().receive("playerOtherDevice",(function(t){e.showToast(T.getErrMsg(t))})),T.getInstance().receive("connectionChanged",(function(t){var i=e.getPlayerById(t.r.id);e.showToast(i.lblNickname.string+" "+(t.status?"connected":"disconnected")),t.status&&i.leave()})),T.getInstance().receive("playerBet",(function(t){if(t.c<0)e.showToast(T.getErrMsg(t.c));else{var i=e.getPlayerById(t.r.id);i.setCoin(t.r.balance),e.placeBet(i,t.r.amount,t.r.gate),e.saveBetValues(t.r.id,t.r.amount,t.r.gate)}})),T.getInstance().receive("updateHand",(function(t){e.moveCardFromMachine(t.IsPlayerHand?e.playerCards[2]:e.bankerCards[2],t.Cards[2],!0)}))},r.saveBetValues=function(e,t,i){Array.isArray(this.betValues[i-1])||(this.betValues[i-1]=[]),this.betValues[i-1].push({id:e,amount:t});var n=this.betValues[i-1].reduce((function(e,t){return e+t.amount}),0);this.lblBetPositions[i-1].string=A.formatMoney(n,!0),this.lblBetPositions[i-1].node.active=n>0},r.cancelBet=function(e){var t=this;this.betValues.forEach((function(i,n){if(Array.isArray(i)){t.betValues[n]=i.filter((function(t){return t.id!==e}));var a=t.betValues[n].reduce((function(e,t){return e+t.amount}),0);t.lblBetPositions[n].string=A.formatMoney(a,!0),t.lblBetPositions[n].node.active=a>0}}))},r.joinRoom=function(e){var t=this;this.roomId=e.Id,this.sessionId=e.SessionId,this.lblSessionCau.string="#"+this.sessionId,this.minBet=e.Value,this.roomDetail.getChildByName("RoomTable").getComponent(u).string=(0==e.Currency?P.instance.getTextLang("tb113"):P.instance.getTextLang("tb112"))+": "+e.Id,this.roomDetail.getChildByName("RoomValue").getComponent(u).string=P.instance.getTextLang("iap38")+": "+A.formatMoney(e.Value)+" "+(0==e.Currency?P.instance.getTextLang("txt_coin"):"Tipzo"),this.roomDetail.getChildByName("RoomSession").getComponent(u).string=P.instance.getTextLang("txt_session")+": #"+e.SessionId,this.tableSpr.spriteFrame=this.listTableSpr[e.Currency],this.lblDeck.string=e.Deck,[500,5e3,5e4].includes(this.minBet)?this.amounts=this.amounts_2:this.amounts=this.amounts_1,this.chipNodes.children.forEach((function(e,i){e.getChildByName("text").getComponent(u).string=A.formatMoney(t.amounts[i]*t.minBet,!0),0==i&&e.getChildByName("chip").emit(l.EventType.TOUCH_END)}));var i=e.Players;if(i&&i.length>0)for(var n=0;n<i.length;n++)i[n].AccountId!=S.Login.AccountID+":"+S.Login.PortalID?this.randomFreePlayer().set(i[n]):this.mePlayer.set(i[n]);this.updateStatistic(),e.Session&&this.handleSession(e.Session)},r.handleSession=function(e){var t=this;this.unscheduleAllCallbacks();var i=this.dealerNode.getChildByName("NORMAL"),n=this.dealerNode.getChildByName("BET");if(i.active=!1,n.active=!1,this.labelDealerNotify.string="Baccarat",e.Phrase==Dt.NONE)return i.active=!0,void i.getComponent(b).play();if(this.countdownSecond.node.parent.active=!1,e.Phrase==Dt.BET){this.updateTimeout(e.Timeout),this.flagLog++,this.betLogs=this.betLogs.filter((function(e){return e.flag==t.flagLog-1})),n.active=!0,n.getComponent(b).play();var a=0==this.currency?P.instance.getTextLang("txt_coin"):"Tipzo",r=[P.instance.getTextLang("ca157"),P.instance.getTextLang("ca148")+" "+A.formatNumber(10*this.minBet)+" "+a+" "+P.instance.getTextLang("ca156"),P.instance.getTextLang("ca150")+" "+A.formatNumber(this.minBet)+" "+a+" "+P.instance.getTextLang("ca151"),P.instance.getTextLang("ca148")+" "+A.formatNumber(100*this.minBet)+" "+a+" "+P.instance.getTextLang("ca155")],o=0;this.schedule((function(){var e=t.labelDealerNotify.node.parent,i=e.getComponent(m)||e.addComponent(m);f(i).to(.5,{opacity:0}).call((function(){t.labelDealerNotify.string=r[o],++o>=r.length&&(o=0)})).to(.2,{opacity:255}).start()}),2.5),this.nodeDisableClearBet.active=!0,this.nodeDisableRebet.active=0==this.betLogs.length,this.nodeDisableBetX2.active=0==this.betLogs.length,this.nodeDisableFinishBet.active=!0,this.playerCards[0].active=!1,this.bankerCards[0].active=!1,this.playerCards[1].active=!1,this.bankerCards[1].active=!1,this.playerCards[2].active=!1,this.bankerCards[2].active=!1,this.playerCorner.active=!1,this.bankerCorner.active=!1,this.playerCardSum.active=!1,this.bankerCardSum.active=!1,this.playerWinText.active=!1,this.bankerWinText.active=!1,p.stopAllByTarget(this.bankerWinText),p.stopAllByTarget(this.playerWinText),this.playerCardSum.getComponentInChildren(u).string="",this.bankerCardSum.getComponentInChildren(u).string="",this.chipContainer.removeAllChildren();for(var l=0;l<this.betPositions.length;l++){var s=this.betPositions[l].getChildByName("WIN");s.active=!1;var c=s.getChildByName("p");c&&p.stopAllByTarget(c)}for(var h=0;h<this.lblBetPositions.length;h++)this.lblBetPositions[h].string="0",this.lblBetPositions[h].node.active=!1;this.betValues=[],[this.mePlayer].concat(this.players).forEach((function(e){e.boxWin.active=!1,e.isWin=!1,e.hideReady(),e.hideRegisterQuit(),e.hideWinAnimation()}))}if(e.Phrase==Dt.CHIA_BAI&&(i.active=!0,i.getComponent(b).play(),[this.mePlayer].concat(this.players).forEach((function(e){e.hideReady()})),this.nodeDisableClearBet.active=!0,this.nodeDisableRebet.active=!0,this.nodeDisableBetX2.active=!0,this.nodeDisableFinishBet.active=!0,this.labelDealerNotify.string=P.instance.getTextLang("ca110"),this.moveCardFromMachine(this.playerCards[0]),this.scheduleOnce((function(){t.moveCardFromMachine(t.bankerCards[0])}),.5),this.scheduleOnce((function(){t.moveCardFromMachine(t.playerCards[1],e.PlayerHand.Cards[1])}),1),this.scheduleOnce((function(){t.moveCardFromMachine(t.bankerCards[1],e.BankerHand.Cards[1],!1,!0)}),1.5),this.scheduleOnce((function(){t.flipCard(t.playerCards[0],e.PlayerHand.Cards[0]),t.playerCardSum.active=!0,t.bankerCardSum.active=!0}),2),this.scheduleOnce((function(){t.flipCard(t.bankerCards[0],e.BankerHand.Cards[0],!0)}),2.5),this.scheduleOnce((function(){t.flipCorner(t.playerCorner,e.PlayerHand.Sum)}),3),this.scheduleOnce((function(){t.flipCorner(t.bankerCorner,e.BankerHand.Sum,!0)}),4.5)),e.Phrase==Dt.RESULT){this.labelDealerNotify.string=P.instance.getTextLang("me18"),i.active=!0,i.getComponent(b).play(),this.updateStatistic();var d=e.Result;switch(this.playerCardSum.getComponentInChildren(u).string=d.PlayerSum+"",this.bankerCardSum.getComponentInChildren(u).string=d.BankerSum+"",d.Winner){case xt.NONE:break;case xt.BANKER_WIN:this.showResultGate(_t.BAKER),this.bankerWinText.active=!0;var g=this.bankerWinText.getComponent(m);f(this.bankerWinText).repeatForever(f().sequence(f().parallel(f(g).to(.4,{opacity:255},{easing:"sineInOut"}),f().to(.4,{scale:C(1.2,1.2,1.2)},{easing:"backOut"})),f().parallel(f(g).to(.4,{opacity:180},{easing:"sineInOut"}),f().to(.4,{scale:y.ONE},{easing:"backIn"})))).start();break;case xt.PLAYER_WIN:this.showResultGate(_t.PLAYER),this.playerWinText.active=!0;var v=this.playerWinText.getComponent(m);f(this.playerWinText).repeatForever(f().sequence(f().parallel(f(v).to(.4,{opacity:255},{easing:"sineInOut"}),f().to(.4,{scale:C(1.2,1.2,1.2)},{easing:"backOut"})),f().parallel(f(v).to(.4,{opacity:180},{easing:"sineInOut"}),f().to(.4,{scale:y.ONE},{easing:"backIn"})))).start();break;case xt.TIE:this.showResultGate(_t.TIE)}switch(d.Pair){case kt.NONE:break;case kt.BANKER_PAIR:this.showResultGate(_t.BANKER_PAIR);break;case kt.PLAYER_PAIR:this.showResultGate(_t.PLAYER_PAIR);break;case kt.BOTH:this.showResultGate(_t.BANKER_PAIR),this.showResultGate(_t.PLAYER_PAIR)}this.showResultPrize(e.Prizes)}},r.showResultGate=function(e){var t=this.betPositions[e-1].getChildByName("WIN");t.active=!0;var i=t.getChildByName("p");i&&f(i).by(1,{angle:360}).repeatForever().start()},r.isWinGate=function(e){return this.betPositions[e-1].getChildByName("WIN").active},r.updateTimeout=function(e){var t=this,i=e,n=0;this.countdownSecond.node.parent.active=!0,this.schedule((function(){n+=.05;var e=Math.min(n/i,1);t.progressSprite.fillRange=e,t.progressSprite.spriteFrame=e<.5?t.progressSpriteGreen:e<.8?t.progressSpriteYellow:t.progressSpriteRed,t.progressSprite.node.setScale(-1,1,1)}),.05),this.countdownSecond.string=e<10?"0"+e:e+"",this.schedule((function(){e<0?t.unscheduleAllCallbacks():(t.countdownSecond.string=e<10?"0"+e:e+"",e--)}),1)},r.showResultPrize=function(e){var t=this,i=new Map;e.forEach((function(e){var n=t.getAllPlayersById(e.AccountId);i.has(n.id)||i.set(n.id,n)})),i.forEach((function(e){e.isWin=!0,e.boxWin.active=!0,e.boxWin.getChildByName("win").active=!0,e.boxWin.getChildByName("lose").active=!1,e.showWinAnimation(),t.chipContainer.children.filter((function(t){return t.name.includes(e.id)})).forEach((function(i){var n=parseInt(i.name.replace(e.id+"__",""));t.isWinGate(n)?t.moveChipToPlayer(i,e,!0):t.moveChipToDealer(i)}))}));var n=e.map((function(e){return e.AccountId}));[this.mePlayer].concat(this.players).filter((function(e){return""!==e.id&&!n.includes(e.id)})).forEach((function(e){var i=!1;t.chipContainer.children.filter((function(t){return t.name.includes(e.id)})).forEach((function(e){i=!0,t.moveChipToDealer(e)})),t.scheduleOnce((function(){i&&(e.boxWin.active=!0,e.boxWin.getChildByName("win").active=!1,e.boxWin.getChildByName("lose").active=!0)}),.5)}))},r.randomFreePlayer=function(){for(var e=0;e<this.players.length;e++)if(""==this.players[e].id)return this.players[e];return null},r.getPlayerById=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].id==e)return this.players[t];return null},r.getChipByAmount=function(e){var t=this;return this.chipNodes.children.find((function(i,n){return t.amounts[n]===e/t.minBet})).getChildByName("chip")},r.getAllPlayersById=function(e){return[this.mePlayer].concat(this.players).find((function(t){return t.id===e}))},r.toggleMenu=function(){this.boxSettingContainer.active=!this.boxSettingContainer.active},r.clearBetting=function(){var e=this;this.nodeDisableClearBet.active||T.getInstance().send("ClearBetting",[],(function(t){t.c<0?e.showToast(T.getErrMsg(t.c)):(e.chipContainer.children.filter((function(t){return t.name.includes(e.mePlayer.id)})).forEach((function(t){e.moveChipToPlayer(t,e.mePlayer)})),e.nodeDisableClearBet.active=!0,e.nodeDisableRebet.active=!0,e.nodeDisableBetX2.active=!0,e.nodeDisableFinishBet.active=!0,e.betLogs=[],e.mePlayer.setCoin(t.r.balance),e.cancelBet(t.r.id))}))},r.x2Betting=function(){var e=this;this.nodeDisableBetX2.active||(this.actBetFromBetLogs(),setTimeout((function(){e.actBetFromBetLogs()}),500))},r.reLastBet=function(){this.nodeDisableRebet.active||this.actBetFromBetLogs()},r.actBetFromBetLogs=function(){var e=this;this.betLogs.forEach((function(t){t.flag==e.flagLog-1&&e.actBet(t.amount,t.gate)}))},r.actBet=function(e,t){var i=this;T.getInstance().send("Bet",[e,t],(function(e){e.c<0?i.showToast(T.getErrMsg(e.c)):(i.nodeDisableClearBet.active=!1,i.nodeDisableRebet.active=!0,i.nodeDisableBetX2.active=!0,i.nodeDisableFinishBet.active=!1,i.placeBet(i.mePlayer,e.r.amount,e.r.gate),i.mePlayer.setCoin(e.r.balance),i.saveBetValues(e.r.id,e.r.amount,e.r.gate),i.betLogs.push({amount:e.r.amount,gate:e.r.gate,flag:i.flagLog}))}))},r.finishBetting=function(){var e=this;this.nodeDisableFinishBet.active||T.getInstance().send("FinishBetting",[],(function(t){t.c<0?e.showToast(T.getErrMsg(t.c)):e.mePlayer.showReady()}))},r.updateStatistic=function(){var e=this;this.listCauMini.removeAllChildren(),T.getInstance().send("GetGameHistory",[this.roomId],(function(t){t.c<0?e.showToast(T.getErrMsg(t.c)):e.drawCau(t.r)}))},r.closePlay=function(){var e=this;T.getInstance().send("ExitRoom",[],(function(t){if(0==t.c)return T.getInstance().dontReceive(),N.send(N.USER_UPDATE_COIN),void e.node.destroy();t.r.status?(e.mePlayer.showRegisterQuit(),e.showToast(P.instance.getTextLang("me8"))):(e.mePlayer.hideRegisterQuit(),e.showToast(P.instance.getTextLang("me9")))}))},r.placeBet=function(e,t,i){var n=v(this.getChipByAmount(t));n.setScale(.5,.5,.5),this.chipContainer.addChild(n);var a=e.avatarNode.getComponent(B).convertToWorldSpaceAR(y.ZERO),r=this.betPositions[i-1].getComponent(B).convertToWorldSpaceAR(y.ZERO),o=this.node.getComponent(B).convertToNodeSpaceAR(new y(a.x,a.y,0)),l=this.node.getComponent(B).convertToNodeSpaceAR(new y(r.x,r.y,0)),s=this.chipContainer.children.filter((function(e){return y.distance(e.getPosition(),l)<=10}));if(s.length>0){var c=s.length%5*10,u=-10*Math.floor(s.length/5);l.x+=c,l.y+=u}n.position=o,n.name=e.id+"__"+i,f(n).to(.5,{position:l},{easing:"sineOut"}).start()},r.showToast=function(e){var t=this;this.lblToast.string=e,this.lblToast.node.active=!0,this.scheduleOnce((function(){t.lblToast.node.active=!1}),2)},r.showBoxSoiCau=function(){this.boxSoiCau.active=!0},r.hiddenBoxSoiCau=function(){this.boxSoiCau.active=!1},r.showBoxChat=function(){var e=this;P.instance.inactivityTimer=0,null==this.chatInGame?E.loadPrefabPopup("prefabs/ChatInGame",(function(t){e.chatInGame=v(t).getComponent("ChatInGame"),e.node.addChild(e.chatInGame.node),e.chatInGame.show(S.InGameIds.Baccarat)})):this.chatInGame.show(S.InGameIds.Baccarat)},r.actShowPopupRank=function(){var e=v(this.popupRank);this.popupContainer.addChild(e),e.getComponent("Casino.PopupRank").showDetail(this.currency,S.InGameIds.Baccarat)},r.drawCau=function(e){var t=this;this.listCauLeft.removeAllChildren(),this.listCauRight.removeAllChildren(),this.listCauMini.removeAllChildren();var i=[0,0,0,0,0];e.forEach((function(e){var n=e.Winner,a=e.Pair,r=e.BankerSum,o=e.PlayerSum,l=n===xt.BANKER_WIN?r:o;i[n-1]++;var s=function(e,t,i){var a=v(e);if(a.getComponent(c).spriteFrame=t,n===xt.TIE&&(a.getComponentInChildren(u).node.active=!1),i){var r=a.getComponentInChildren(u);switch(r.string=i,n){case xt.BANKER_WIN:r.color=g.BLACK.fromHEX("#f72373");break;case xt.PLAYER_WIN:r.color=g.BLACK.fromHEX("#1300cb")}}return a};t.listCauMini.addChild(s(t.itemCauMini,t.cauSpr[n-1])),t.listCauRight.addChild(s(t.itemCauRight,t.cauSpr[n-1])),t.listCauLeft.addChild(s(t.itemCauLeft,t.cauLeftSpr[n-1],l)),a!==kt.BANKER_PAIR&&a!==kt.BOTH||(i[3]++,t.listCauLeft.addChild(s(t.itemCauLeft,t.cauLeftSpr[3],l))),a!==kt.PLAYER_PAIR&&a!==kt.BOTH||(i[4]++,t.listCauLeft.addChild(s(t.itemCauLeft,t.cauLeftSpr[4],l)))})),this.listLabelCau.forEach((function(e,n){e.string=t.LABEL_CAU[n]+": "+i[n]}))},r.moveChipToDealer=function(e){f(e).to(.5,{position:this.dealerNode.position}).call((function(){return e.destroy()})).start()},r.moveChipToPlayer=function(e,t,i){var n=this;void 0===i&&(i=!1);var a=t.node.position.clone(),r=e.position.clone();if(i){for(var o=function(){var t=v(e);t.position=n.dealerNode.position,n.chipContainer.addChild(t),f(t).delay(.05*l).to(.3,{position:r}).call((function(){return t.destroy()})).start()},l=0;l<10;l++)o();f(e).delay(.6).to(.4,{position:a}).call((function(){return e.destroy()})).start()}else f(e).to(.5,{position:a}).call((function(){return e.destroy()})).start()},r.moveCardFromMachine=function(e,t,i,n){var a=this;void 0===t&&(t=-1),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.baccaratMachine.getComponent(B).convertToWorldSpaceAR(y.ZERO),o=e.parent.getComponent(B).convertToNodeSpaceAR(r),l=e.position.clone();e.getComponent(c).spriteFrame=this.cardBack,e.position=o,e.active=!0,f(e).to(.5,{position:l}).call((function(){if(-1!==t){if(i)return void a.flipCard(e,t);a.playerCorner.active=!0,n&&(a.bankerCorner.active=!0),e.getComponent(c).spriteFrame=a.cardFronts[t]}})).start()},r.flipCard=function(e,t,i){var n=this;void 0===i&&(i=!1),f(e).to(.2,{scale:C(0,.65,.65)}).call((function(){e.getComponent(c).spriteFrame=n.cardFronts[t]})).to(.3,{scale:C(.65,.65,.65)}).call((function(){i?n.bankerCardSum.getComponentInChildren(u).string=n.getCardValue(t)+"":n.playerCardSum.getComponentInChildren(u).string=n.getCardValue(t)+""})).start()},r.getCardValue=function(e){if(e<0||e>51)return-1;var t=e%13;return 12===t?1:t>=0&&t<=7?t+2:0},r.flipCorner=function(e,t,i){var n=this;void 0===i&&(i=!1);var a=e.getChildByName("flip");f(a).to(1.2,{x:30}).to(.3,{x:85}).call((function(){e.active=!1,a.x=0,i?n.bankerCardSum.getComponentInChildren(u).string=t+"":n.playerCardSum.getComponentInChildren(u).string=t+""})).start()},r.showGuide=function(){var e=this;this.guideBG.children[0].children.forEach((function(t){null!=t.getChildByName("VIP")&&null!=t.getChildByName("NORMAL")&&(t.getChildByName("VIP").active=1==e.currency,t.getChildByName("NORMAL").active=0==e.currency)})),this.guideBG.active=!0,this.guide.active=!0},r.hideGuide=function(){this.guideBG.active=!1,this.guide.active=!1},t}(I)).instance=null,Le=t((Ee=Nt).prototype,"roomDetail",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(Ee.prototype,"listTableSpr",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xe=t(Ee.prototype,"tableSpr",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(Ee.prototype,"chipNodes",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(Ee.prototype,"boxSettingContainer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(Ee.prototype,"lblToast",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Ee.prototype,"players",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),We=t(Ee.prototype,"mePlayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(Ee.prototype,"lblDeck",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Ee.prototype,"nodeDisableClearBet",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(Ee.prototype,"nodeDisableRebet",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Ee.prototype,"nodeDisableBetX2",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(Ee.prototype,"nodeDisableFinishBet",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(Ee.prototype,"baccaratMachine",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(Ee.prototype,"playerCardSum",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(Ee.prototype,"bankerCardSum",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(Ee.prototype,"playerCards",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=t(Ee.prototype,"bankerCards",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qe=t(Ee.prototype,"playerCorner",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(Ee.prototype,"bankerCorner",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(Ee.prototype,"cardBack",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Ee.prototype,"cardFronts",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$e=t(Ee.prototype,"chipContainer",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(Ee.prototype,"betPositions",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tt=t(Ee.prototype,"lblBetPositions",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=t(Ee.prototype,"countdownSecond",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Ee.prototype,"progressSprite",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(Ee.prototype,"progressSpriteGreen",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(Ee.prototype,"progressSpriteYellow",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=t(Ee.prototype,"progressSpriteRed",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=t(Ee.prototype,"boxSoiCau",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=t(Ee.prototype,"popupRank",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=t(Ee.prototype,"popupContainer",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=t(Ee.prototype,"lblSessionCau",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=t(Ee.prototype,"listCauMini",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=t(Ee.prototype,"itemCauMini",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=t(Ee.prototype,"listLabelCau",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gt=t(Ee.prototype,"listCauLeft",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=t(Ee.prototype,"itemCauLeft",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=t(Ee.prototype,"listCauRight",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=t(Ee.prototype,"itemCauRight",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=t(Ee.prototype,"cauSpr",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yt=t(Ee.prototype,"cauLeftSpr",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vt=t(Ee.prototype,"dealerNode",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=t(Ee.prototype,"playerWinText",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=t(Ee.prototype,"bankerWinText",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=t(Ee.prototype,"labelDealerNotify",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=t(Ee.prototype,"betTableVip",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=t(Ee.prototype,"betTableNormal",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=t(Ee.prototype,"guideBG",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=t(Ee.prototype,"guide",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=Ee))||Ae)||Ae));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Baccarat', 'chunks:///_virtual/Baccarat'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});