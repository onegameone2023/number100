System.register("chunks:///_virtual/Sicbo",["./Sicbo.Hover.ts","./Sicbo.Play.ts","./Sicbo.PopupJackpot.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Sicbo.Hover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Casino.Lobby.ts","./Sicbo.Play.ts","./Utils.ts"],(function(e){var t,n,o,i,r,a,s,c,l,u,f,d,p,m,g,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.TextAsset,c=e.Node,l=e.game,u=e.sys,f=e.Label,d=e.UITransform,p=e.Vec3,m=e.Component},function(e){g=e.default},function(e){v=e.default},function(e){y=e.Utils}],execute:function(){var N,b,h,C,_,S,B,E,x;r._RF.push({},"c7459f1RNlD5pfODd1rWNOn","Sicbo.Hover",void 0);var T=a.ccclass,L=a.property,A=a.menu;e("default",(N=A("Sicbo/Hover"),b=L(s),h=L(c),C=L(c),T(_=N((B=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"json",B,i(t)),o(t,"betPositions",E,i(t)),o(t,"infoNode",x,i(t)),t.texts=[],t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.texts=JSON.parse(this.json.text),this.betPositions.children.forEach((function(t){var n=parseInt(t.name);if(!isNaN(n)){var o=e.texts.find((function(e){return e.id===n})),i=g.instance.isTableVip?t.getChildByName("hover"):t.getChildByName("hoverNormal");t.on(c.EventType.MOUSE_ENTER,(function(){l.canvas.style.cursor="pointer",i&&(i.active=!0);var r=v.instance.betAmountLogs.find((function(e){return e.gate===n})),a=r?r.amount:0,s=v.instance.allBetAmountLogs.find((function(e){return e.gate===n})),c=s?s.amount:0,m=u.localStorage.getItem("langCode")||"vi";e.infoNode.getChildByName("description").getComponent(f).string="vi"===m?o.description:o["description_"+m]||o.description,e.infoNode.getChildByName("fund_rate").getComponent(f).string="1:"+o.fund_rate,e.infoNode.getChildByName("max_factor").getComponent(f).string=y.formatNumber(o.max_factor*v.instance.minBet),e.infoNode.getChildByName("me_bet").getComponent(f).string=y.formatMoney(a,!0),e.infoNode.getChildByName("total_bet").getComponent(f).string=y.formatMoney(c,!0);var g=t.getComponent(d).convertToWorldSpaceAR(p.ZERO),N=e.infoNode.parent.parent.getComponent(d).convertToNodeSpaceAR(g);e.infoNode.setPosition(N.x+180,N.y-120),e.infoNode.active=!0})),t.on(c.EventType.MOUSE_LEAVE,(function(){i&&(i.active=!1),l.canvas.style.cursor="default",e.infoNode.active=!1}))}}))},t}(m)).prototype,"json",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(S.prototype,"betPositions",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(S.prototype,"infoNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=S))||_)||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Sicbo.Play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Casino.Player.ts","./App.ts","./SicboSignalRClient.ts","./Casino.Lobby.ts","./Config.ts","./BroadcastListener.ts","./Utils.ts","./BundleControl.ts"],(function(e){var t,i,n,o,a,r,l,s,c,u,h,p,g,d,m,f,b,y,C,v,B,S,w,N,T,I,D,P,R,L,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.SpriteFrame,c=e.Sprite,u=e.Label,h=e.Prefab,p=e.EditBox,g=e.Toggle,d=e.Color,m=e.sys,f=e.Tween,b=e.tween,y=e.Animation,C=e.UIOpacity,v=e.instantiate,B=e.UITransform,S=e.Vec3,w=e.Component},function(e){N=e.default},function(e){T=e.default},function(e){I=e.default},function(e){D=e.default},function(e){P=e.default},function(e){R=e.BroadcastReceiver},function(e){L=e.Utils},function(e){E=e.default}],execute:function(){var x,z,A,F,k,_,G,M,J,O,V,U,W,j,X,H,Q,Y,Z,K,q,$,ee,te,ie,ne,oe,ae,re,le,se,ce,ue,he,pe,ge,de,me,fe,be,ye,Ce,ve,Be,Se,we,Ne,Te,Ie,De,Pe,Re,Le,Ee,xe,ze,Ae,Fe,ke,_e,Ge,Me,Je,Oe,Ve,Ue,We,je,Xe,He,Qe,Ye,Ze,Ke,qe,$e,et,tt,it,nt,ot,at,rt,lt,st,ct,ut,ht,pt,gt,dt,mt,ft,bt,yt,Ct,vt,Bt;a._RF.push({},"22072vS6GFISLkp3V0/4J2/","Sicbo.Play",void 0);var St=r.ccclass,wt=r.property,Nt=r.menu,Tt=function(e){return e[e.NONE=0]="NONE",e[e.BETTING=1]="BETTING",e[e.RESULT=2]="RESULT",e}(Tt||{});e("default",(x=Nt("Sicbo/Play"),z=wt(l),A=wt([s]),F=wt(c),k=wt(u),_=wt([N]),G=wt(N),M=wt(l),J=wt(l),O=wt(l),V=wt(u),U=wt(c),W=wt(s),j=wt(s),X=wt(s),H=wt(l),Q=wt(l),Y=wt(l),Z=wt(l),K=wt(l),q=wt(l),$=wt(h),ee=wt(h),te=wt(l),ie=wt(l),ne=wt(l),oe=wt(l),ae=wt(l),re=wt([s]),le=wt(p),se=wt(l),ce=wt(l),ue=wt(l),he=wt(l),pe=wt([s]),ge=wt(g),de=wt(l),me=wt(u),fe=wt(u),be=wt(u),ye=wt(u),Ce=wt(l),ve=wt(u),Be=wt([u]),Se=wt(d),we=wt(d),Ne=wt(l),Te=wt(l),St(Ie=x(((Bt=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"roomDetail",Pe,o(t)),n(t,"listTableSpr",Re,o(t)),n(t,"tableSpr",Le,o(t)),n(t,"lblToast",Ee,o(t)),n(t,"players",xe,o(t)),n(t,"mePlayer",ze,o(t)),n(t,"chipNodes",Ae,o(t)),t.amounts=[],t.amounts_1=[1,5,10,50,100],t.amounts_2=[1,2,10,20,100],t.minBet=0,t.sessionId=0,t.roomId=void 0,t.roomValue=void 0,t.currency=void 0,n(t,"chipContainer",Fe,o(t)),n(t,"betPositions",ke,o(t)),n(t,"countdownSecond",_e,o(t)),n(t,"progressSprite",Ge,o(t)),n(t,"progressSpriteGreen",Me,o(t)),n(t,"progressSpriteYellow",Je,o(t)),n(t,"progressSpriteRed",Oe,o(t)),n(t,"nodeDisableClearBet",Ve,o(t)),n(t,"nodeDisableRebet",Ue,o(t)),n(t,"nodeDisableBetX2",We,o(t)),n(t,"nodeDisableFinishBet",je,o(t)),t.amountSelected=0,t.betLogs=[],t.flagLog=-1,n(t,"boxChat",Xe,o(t)),n(t,"boxSoiCau",He,o(t)),n(t,"popupRank",Qe,o(t)),n(t,"popupJackpot",Ye,o(t)),n(t,"popupContainer",Ze,o(t)),n(t,"listCauMini",Ke,o(t)),n(t,"itemCauMini",qe,o(t)),n(t,"listCauDetail",$e,o(t)),n(t,"itemCauDetail",et,o(t)),n(t,"listCauSpr",tt,o(t)),n(t,"editBoxChat",it,o(t)),n(t,"dealerNode",nt,o(t)),n(t,"resultContainer",ot,o(t)),n(t,"aminResult",at,o(t)),n(t,"resultNode",rt,o(t)),n(t,"listSprDice",lt,o(t)),n(t,"checkboxAutoShow",st,o(t)),n(t,"boxSettingContainer",ct,o(t)),n(t,"labelTotalBet",ut,o(t)),t.totalBet=0,n(t,"lblJackpotFund",ht,o(t)),n(t,"lblJackpotRate",pt,o(t)),n(t,"lblJackpotValue",gt,o(t)),n(t,"jackpotNode",dt,o(t)),n(t,"labelDealerNotify",mt,o(t)),n(t,"labels",ft,o(t)),n(t,"vipColor",bt,o(t)),n(t,"normalColor",yt,o(t)),n(t,"guideBG",Ct,o(t)),n(t,"guide",vt,o(t)),t.winGates=[],t.betAmountLogs=[],t.allBetAmountLogs=[],t.chatInGame=null,t}i(t,e);var a=t.prototype;return a.init=function(e,t){this.roomValue=e,this.currency=t},a.start=function(){var e=this;t.instance=this,T.instance.showLoading(!0),I.getInstance().send("EnterRoom",[this.roomValue,this.currency],(function(t){if(T.instance.showLoading(!1),t.c<0)return T.instance.alertDialog.showMsg(I.getErrMsg(t.c)),void e.node.destroy();e.joinRoom(t.r),null===m.localStorage.getItem("CA_SB_first_time")&&(m.localStorage.setItem("CA_SB_first_time","1"),e.showGuide())})),this.updateLabelColors(),this.flagLog=-1},a.updateLabelColors=function(){var e,t,i=null!=(e=null==(t=D.instance)?void 0:t.isTableVip)&&e?this.vipColor:this.normalColor;this.labels.forEach((function(e){e&&(e.color=i)}))},a.onLoad=function(){var e=this;this.chipNodes.children.forEach((function(t,i){var n=t.getChildByName("chip"),o=t.getChildByName("text");n.on(l.EventType.TOUCH_END,(function(){if(n._isSelected)return f.stopAllByTarget(n),n.y=0,o.getComponent(u).color=(new d).fromHEX("#FFFFFF"),void(n._isSelected=!1);e.chipNodes.children.forEach((function(e){var t=e.getChildByName("chip"),i=e.getChildByName("text");f.stopAllByTarget(t),t.y=0,i.getComponent(u).color=(new d).fromHEX("#FFFFFF"),t._isSelected=!1})),o.getComponent(u).color=(new d).fromHEX("#FFF000"),n._isSelected=!0,e.amountSelected=e.amounts[i]*e.minBet,b(n).repeatForever(b().to(.3,{y:15}).to(.3,{y:0})).start()}))})),this.betPositions.children.forEach((function(t){var i=parseInt(t.name);isNaN(i)||t.on(l.EventType.TOUCH_END,(function(){0!=e.amountSelected&&e.actBet(e.amountSelected,i)}))})),I.getInstance().receive("roomData",(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):(e.sessionId=t.r.SessionId,e.roomDetail.getChildByName("RoomSession").getComponent(u).string=T.instance.getTextLang("txt_session")+": #"+e.sessionId,e.handleSession(t.r.Session),t.r.Players.forEach((function(i){var n=e.getAllPlayersById(i.AccountId);n&&e.scheduleOnce((function(){n.setCoin(i.Balance)}),t.r.Session.Phrase==Tt.RESULT?3:0)})))})),I.getInstance().receive("joinRoom",(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):t.r.AccountId!=P.Login.AccountID+":"+P.Login.PortalID&&e.randomFreePlayer().set(t.r)})),I.getInstance().receiveArray("recieveMessage",(function(t,i,n){e.getAllPlayersById(t).showChatMsg(n)})),I.getInstance().receive("leaveRoom",(function(t){if(t.c<0)e.showToast(I.getErrMsg(t.c));else for(var i=0;i<t.r.length;i++){var n=t.r[i];n.id==P.Login.AccountID+":"+P.Login.PortalID?(n.reason<0&&T.instance.alertDialog.showMsg(T.instance.getTextLang("ca"+n.reason)),I.getInstance().dontReceive(),R.send(R.USER_UPDATE_COIN),e.node.destroy()):e.getPlayerById(n.id).leave()}})),I.getInstance().receive("registerLeavingRoom",(function(t){var i=e.getAllPlayersById(t.r.id);t.r.status?i.showRegisterQuit():i.hideRegisterQuit()})),I.getInstance().receive("rejectBetting",(function(t){var i=t.map((function(t){return e.getPlayerById(t).lblNickname.string})).join(", ");e.showToast("Reject betting from "+i)})),I.getInstance().receive("clearBetting",(function(t){var i=t.r.id,n=e.getPlayerById(i);e.chipContainer.children.filter((function(e){return e.name.includes(i)})).forEach((function(t){e.moveChipToPlayer(t,e.mePlayer)})),n.setCoin(t.r.balance)})),I.getInstance().receive("confirmBetting",(function(t){e.getAllPlayersById(t.r.id).showReady()})),I.getInstance().receive("playerOtherDevice",(function(t){e.showToast(I.getErrMsg(t))})),I.getInstance().receive("connectionChanged",(function(t){var i=e.getAllPlayersById(t.r.id);e.showToast(i.lblNickname.string+" "+(t.status?"connected":"disconnected")),t.status&&i.leave()})),I.getInstance().receive("playerBet",(function(t){if(t.c<0)e.showToast(I.getErrMsg(t.c));else{var i=e.getPlayerById(t.r.id);i.setCoin(t.r.balance),e.placeBet(i,t.r.amount,t.r.gate)}}))},a.getChipByAmount=function(e){var t=this;return this.chipNodes.children.find((function(i,n){return t.amounts[n]===e/t.minBet})).getChildByName("chip")},a.joinRoom=function(e){var t=this;this.roomId=e.Id,this.sessionId=e.SessionId,this.minBet=e.Value,this.roomDetail.getChildByName("RoomTable").getComponent(u).string=(0==e.Currency?T.instance.getTextLang("tb113"):T.instance.getTextLang("tb112"))+": "+e.Id,this.roomDetail.getChildByName("RoomValue").getComponent(u).string=T.instance.getTextLang("iap38")+": "+L.formatMoney(e.Value)+" "+(0==e.Currency?T.instance.getTextLang("txt_coin"):"Tipzo"),this.roomDetail.getChildByName("RoomSession").getComponent(u).string=T.instance.getTextLang("txt_session")+": #"+e.SessionId,this.tableSpr.spriteFrame=this.listTableSpr[e.Currency],[500,5e3,5e4].includes(this.minBet)?this.amounts=this.amounts_2:this.amounts=this.amounts_1,this.chipNodes.children.forEach((function(e,i){e.getChildByName("text").getComponent(u).string=L.formatMoney(t.amounts[i]*t.minBet,!0),0==i&&e.getChildByName("chip").emit(l.EventType.TOUCH_END)}));var i=e.Players;if(i&&i.length>0)for(var n=0;n<i.length;n++)i[n].AccountId!=P.Login.AccountID+":"+P.Login.PortalID?this.randomFreePlayer().set(i[n]):this.mePlayer.set(i[n]);this.updateStatistic(),this.checkJackpot(),e.Session&&this.handleSession(e.Session)},a.handleSession=function(e){var t=this;this.unscheduleAllCallbacks();var i=this.dealerNode.getChildByName("NORMAL"),n=this.dealerNode.getChildByName("BET");if(n.active=!1,i.active=!1,this.labelDealerNotify.string="SICBO",e.Phrase==Tt.NONE)return i.active=!0,void i.getComponent(y).play();if(e.Timeout&&this.updateTimeout(e.Timeout),e.Phrase==Tt.BETTING){this.winGates=[],this.flagLog++,this.betLogs=this.betLogs.filter((function(e){return e.flag==t.flagLog-1})),this.betAmountLogs=[],this.allBetAmountLogs=[];var o=0==this.currency?T.instance.getTextLang("txt_coin"):"Tipzo",a=[T.instance.getTextLang("ca157"),T.instance.getTextLang("ca150")+" "+L.formatNumber(this.minBet)+" "+o+" "+T.instance.getTextLang("ca151"),T.instance.getTextLang("ca168")],r=0;this.schedule((function(){var e=t.labelDealerNotify.node.parent,i=e.getComponent(C)||e.addComponent(C);b(i).to(.5,{opacity:0}).call((function(){t.labelDealerNotify.string=a[r],++r>=a.length&&(r=0)})).to(.2,{opacity:255}).start()}),2.5),this.countdownSecond.node.active=!0,this.totalBet=0,this.labelTotalBet.string=T.instance.getTextLang("ca164")+" "+this.totalBet,n.active=!0,n.getComponent(y).play(),this.jackpotNode.active=!1,this.resultContainer.active=!1,this.chipContainer.removeAllChildren(),[this.mePlayer].concat(this.players).forEach((function(e){e.boxWin.active=!1,e.isWin=!1,e.stopJackpot(),e.hideReady(),e.hideRegisterQuit(),e.hideWinAnimation()})),this.nodeDisableClearBet.active=!0,this.nodeDisableRebet.active=0==this.betLogs.length,this.nodeDisableBetX2.active=0==this.betLogs.length,this.nodeDisableFinishBet.active=!0,this.betPositions.children.forEach((function(e){var t=D.instance.isTableVip?e.getChildByName("hover"):e.getChildByName("hoverNormal");t&&(t.active=!1,f.stopAllByTarget(t.getComponent(C))),e.getChildByName("active")&&(e.getChildByName("active").active=!1)})),this.hiddenBoxSoiCau()}if(e.Phrase==Tt.RESULT){this.labelDealerNotify.string=T.instance.getTextLang("me18"),[this.mePlayer].concat(this.players).forEach((function(e){e.hideReady()})),this.countdownSecond.node.active=!1,i.active=!0,i.getComponent(y).play(),this.nodeDisableClearBet.active=!0,this.nodeDisableRebet.active=!0,this.nodeDisableBetX2.active=!0,this.nodeDisableFinishBet.active=!0,this.resultContainer.active=!0,this.aminResult.active=!0,this.resultNode.active=!1;var l=this.resultNode.getChildByName("dice_1"),s=this.resultNode.getChildByName("dice_2"),h=this.resultNode.getChildByName("dice_3"),p=e.Result.Dices;l.getComponent(c).spriteFrame=this.listSprDice[p[0]-1],s.getComponent(c).spriteFrame=this.listSprDice[p[1]-1],h.getComponent(c).spriteFrame=this.listSprDice[p[2]-1],this.resultNode.getComponentInChildren(u).string=(p[0]+p[1]+p[2]).toString();var g=this.aminResult.getComponent(y);g.once(y.EventType.FINISHED,(function(){t.aminResult.active=!1,t.resultNode.active=!0,t.winGates=e.Result.WinGates||[],t.showResultPrize(e.Prizes),e.JackpotPrizes&&t.showResultJackpotPrize(e.JackpotPrizes),e.Result.WinGates.forEach((function(e){var i=t.betPositions.getChildByName(e.toString()),n=D.instance.isTableVip?i.getChildByName("hover"):i.getChildByName("hoverNormal");n&&(n.active=!0,b(n.getComponent(C)).repeatForever(b().to(.5,{opacity:50}).to(.5,{opacity:255})).start()),i.getChildByName("active")&&(i.getChildByName("active").active=!0)})),t.updateStatistic(),t.checkJackpot(),t.checkboxAutoShow.isChecked&&t.scheduleOnce((function(){t.showBoxSoiCau()}),1)})),g.play()}},a.updateTimeout=function(e){var t=this,i=e,n=0;this.schedule((function(){n+=.05;var e=Math.min(n/i,1);t.progressSprite.fillRange=e,t.progressSprite.spriteFrame=e<.5?t.progressSpriteGreen:e<.8?t.progressSpriteYellow:t.progressSpriteRed,t.progressSprite.node.setScale(-1,1,1)}),.05),this.countdownSecond.string=e<10?"0"+e:e+"",this.schedule((function(){e<0?t.unscheduleAllCallbacks():(t.countdownSecond.string=e<10?"0"+e:e+"",e--)}),1)},a.showResultPrize=function(e){var t=this,i=new Map;e.forEach((function(e){var n=t.getAllPlayersById(e.AccountId);i.has(n.id)||i.set(n.id,n)})),i.forEach((function(e){e.isWin=!0,e.boxWin.active=!0,e.boxWin.getChildByName("win").active=!0,e.boxWin.getChildByName("lose").active=!1,e.showWinAnimation(),t.chipContainer.children.filter((function(t){return t.name.includes(e.id)})).forEach((function(i){var n=parseInt(i.name.replace(e.id+"__",""));t.winGates.includes(n)?t.moveChipToPlayer(i,e):t.moveChipToDealer(i)}))}));var n=e.map((function(e){return e.AccountId}));[this.mePlayer].concat(this.players).filter((function(e){return""!==e.id&&!n.includes(e.id)})).forEach((function(e){var i=!1;t.chipContainer.children.filter((function(t){return t.name.includes(e.id)})).forEach((function(e){i=!0,t.moveChipToDealer(e)})),t.scheduleOnce((function(){i&&(e.boxWin.active=!0,e.boxWin.getChildByName("win").active=!1,e.boxWin.getChildByName("lose").active=!0)}),.5)}))},a.randomFreePlayer=function(){for(var e=0;e<this.players.length;e++)if(""==this.players[e].id)return this.players[e];return null},a.getPlayerById=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].id==e)return this.players[t];return null},a.getAllPlayersById=function(e){return[this.mePlayer].concat(this.players).find((function(t){return t.id===e}))},a.toggleMenu=function(){this.boxSettingContainer.active=!this.boxSettingContainer.active},a.clearBetting=function(){var e=this;this.nodeDisableClearBet.active||I.getInstance().send("ClearBetting",[],(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):(e.chipContainer.children.filter((function(t){return t.name.includes(e.mePlayer.id)})).forEach((function(t){e.moveChipToPlayer(t,e.mePlayer)})),e.nodeDisableClearBet.active=!0,e.nodeDisableRebet.active=!0,e.nodeDisableBetX2.active=!0,e.nodeDisableFinishBet.active=!0,e.betLogs=[],e.mePlayer.setCoin(t.r.balance))}))},a.finishBetting=function(){var e=this;this.nodeDisableFinishBet.active||I.getInstance().send("FinishBetting",[],(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):e.mePlayer.showReady()}))},a.x2Betting=function(){var e=this;this.nodeDisableBetX2.active||(this.actBetFromBetLogs(),setTimeout((function(){e.actBetFromBetLogs()}),500))},a.reLastBet=function(){this.nodeDisableRebet.active||this.actBetFromBetLogs()},a.actBetFromBetLogs=function(){var e=this;this.betLogs.forEach((function(t){t.flag==e.flagLog-1&&e.actBet(t.amount,t.gate)}))},a.actBet=function(e,t){var i=this;I.getInstance().send("Bet",[e,t],(function(e){e.c<0?i.showToast(I.getErrMsg(e.c)):(i.nodeDisableClearBet.active=!1,i.nodeDisableRebet.active=!0,i.nodeDisableBetX2.active=!0,i.nodeDisableFinishBet.active=!1,i.placeBet(i.mePlayer,e.r.amount,e.r.gate),i.mePlayer.setCoin(e.r.balance),i.betLogs.push({amount:e.r.amount,gate:e.r.gate,flag:i.flagLog}))}))},a.updateStatistic=function(){var e=this;this.listCauMini.removeAllChildren(),I.getInstance().send("GetGameHistory",[this.roomId],(function(t){t.c<0?e.showToast(I.getErrMsg(t.c)):e.drawCau(t.r)}))},a.closePlay=function(){var e=this;I.getInstance().send("ExitRoom",[],(function(t){if(0==t.c)return I.getInstance().dontReceive(),R.send(R.USER_UPDATE_COIN),void e.node.destroy();t.r.status?(e.mePlayer.showRegisterQuit(),e.showToast(T.instance.getTextLang("me8"))):(e.mePlayer.hideRegisterQuit(),e.showToast(T.instance.getTextLang("me9")))}))},a.placeBet=function(e,t,i){var n=this,o=v(this.getChipByAmount(t));o.setScale(.5,.5,.5),this.chipContainer.addChild(o);var a=e.avatarNode.getComponent(B).convertToWorldSpaceAR(S.ZERO),r=this.betPositions.getChildByName(i.toString()).getComponent(B).convertToWorldSpaceAR(S.ZERO),l=this.node.getComponent(B).convertToNodeSpaceAR(new S(a.x,a.y,0)),s=this.node.getComponent(B).convertToNodeSpaceAR(new S(r.x,r.y,0)),c=this.chipContainer.children.filter((function(e){return S.distance(e.getPosition(),s)<=10}));if(c.length>0){var u=c.length%5*10,h=-10*Math.floor(c.length/5);s.x+=u,s.y+=h}o.position=l,o.name=e.id+"__"+i,b(o).to(.5,{position:s},{easing:"sineOut"}).call((function(){if(n.totalBet+=t,n.labelTotalBet.string=T.instance.getTextLang("ca164")+" "+L.formatNumber(n.totalBet),e.id===n.mePlayer.id){var o=n.betAmountLogs.find((function(e){return e.gate===i}));o?o.amount+=t:n.betAmountLogs.push({gate:i,amount:t})}var a=n.allBetAmountLogs.find((function(e){return e.gate===i}));a?a.amount+=t:n.allBetAmountLogs.push({gate:i,amount:t})})).start()},a.showToast=function(e){var t=this;this.lblToast.string=e,this.lblToast.node.active=!0,setTimeout((function(){t.lblToast.node&&(t.lblToast.node.active=!1)}),2e3)},a.showBoxSoiCau=function(){this.boxSoiCau.active=!0},a.hiddenBoxSoiCau=function(){this.boxSoiCau.active=!1},a.showBoxChat=function(){var e=this;T.instance.inactivityTimer=0,null==this.chatInGame?E.loadPrefabPopup("prefabs/ChatInGame",(function(t){e.chatInGame=v(t).getComponent("ChatInGame"),e.node.addChild(e.chatInGame.node),e.chatInGame.show(P.InGameIds.Sicbo)})):this.chatInGame.show(P.InGameIds.Sicbo)},a.actShowPopupRank=function(){var e=v(this.popupRank);this.popupContainer.addChild(e),e.getComponent("Casino.PopupRank").showDetail(this.currency,P.InGameIds.Sicbo)},a.actShowPopupJackpot=function(){var e=v(this.popupJackpot);this.popupContainer.addChild(e),e.getComponent("Sicbo.PopupJackpot").show()},a.drawCau=function(e){var t=this;this.listCauMini.removeAllChildren(),this.listCauDetail.removeAllChildren(),(e=e.slice(-18)).forEach((function(e){var i=v(t.itemCauMini),n=v(t.itemCauDetail),o=!0;n.getChildByName("dice_1").getComponentInChildren(u).string=e[0].toString(),n.getChildByName("dice_2").getComponentInChildren(u).string=e[1].toString(),n.getChildByName("dice_3").getComponentInChildren(u).string=e[2].toString();var a=e[0]+e[1]+e[2];n.getChildByName("total").getComponentInChildren(u).string=a.toString(),e[0]==e[1]&&e[1]==e[2]?(i.getComponent(c).spriteFrame=t.listCauSpr[0],n.getChildByName("total").getComponentInChildren(c).spriteFrame=t.listCauSpr[0]):a>=4&&a<=10?(i.getComponent(c).spriteFrame=t.listCauSpr[1],n.getChildByName("total").getComponentInChildren(c).spriteFrame=t.listCauSpr[1]):a>=11&&a<=17?(i.getComponent(c).spriteFrame=t.listCauSpr[2],n.getChildByName("total").getComponentInChildren(c).spriteFrame=t.listCauSpr[2]):(n.getChildByName("total").getComponentInChildren(c).node.active=!1,n.getChildByName("total").getChildByName("text").getComponent(u).color=d.BLACK,o=!1),t.listCauDetail.addChild(n),o&&t.listCauMini.addChild(i)}))},a.checkJackpot=function(){var e=this;I.getInstance().send("GetJackpot",[this.currency,this.roomValue],(function(t){if(t.c<0)e.showToast(I.getErrMsg(t.c));else{var i=t.r;e.lblJackpotFund.string=i.jackpotFund.toLocaleString("vi-VN"),e.lblJackpotRate.string=i.rate/10+"%",e.lblJackpotValue.string=i.jackpotValue.toLocaleString("vi-VN")}}))},a.showResultJackpotPrize=function(e){var t=this;this.jackpotNode.active=!0,e.Details.forEach((function(e){var i;null==(i=[t.mePlayer].concat(t.players).find((function(t){return t.id.includes(e.AccountID)})))||i.activeJackpot()}))},a.moveChipToPlayer=function(e,t,i){void 0===i&&(i=!1);var n=b(e);i&&(n=n.to(.5,{position:this.dealerNode.position})),n.to(.5,{position:t.node.position}).call((function(){return e.destroy()})).start()},a.moveChipToDealer=function(e){b(e).to(.5,{position:this.dealerNode.position}).call((function(){return e.destroy()})).start()},a.showGuide=function(){var e=this;this.guideBG.children[0].children.forEach((function(t){null!=t.getChildByName("hover")&&null!=t.getChildByName("hoverNormal")&&(t.getChildByName("hover").active=1==e.currency,t.getChildByName("hoverNormal").active=0==e.currency)})),this.guideBG.active=!0,this.guide.active=!0},a.hideGuide=function(){this.guideBG.active=!1,this.guide.active=!1},t}(w)).instance=null,Pe=t((De=Bt).prototype,"roomDetail",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(De.prototype,"listTableSpr",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Le=t(De.prototype,"tableSpr",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(De.prototype,"lblToast",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(De.prototype,"players",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ze=t(De.prototype,"mePlayer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(De.prototype,"chipNodes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(De.prototype,"chipContainer",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(De.prototype,"betPositions",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(De.prototype,"countdownSecond",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(De.prototype,"progressSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(De.prototype,"progressSpriteGreen",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(De.prototype,"progressSpriteYellow",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(De.prototype,"progressSpriteRed",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(De.prototype,"nodeDisableClearBet",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(De.prototype,"nodeDisableRebet",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(De.prototype,"nodeDisableBetX2",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(De.prototype,"nodeDisableFinishBet",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(De.prototype,"boxChat",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(De.prototype,"boxSoiCau",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(De.prototype,"popupRank",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(De.prototype,"popupJackpot",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(De.prototype,"popupContainer",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(De.prototype,"listCauMini",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(De.prototype,"itemCauMini",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=t(De.prototype,"listCauDetail",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(De.prototype,"itemCauDetail",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(De.prototype,"listCauSpr",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=t(De.prototype,"editBoxChat",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(De.prototype,"dealerNode",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=t(De.prototype,"resultContainer",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(De.prototype,"aminResult",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(De.prototype,"resultNode",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=t(De.prototype,"listSprDice",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),st=t(De.prototype,"checkboxAutoShow",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=t(De.prototype,"boxSettingContainer",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=t(De.prototype,"labelTotalBet",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=t(De.prototype,"lblJackpotFund",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=t(De.prototype,"lblJackpotRate",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=t(De.prototype,"lblJackpotValue",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=t(De.prototype,"jackpotNode",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=t(De.prototype,"labelDealerNotify",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=t(De.prototype,"labels",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bt=t(De.prototype,"vipColor",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(6,191,182)}}),yt=t(De.prototype,"normalColor",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(222,179,44)}}),Ct=t(De.prototype,"guideBG",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=t(De.prototype,"guide",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=De))||Ie)||Ie));a._RF.pop()}}}));

System.register("chunks:///_virtual/Sicbo.PopupJackpot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dialog.ts","./SicboSignalRClient.ts","./Sicbo.Play.ts","./App.ts"],(function(t){var e,i,n,a,o,r,l,c,s,u,p,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Node,c=t.instantiate,s=t.Label},function(t){u=t.default},function(t){p=t.default},function(t){g=t.default},function(t){m=t.default}],execute:function(){var f,d,h,y,C,b,v;o._RF.push({},"15627yCmkpOfrx/Amli+imL","Sicbo.PopupJackpot",void 0);var N=r.ccclass,B=r.property,S=r.menu;t("default",(f=S("Sicbo/PopupJackpot"),d=B(l),h=B(l),N(y=f((b=e((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"listItem",b,a(e)),n(e,"itemTemplate",v,a(e)),e}return i(e,t),e.prototype.show=function(){var e=this;this.listItem.removeAllChildren(),p.getInstance().send("GetJackpotWinner",[g.instance.currency],(function(t){t.c<0?m.instance.alertDialog.showMsg(m.instance.getTextLang("ca"+t.c)):0!=t.r.length&&t.r.forEach((function(t,i){var n=c(e.itemTemplate);n.getChildByName("bg1").active=i%2==0,n.getChildByName("bg2").active=i%2!=0;var a=n.getChildByName("content");a.getChildByName("TIME").getComponent(s).string=new Date(t.createdTime).toLocaleString("en-GB"),a.getChildByName("ACCOUNT").getComponent(s).string=t.nickname,a.getChildByName("BET").getComponent(s).string=t.parValue.toLocaleString("vi-VN"),a.getChildByName("PRIZE").getComponent(s).string=t.prizeValue.toLocaleString("vi-VN"),e.listItem.addChild(n)}))})),t.prototype.show.call(this)},e}(u)).prototype,"listItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"itemTemplate",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y)||y));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Sicbo', 'chunks:///_virtual/Sicbo'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});